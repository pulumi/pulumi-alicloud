// *** WARNING: this file was generated by pulumi-language-nodejs. ***
// *** Do not edit by hand unless you're certain you know what you are doing! ***

import * as pulumi from "@pulumi/pulumi";
import * as utilities from "../utilities";

/**
 * Provides a CR Scan Rule resource.
 *
 * Artifact Scan Rule.
 *
 * For information about CR Scan Rule and how to use it, see [What is Scan Rule](https://next.api.alibabacloud.com/document/cr/2018-12-01/CreateScanRule).
 *
 * > **NOTE:** Available since v1.265.0.
 *
 * ## Example Usage
 *
 * Basic Usage
 *
 * ```typescript
 * import * as pulumi from "@pulumi/pulumi";
 * import * as alicloud from "@pulumi/alicloud";
 *
 * const config = new pulumi.Config();
 * const name = config.get("name") || "terraform-example";
 * const default2Aqoce = new alicloud.cr.RegistryEnterpriseInstance("default2Aqoce", {
 *     defaultOssBucket: "false",
 *     renewalStatus: "ManualRenewal",
 *     period: 1,
 *     instanceName: "pl-example-2",
 *     paymentType: "Subscription",
 *     instanceType: "Basic",
 * });
 * const _default = new alicloud.cr.ScanRule("default", {
 *     repoTagFilterPattern: ".*",
 *     scanScope: "REPO",
 *     triggerType: "MANUAL",
 *     scanType: "VUL",
 *     ruleName: name,
 *     namespaces: ["aa"],
 *     repoNames: [
 *         "bb",
 *         "cc",
 *         "dd",
 *         "ee",
 *     ],
 *     instanceId: default2Aqoce.id,
 * });
 * ```
 *
 * ðŸ“š Need more examples? VIEW MORE EXAMPLES
 *
 * ## Import
 *
 * CR Scan Rule can be imported using the id, e.g.
 *
 * ```sh
 * $ pulumi import alicloud:cr/scanRule:ScanRule example <instance_id>:<scan_rule_id>
 * ```
 */
export class ScanRule extends pulumi.CustomResource {
    /**
     * Get an existing ScanRule resource's state with the given name, ID, and optional extra
     * properties used to qualify the lookup.
     *
     * @param name The _unique_ name of the resulting resource.
     * @param id The _unique_ provider ID of the resource to lookup.
     * @param state Any extra arguments used during the lookup.
     * @param opts Optional settings to control the behavior of the CustomResource.
     */
    public static get(name: string, id: pulumi.Input<pulumi.ID>, state?: ScanRuleState, opts?: pulumi.CustomResourceOptions): ScanRule {
        return new ScanRule(name, <any>state, { ...opts, id: id });
    }

    /** @internal */
    public static readonly __pulumiType = 'alicloud:cr/scanRule:ScanRule';

    /**
     * Returns true if the given object is an instance of ScanRule.  This is designed to work even
     * when multiple copies of the Pulumi SDK have been loaded into the same process.
     */
    public static isInstance(obj: any): obj is ScanRule {
        if (obj === undefined || obj === null) {
            return false;
        }
        return obj['__pulumiType'] === ScanRule.__pulumiType;
    }

    /**
     * Creation time
     */
    declare public /*out*/ readonly createTime: pulumi.Output<number>;
    /**
     * Instance ID
     */
    declare public readonly instanceId: pulumi.Output<string>;
    /**
     * Set of namespaces:  
     * - This parameter must not be empty when the scan scope is NAMESPACE.
     * - This parameter must contain exactly one namespace when the scan scope is REPO.
     */
    declare public readonly namespaces: pulumi.Output<string[] | undefined>;
    /**
     * Repository list:  
     * - This parameter must be empty when the scan scope is NAMESPACE.
     * - This parameter must not be empty when the scan scope is REPO.
     */
    declare public readonly repoNames: pulumi.Output<string[] | undefined>;
    /**
     * Regular expression for matching tags that trigger a scan
     */
    declare public readonly repoTagFilterPattern: pulumi.Output<string>;
    /**
     * Event rule name
     */
    declare public readonly ruleName: pulumi.Output<string>;
    /**
     * Rule ID
     */
    declare public /*out*/ readonly scanRuleId: pulumi.Output<string>;
    /**
     * Scan scope
     */
    declare public readonly scanScope: pulumi.Output<string>;
    /**
     * Scan type:  
     * - `VUL`: Artifact vulnerability scan
     * - `SBOM`: Artifact content analysis
     *
     * The default value of this parameter is `VUL`.
     */
    declare public readonly scanType: pulumi.Output<string>;
    /**
     * Trigger type
     */
    declare public readonly triggerType: pulumi.Output<string>;

    /**
     * Create a ScanRule resource with the given unique name, arguments, and options.
     *
     * @param name The _unique_ name of the resource.
     * @param args The arguments to use to populate this resource's properties.
     * @param opts A bag of options that control this resource's behavior.
     */
    constructor(name: string, args: ScanRuleArgs, opts?: pulumi.CustomResourceOptions)
    constructor(name: string, argsOrState?: ScanRuleArgs | ScanRuleState, opts?: pulumi.CustomResourceOptions) {
        let resourceInputs: pulumi.Inputs = {};
        opts = opts || {};
        if (opts.id) {
            const state = argsOrState as ScanRuleState | undefined;
            resourceInputs["createTime"] = state?.createTime;
            resourceInputs["instanceId"] = state?.instanceId;
            resourceInputs["namespaces"] = state?.namespaces;
            resourceInputs["repoNames"] = state?.repoNames;
            resourceInputs["repoTagFilterPattern"] = state?.repoTagFilterPattern;
            resourceInputs["ruleName"] = state?.ruleName;
            resourceInputs["scanRuleId"] = state?.scanRuleId;
            resourceInputs["scanScope"] = state?.scanScope;
            resourceInputs["scanType"] = state?.scanType;
            resourceInputs["triggerType"] = state?.triggerType;
        } else {
            const args = argsOrState as ScanRuleArgs | undefined;
            if (args?.instanceId === undefined && !opts.urn) {
                throw new Error("Missing required property 'instanceId'");
            }
            if (args?.repoTagFilterPattern === undefined && !opts.urn) {
                throw new Error("Missing required property 'repoTagFilterPattern'");
            }
            if (args?.ruleName === undefined && !opts.urn) {
                throw new Error("Missing required property 'ruleName'");
            }
            if (args?.scanScope === undefined && !opts.urn) {
                throw new Error("Missing required property 'scanScope'");
            }
            if (args?.scanType === undefined && !opts.urn) {
                throw new Error("Missing required property 'scanType'");
            }
            if (args?.triggerType === undefined && !opts.urn) {
                throw new Error("Missing required property 'triggerType'");
            }
            resourceInputs["instanceId"] = args?.instanceId;
            resourceInputs["namespaces"] = args?.namespaces;
            resourceInputs["repoNames"] = args?.repoNames;
            resourceInputs["repoTagFilterPattern"] = args?.repoTagFilterPattern;
            resourceInputs["ruleName"] = args?.ruleName;
            resourceInputs["scanScope"] = args?.scanScope;
            resourceInputs["scanType"] = args?.scanType;
            resourceInputs["triggerType"] = args?.triggerType;
            resourceInputs["createTime"] = undefined /*out*/;
            resourceInputs["scanRuleId"] = undefined /*out*/;
        }
        opts = pulumi.mergeOptions(utilities.resourceOptsDefaults(), opts);
        super(ScanRule.__pulumiType, name, resourceInputs, opts);
    }
}

/**
 * Input properties used for looking up and filtering ScanRule resources.
 */
export interface ScanRuleState {
    /**
     * Creation time
     */
    createTime?: pulumi.Input<number>;
    /**
     * Instance ID
     */
    instanceId?: pulumi.Input<string>;
    /**
     * Set of namespaces:  
     * - This parameter must not be empty when the scan scope is NAMESPACE.
     * - This parameter must contain exactly one namespace when the scan scope is REPO.
     */
    namespaces?: pulumi.Input<pulumi.Input<string>[]>;
    /**
     * Repository list:  
     * - This parameter must be empty when the scan scope is NAMESPACE.
     * - This parameter must not be empty when the scan scope is REPO.
     */
    repoNames?: pulumi.Input<pulumi.Input<string>[]>;
    /**
     * Regular expression for matching tags that trigger a scan
     */
    repoTagFilterPattern?: pulumi.Input<string>;
    /**
     * Event rule name
     */
    ruleName?: pulumi.Input<string>;
    /**
     * Rule ID
     */
    scanRuleId?: pulumi.Input<string>;
    /**
     * Scan scope
     */
    scanScope?: pulumi.Input<string>;
    /**
     * Scan type:  
     * - `VUL`: Artifact vulnerability scan
     * - `SBOM`: Artifact content analysis
     *
     * The default value of this parameter is `VUL`.
     */
    scanType?: pulumi.Input<string>;
    /**
     * Trigger type
     */
    triggerType?: pulumi.Input<string>;
}

/**
 * The set of arguments for constructing a ScanRule resource.
 */
export interface ScanRuleArgs {
    /**
     * Instance ID
     */
    instanceId: pulumi.Input<string>;
    /**
     * Set of namespaces:  
     * - This parameter must not be empty when the scan scope is NAMESPACE.
     * - This parameter must contain exactly one namespace when the scan scope is REPO.
     */
    namespaces?: pulumi.Input<pulumi.Input<string>[]>;
    /**
     * Repository list:  
     * - This parameter must be empty when the scan scope is NAMESPACE.
     * - This parameter must not be empty when the scan scope is REPO.
     */
    repoNames?: pulumi.Input<pulumi.Input<string>[]>;
    /**
     * Regular expression for matching tags that trigger a scan
     */
    repoTagFilterPattern: pulumi.Input<string>;
    /**
     * Event rule name
     */
    ruleName: pulumi.Input<string>;
    /**
     * Scan scope
     */
    scanScope: pulumi.Input<string>;
    /**
     * Scan type:  
     * - `VUL`: Artifact vulnerability scan
     * - `SBOM`: Artifact content analysis
     *
     * The default value of this parameter is `VUL`.
     */
    scanType: pulumi.Input<string>;
    /**
     * Trigger type
     */
    triggerType: pulumi.Input<string>;
}
