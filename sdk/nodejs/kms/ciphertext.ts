// *** WARNING: this file was generated by pulumi-language-nodejs. ***
// *** Do not edit by hand unless you're certain you know what you are doing! ***

import * as pulumi from "@pulumi/pulumi";
import * as utilities from "../utilities";

/**
 * Encrypt a given plaintext with KMS. The produced ciphertext stays stable across applies. If the plaintext should be re-encrypted on each apply use the `alicloud.kms.Ciphertext` data source.
 *
 * > **NOTE:** Available since v1.63.0.
 *
 * > **NOTE**: Using this data provider will allow you to conceal secret data within your resource definitions but does not take care of protecting that data in all Terraform logging and state output. Please take care to secure your secret data beyond just the Terraform configuration.
 *
 * ## Example Usage
 *
 * ```typescript
 * import * as pulumi from "@pulumi/pulumi";
 * import * as alicloud from "@pulumi/alicloud";
 *
 * const key = new alicloud.kms.Key("key", {
 *     description: "example key",
 *     status: "Enabled",
 *     pendingWindowInDays: 7,
 * });
 * const encrypted = new alicloud.kms.Ciphertext("encrypted", {
 *     keyId: key.id,
 *     plaintext: "example",
 * });
 * ```
 *
 * ðŸ“š Need more examples? VIEW MORE EXAMPLES
 */
export class Ciphertext extends pulumi.CustomResource {
    /**
     * Get an existing Ciphertext resource's state with the given name, ID, and optional extra
     * properties used to qualify the lookup.
     *
     * @param name The _unique_ name of the resulting resource.
     * @param id The _unique_ provider ID of the resource to lookup.
     * @param state Any extra arguments used during the lookup.
     * @param opts Optional settings to control the behavior of the CustomResource.
     */
    public static get(name: string, id: pulumi.Input<pulumi.ID>, state?: CiphertextState, opts?: pulumi.CustomResourceOptions): Ciphertext {
        return new Ciphertext(name, <any>state, { ...opts, id: id });
    }

    /** @internal */
    public static readonly __pulumiType = 'alicloud:kms/ciphertext:Ciphertext';

    /**
     * Returns true if the given object is an instance of Ciphertext.  This is designed to work even
     * when multiple copies of the Pulumi SDK have been loaded into the same process.
     */
    public static isInstance(obj: any): obj is Ciphertext {
        if (obj === undefined || obj === null) {
            return false;
        }
        return obj['__pulumiType'] === Ciphertext.__pulumiType;
    }

    /**
     * The ciphertext of the data key encrypted with the primary CMK version.
     */
    declare public /*out*/ readonly ciphertextBlob: pulumi.Output<string>;
    /**
     * The Encryption context. If you specify this parameter here, it is also required when you call the Decrypt API operation. For more information, see [Encryption Context](https://www.alibabacloud.com/help/doc-detail/42975.htm).
     */
    declare public readonly encryptionContext: pulumi.Output<{[key: string]: string} | undefined>;
    /**
     * The globally unique ID of the CMK.
     */
    declare public readonly keyId: pulumi.Output<string>;
    /**
     * The plaintext to be encrypted which must be encoded in Base64.
     */
    declare public readonly plaintext: pulumi.Output<string>;

    /**
     * Create a Ciphertext resource with the given unique name, arguments, and options.
     *
     * @param name The _unique_ name of the resource.
     * @param args The arguments to use to populate this resource's properties.
     * @param opts A bag of options that control this resource's behavior.
     */
    constructor(name: string, args: CiphertextArgs, opts?: pulumi.CustomResourceOptions)
    constructor(name: string, argsOrState?: CiphertextArgs | CiphertextState, opts?: pulumi.CustomResourceOptions) {
        let resourceInputs: pulumi.Inputs = {};
        opts = opts || {};
        if (opts.id) {
            const state = argsOrState as CiphertextState | undefined;
            resourceInputs["ciphertextBlob"] = state?.ciphertextBlob;
            resourceInputs["encryptionContext"] = state?.encryptionContext;
            resourceInputs["keyId"] = state?.keyId;
            resourceInputs["plaintext"] = state?.plaintext;
        } else {
            const args = argsOrState as CiphertextArgs | undefined;
            if (args?.keyId === undefined && !opts.urn) {
                throw new Error("Missing required property 'keyId'");
            }
            if (args?.plaintext === undefined && !opts.urn) {
                throw new Error("Missing required property 'plaintext'");
            }
            resourceInputs["encryptionContext"] = args?.encryptionContext;
            resourceInputs["keyId"] = args?.keyId;
            resourceInputs["plaintext"] = args?.plaintext ? pulumi.secret(args.plaintext) : undefined;
            resourceInputs["ciphertextBlob"] = undefined /*out*/;
        }
        opts = pulumi.mergeOptions(utilities.resourceOptsDefaults(), opts);
        const secretOpts = { additionalSecretOutputs: ["plaintext"] };
        opts = pulumi.mergeOptions(opts, secretOpts);
        super(Ciphertext.__pulumiType, name, resourceInputs, opts);
    }
}

/**
 * Input properties used for looking up and filtering Ciphertext resources.
 */
export interface CiphertextState {
    /**
     * The ciphertext of the data key encrypted with the primary CMK version.
     */
    ciphertextBlob?: pulumi.Input<string>;
    /**
     * The Encryption context. If you specify this parameter here, it is also required when you call the Decrypt API operation. For more information, see [Encryption Context](https://www.alibabacloud.com/help/doc-detail/42975.htm).
     */
    encryptionContext?: pulumi.Input<{[key: string]: pulumi.Input<string>}>;
    /**
     * The globally unique ID of the CMK.
     */
    keyId?: pulumi.Input<string>;
    /**
     * The plaintext to be encrypted which must be encoded in Base64.
     */
    plaintext?: pulumi.Input<string>;
}

/**
 * The set of arguments for constructing a Ciphertext resource.
 */
export interface CiphertextArgs {
    /**
     * The Encryption context. If you specify this parameter here, it is also required when you call the Decrypt API operation. For more information, see [Encryption Context](https://www.alibabacloud.com/help/doc-detail/42975.htm).
     */
    encryptionContext?: pulumi.Input<{[key: string]: pulumi.Input<string>}>;
    /**
     * The globally unique ID of the CMK.
     */
    keyId: pulumi.Input<string>;
    /**
     * The plaintext to be encrypted which must be encoded in Base64.
     */
    plaintext: pulumi.Input<string>;
}
