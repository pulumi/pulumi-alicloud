// *** WARNING: this file was generated by pulumi-language-nodejs. ***
// *** Do not edit by hand unless you're certain you know what you are doing! ***

import * as pulumi from "@pulumi/pulumi";
import * as utilities from "../utilities";

/**
 * Provides a PolarDB cluster backup policy resource and used to configure cluster backup policy.
 *
 * > **NOTE:** Available since v1.66.0+. Each PolarDB cluster has a backup policy.
 *
 * ## Example Usage
 *
 * ```typescript
 * import * as pulumi from "@pulumi/pulumi";
 * import * as alicloud from "@pulumi/alicloud";
 *
 * const _default = alicloud.polardb.getNodeClasses({
 *     dbType: "MySQL",
 *     dbVersion: "8.0",
 *     payType: "PostPaid",
 *     category: "Normal",
 * });
 * const defaultNetwork = new alicloud.vpc.Network("default", {
 *     vpcName: "terraform-example",
 *     cidrBlock: "172.16.0.0/16",
 * });
 * const defaultSwitch = new alicloud.vpc.Switch("default", {
 *     vpcId: defaultNetwork.id,
 *     cidrBlock: "172.16.0.0/24",
 *     zoneId: _default.then(_default => _default.classes?.[0]?.zoneId),
 *     vswitchName: "terraform-example",
 * });
 * const defaultCluster = new alicloud.polardb.Cluster("default", {
 *     dbType: "MySQL",
 *     dbVersion: "8.0",
 *     dbNodeClass: _default.then(_default => _default.classes?.[0]?.supportedEngines?.[0]?.availableResources?.[0]?.dbNodeClass),
 *     payType: "PostPaid",
 *     vswitchId: defaultSwitch.id,
 *     description: "terraform-example",
 * });
 * const defaultBackupPolicy = new alicloud.polardb.BackupPolicy("default", {
 *     dbClusterId: defaultCluster.id,
 *     preferredBackupPeriods: [
 *         "Tuesday",
 *         "Wednesday",
 *     ],
 *     preferredBackupTime: "10:00Z-11:00Z",
 *     backupRetentionPolicyOnClusterDeletion: "NONE",
 * });
 * ```
 * ### Removing alicloud.polardb.Cluster from your configuration
 *
 * The alicloud.polardb.BackupPolicy resource allows you to manage your polardb cluster policy, but Terraform cannot destroy it. Removing this resource from your configuration will remove it from your statefile and management, but will not destroy the cluster policy. You can resume managing the cluster via the polardb Console.
 *
 * ðŸ“š Need more examples? VIEW MORE EXAMPLES
 *
 * ## Import
 *
 * PolarDB backup policy can be imported using the id or cluster id, e.g.
 *
 * ```sh
 * $ pulumi import alicloud:polardb/backupPolicy:BackupPolicy example "rm-12345678"
 * ```
 */
export class BackupPolicy extends pulumi.CustomResource {
    /**
     * Get an existing BackupPolicy resource's state with the given name, ID, and optional extra
     * properties used to qualify the lookup.
     *
     * @param name The _unique_ name of the resulting resource.
     * @param id The _unique_ provider ID of the resource to lookup.
     * @param state Any extra arguments used during the lookup.
     * @param opts Optional settings to control the behavior of the CustomResource.
     */
    public static get(name: string, id: pulumi.Input<pulumi.ID>, state?: BackupPolicyState, opts?: pulumi.CustomResourceOptions): BackupPolicy {
        return new BackupPolicy(name, <any>state, { ...opts, id: id });
    }

    /** @internal */
    public static readonly __pulumiType = 'alicloud:polardb/backupPolicy:BackupPolicy';

    /**
     * Returns true if the given object is an instance of BackupPolicy.  This is designed to work even
     * when multiple copies of the Pulumi SDK have been loaded into the same process.
     */
    public static isInstance(obj: any): obj is BackupPolicy {
        if (obj === undefined || obj === null) {
            return false;
        }
        return obj['__pulumiType'] === BackupPolicy.__pulumiType;
    }

    /**
     * The backup frequency. Valid values are `Normal`, `2/24H`, `3/24H`, `4/24H`.Default to `Normal`.
     */
    declare public readonly backupFrequency: pulumi.Output<string>;
    /**
     * Cluster backup retention days, Fixed for 7 days, not modified.
     */
    declare public readonly backupRetentionPeriod: pulumi.Output<string>;
    /**
     * Specifies whether to retain backups when you delete a cluster. Valid values are `ALL`, `LATEST`, `NONE`. Default to `NONE`. Value options can refer to the latest docs [ModifyBackupPolicy](https://www.alibabacloud.com/help/en/polardb/latest/modifybackuppolicy)
     */
    declare public readonly backupRetentionPolicyOnClusterDeletion: pulumi.Output<string>;
    /**
     * The Id of cluster that can run database.The backup frequency. Valid values are `Normal`, `2/24H`, `3/24H`, `4/24H`.Default to `Normal`.
     */
    declare public readonly dataLevel1BackupFrequency: pulumi.Output<string>;
    /**
     * PolarDB Cluster of level-1 backup period. Valid values: ["Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday", "Sunday"].
     * > **NOTE:** Note Select at least two values. Separate multiple values with commas (,).
     */
    declare public readonly dataLevel1BackupPeriods: pulumi.Output<string[]>;
    /**
     * The retention period of level-1 backups. Valid values: 3 to 14. Unit: days.
     */
    declare public readonly dataLevel1BackupRetentionPeriod: pulumi.Output<number>;
    /**
     * The time period during which automatic backup is performed. The format is HH: MMZ HH: MMZ (UTC time), and the entered value must be an hour apart, such as 14:00z-15:00z.
     */
    declare public readonly dataLevel1BackupTime: pulumi.Output<string>;
    /**
     * PolarDB Cluster of level-2 backup is a cross regional backup area.
     */
    declare public readonly dataLevel2BackupAnotherRegionRegion: pulumi.Output<string | undefined>;
    /**
     * PolarDB Cluster of level-2 backup cross region backup retention period. Valid values are `0`, `30 to 7300`, `-1`. Default to `0`.
     */
    declare public readonly dataLevel2BackupAnotherRegionRetentionPeriod: pulumi.Output<number>;
    /**
     * PolarDB Cluster of level-2 backup period. Valid values: ["Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday", "Sunday"].
     * > **NOTE:** Note Select at least two values. Separate multiple values with commas (,).
     */
    declare public readonly dataLevel2BackupPeriods: pulumi.Output<string[] | undefined>;
    /**
     * The retention period of level-2 backups. Valid values are `0`, `30 to 7300`, `-1`. Default to `0`.
     */
    declare public readonly dataLevel2BackupRetentionPeriod: pulumi.Output<number>;
    /**
     * The Id of cluster that can run database.
     */
    declare public readonly dbClusterId: pulumi.Output<string>;
    /**
     * Indicates whether the log backup feature was enabled. Valid values are `0`, `1`. `1` By default, the log backup feature is enabled and cannot be disabled.
     */
    declare public /*out*/ readonly enableBackupLog: pulumi.Output<number>;
    /**
     * The region in which you want to store cross-region log backups. For information about regions that support the cross-region backup feature, see [Overview.](https://www.alibabacloud.com/help/en/polardb/latest/backup-and-restoration-overview)
     */
    declare public readonly logBackupAnotherRegionRegion: pulumi.Output<string | undefined>;
    /**
     * The retention period of cross-region log backups. Default value: OFF. Valid values are `0`, `30 to 7300`, `-1`.
     * > **NOTE:** Note When you create a cluster, the default value of this parameter is 0.
     */
    declare public readonly logBackupAnotherRegionRetentionPeriod: pulumi.Output<number | undefined>;
    /**
     * The retention period of the log backups. Valid values are `3 to 7300`, `-1`.
     */
    declare public readonly logBackupRetentionPeriod: pulumi.Output<number>;
    /**
     * PolarDB Cluster backup period. Valid values: ["Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday", "Sunday"]. Default to ["Tuesday", "Thursday", "Saturday"].
     */
    declare public readonly preferredBackupPeriods: pulumi.Output<string[]>;
    /**
     * PolarDB Cluster backup time, in the format of HH:mmZ- HH:mmZ. Time setting interval is one hour. Default to "02:00Z-03:00Z". China time is 8 hours behind it.
     */
    declare public readonly preferredBackupTime: pulumi.Output<string>;

    /**
     * Create a BackupPolicy resource with the given unique name, arguments, and options.
     *
     * @param name The _unique_ name of the resource.
     * @param args The arguments to use to populate this resource's properties.
     * @param opts A bag of options that control this resource's behavior.
     */
    constructor(name: string, args: BackupPolicyArgs, opts?: pulumi.CustomResourceOptions)
    constructor(name: string, argsOrState?: BackupPolicyArgs | BackupPolicyState, opts?: pulumi.CustomResourceOptions) {
        let resourceInputs: pulumi.Inputs = {};
        opts = opts || {};
        if (opts.id) {
            const state = argsOrState as BackupPolicyState | undefined;
            resourceInputs["backupFrequency"] = state?.backupFrequency;
            resourceInputs["backupRetentionPeriod"] = state?.backupRetentionPeriod;
            resourceInputs["backupRetentionPolicyOnClusterDeletion"] = state?.backupRetentionPolicyOnClusterDeletion;
            resourceInputs["dataLevel1BackupFrequency"] = state?.dataLevel1BackupFrequency;
            resourceInputs["dataLevel1BackupPeriods"] = state?.dataLevel1BackupPeriods;
            resourceInputs["dataLevel1BackupRetentionPeriod"] = state?.dataLevel1BackupRetentionPeriod;
            resourceInputs["dataLevel1BackupTime"] = state?.dataLevel1BackupTime;
            resourceInputs["dataLevel2BackupAnotherRegionRegion"] = state?.dataLevel2BackupAnotherRegionRegion;
            resourceInputs["dataLevel2BackupAnotherRegionRetentionPeriod"] = state?.dataLevel2BackupAnotherRegionRetentionPeriod;
            resourceInputs["dataLevel2BackupPeriods"] = state?.dataLevel2BackupPeriods;
            resourceInputs["dataLevel2BackupRetentionPeriod"] = state?.dataLevel2BackupRetentionPeriod;
            resourceInputs["dbClusterId"] = state?.dbClusterId;
            resourceInputs["enableBackupLog"] = state?.enableBackupLog;
            resourceInputs["logBackupAnotherRegionRegion"] = state?.logBackupAnotherRegionRegion;
            resourceInputs["logBackupAnotherRegionRetentionPeriod"] = state?.logBackupAnotherRegionRetentionPeriod;
            resourceInputs["logBackupRetentionPeriod"] = state?.logBackupRetentionPeriod;
            resourceInputs["preferredBackupPeriods"] = state?.preferredBackupPeriods;
            resourceInputs["preferredBackupTime"] = state?.preferredBackupTime;
        } else {
            const args = argsOrState as BackupPolicyArgs | undefined;
            if (args?.dbClusterId === undefined && !opts.urn) {
                throw new Error("Missing required property 'dbClusterId'");
            }
            resourceInputs["backupFrequency"] = args?.backupFrequency;
            resourceInputs["backupRetentionPeriod"] = args?.backupRetentionPeriod;
            resourceInputs["backupRetentionPolicyOnClusterDeletion"] = args?.backupRetentionPolicyOnClusterDeletion;
            resourceInputs["dataLevel1BackupFrequency"] = args?.dataLevel1BackupFrequency;
            resourceInputs["dataLevel1BackupPeriods"] = args?.dataLevel1BackupPeriods;
            resourceInputs["dataLevel1BackupRetentionPeriod"] = args?.dataLevel1BackupRetentionPeriod;
            resourceInputs["dataLevel1BackupTime"] = args?.dataLevel1BackupTime;
            resourceInputs["dataLevel2BackupAnotherRegionRegion"] = args?.dataLevel2BackupAnotherRegionRegion;
            resourceInputs["dataLevel2BackupAnotherRegionRetentionPeriod"] = args?.dataLevel2BackupAnotherRegionRetentionPeriod;
            resourceInputs["dataLevel2BackupPeriods"] = args?.dataLevel2BackupPeriods;
            resourceInputs["dataLevel2BackupRetentionPeriod"] = args?.dataLevel2BackupRetentionPeriod;
            resourceInputs["dbClusterId"] = args?.dbClusterId;
            resourceInputs["logBackupAnotherRegionRegion"] = args?.logBackupAnotherRegionRegion;
            resourceInputs["logBackupAnotherRegionRetentionPeriod"] = args?.logBackupAnotherRegionRetentionPeriod;
            resourceInputs["logBackupRetentionPeriod"] = args?.logBackupRetentionPeriod;
            resourceInputs["preferredBackupPeriods"] = args?.preferredBackupPeriods;
            resourceInputs["preferredBackupTime"] = args?.preferredBackupTime;
            resourceInputs["enableBackupLog"] = undefined /*out*/;
        }
        opts = pulumi.mergeOptions(utilities.resourceOptsDefaults(), opts);
        super(BackupPolicy.__pulumiType, name, resourceInputs, opts);
    }
}

/**
 * Input properties used for looking up and filtering BackupPolicy resources.
 */
export interface BackupPolicyState {
    /**
     * The backup frequency. Valid values are `Normal`, `2/24H`, `3/24H`, `4/24H`.Default to `Normal`.
     */
    backupFrequency?: pulumi.Input<string>;
    /**
     * Cluster backup retention days, Fixed for 7 days, not modified.
     */
    backupRetentionPeriod?: pulumi.Input<string>;
    /**
     * Specifies whether to retain backups when you delete a cluster. Valid values are `ALL`, `LATEST`, `NONE`. Default to `NONE`. Value options can refer to the latest docs [ModifyBackupPolicy](https://www.alibabacloud.com/help/en/polardb/latest/modifybackuppolicy)
     */
    backupRetentionPolicyOnClusterDeletion?: pulumi.Input<string>;
    /**
     * The Id of cluster that can run database.The backup frequency. Valid values are `Normal`, `2/24H`, `3/24H`, `4/24H`.Default to `Normal`.
     */
    dataLevel1BackupFrequency?: pulumi.Input<string>;
    /**
     * PolarDB Cluster of level-1 backup period. Valid values: ["Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday", "Sunday"].
     * > **NOTE:** Note Select at least two values. Separate multiple values with commas (,).
     */
    dataLevel1BackupPeriods?: pulumi.Input<pulumi.Input<string>[]>;
    /**
     * The retention period of level-1 backups. Valid values: 3 to 14. Unit: days.
     */
    dataLevel1BackupRetentionPeriod?: pulumi.Input<number>;
    /**
     * The time period during which automatic backup is performed. The format is HH: MMZ HH: MMZ (UTC time), and the entered value must be an hour apart, such as 14:00z-15:00z.
     */
    dataLevel1BackupTime?: pulumi.Input<string>;
    /**
     * PolarDB Cluster of level-2 backup is a cross regional backup area.
     */
    dataLevel2BackupAnotherRegionRegion?: pulumi.Input<string>;
    /**
     * PolarDB Cluster of level-2 backup cross region backup retention period. Valid values are `0`, `30 to 7300`, `-1`. Default to `0`.
     */
    dataLevel2BackupAnotherRegionRetentionPeriod?: pulumi.Input<number>;
    /**
     * PolarDB Cluster of level-2 backup period. Valid values: ["Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday", "Sunday"].
     * > **NOTE:** Note Select at least two values. Separate multiple values with commas (,).
     */
    dataLevel2BackupPeriods?: pulumi.Input<pulumi.Input<string>[]>;
    /**
     * The retention period of level-2 backups. Valid values are `0`, `30 to 7300`, `-1`. Default to `0`.
     */
    dataLevel2BackupRetentionPeriod?: pulumi.Input<number>;
    /**
     * The Id of cluster that can run database.
     */
    dbClusterId?: pulumi.Input<string>;
    /**
     * Indicates whether the log backup feature was enabled. Valid values are `0`, `1`. `1` By default, the log backup feature is enabled and cannot be disabled.
     */
    enableBackupLog?: pulumi.Input<number>;
    /**
     * The region in which you want to store cross-region log backups. For information about regions that support the cross-region backup feature, see [Overview.](https://www.alibabacloud.com/help/en/polardb/latest/backup-and-restoration-overview)
     */
    logBackupAnotherRegionRegion?: pulumi.Input<string>;
    /**
     * The retention period of cross-region log backups. Default value: OFF. Valid values are `0`, `30 to 7300`, `-1`.
     * > **NOTE:** Note When you create a cluster, the default value of this parameter is 0.
     */
    logBackupAnotherRegionRetentionPeriod?: pulumi.Input<number>;
    /**
     * The retention period of the log backups. Valid values are `3 to 7300`, `-1`.
     */
    logBackupRetentionPeriod?: pulumi.Input<number>;
    /**
     * PolarDB Cluster backup period. Valid values: ["Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday", "Sunday"]. Default to ["Tuesday", "Thursday", "Saturday"].
     */
    preferredBackupPeriods?: pulumi.Input<pulumi.Input<string>[]>;
    /**
     * PolarDB Cluster backup time, in the format of HH:mmZ- HH:mmZ. Time setting interval is one hour. Default to "02:00Z-03:00Z". China time is 8 hours behind it.
     */
    preferredBackupTime?: pulumi.Input<string>;
}

/**
 * The set of arguments for constructing a BackupPolicy resource.
 */
export interface BackupPolicyArgs {
    /**
     * The backup frequency. Valid values are `Normal`, `2/24H`, `3/24H`, `4/24H`.Default to `Normal`.
     */
    backupFrequency?: pulumi.Input<string>;
    /**
     * Cluster backup retention days, Fixed for 7 days, not modified.
     */
    backupRetentionPeriod?: pulumi.Input<string>;
    /**
     * Specifies whether to retain backups when you delete a cluster. Valid values are `ALL`, `LATEST`, `NONE`. Default to `NONE`. Value options can refer to the latest docs [ModifyBackupPolicy](https://www.alibabacloud.com/help/en/polardb/latest/modifybackuppolicy)
     */
    backupRetentionPolicyOnClusterDeletion?: pulumi.Input<string>;
    /**
     * The Id of cluster that can run database.The backup frequency. Valid values are `Normal`, `2/24H`, `3/24H`, `4/24H`.Default to `Normal`.
     */
    dataLevel1BackupFrequency?: pulumi.Input<string>;
    /**
     * PolarDB Cluster of level-1 backup period. Valid values: ["Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday", "Sunday"].
     * > **NOTE:** Note Select at least two values. Separate multiple values with commas (,).
     */
    dataLevel1BackupPeriods?: pulumi.Input<pulumi.Input<string>[]>;
    /**
     * The retention period of level-1 backups. Valid values: 3 to 14. Unit: days.
     */
    dataLevel1BackupRetentionPeriod?: pulumi.Input<number>;
    /**
     * The time period during which automatic backup is performed. The format is HH: MMZ HH: MMZ (UTC time), and the entered value must be an hour apart, such as 14:00z-15:00z.
     */
    dataLevel1BackupTime?: pulumi.Input<string>;
    /**
     * PolarDB Cluster of level-2 backup is a cross regional backup area.
     */
    dataLevel2BackupAnotherRegionRegion?: pulumi.Input<string>;
    /**
     * PolarDB Cluster of level-2 backup cross region backup retention period. Valid values are `0`, `30 to 7300`, `-1`. Default to `0`.
     */
    dataLevel2BackupAnotherRegionRetentionPeriod?: pulumi.Input<number>;
    /**
     * PolarDB Cluster of level-2 backup period. Valid values: ["Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday", "Sunday"].
     * > **NOTE:** Note Select at least two values. Separate multiple values with commas (,).
     */
    dataLevel2BackupPeriods?: pulumi.Input<pulumi.Input<string>[]>;
    /**
     * The retention period of level-2 backups. Valid values are `0`, `30 to 7300`, `-1`. Default to `0`.
     */
    dataLevel2BackupRetentionPeriod?: pulumi.Input<number>;
    /**
     * The Id of cluster that can run database.
     */
    dbClusterId: pulumi.Input<string>;
    /**
     * The region in which you want to store cross-region log backups. For information about regions that support the cross-region backup feature, see [Overview.](https://www.alibabacloud.com/help/en/polardb/latest/backup-and-restoration-overview)
     */
    logBackupAnotherRegionRegion?: pulumi.Input<string>;
    /**
     * The retention period of cross-region log backups. Default value: OFF. Valid values are `0`, `30 to 7300`, `-1`.
     * > **NOTE:** Note When you create a cluster, the default value of this parameter is 0.
     */
    logBackupAnotherRegionRetentionPeriod?: pulumi.Input<number>;
    /**
     * The retention period of the log backups. Valid values are `3 to 7300`, `-1`.
     */
    logBackupRetentionPeriod?: pulumi.Input<number>;
    /**
     * PolarDB Cluster backup period. Valid values: ["Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday", "Sunday"]. Default to ["Tuesday", "Thursday", "Saturday"].
     */
    preferredBackupPeriods?: pulumi.Input<pulumi.Input<string>[]>;
    /**
     * PolarDB Cluster backup time, in the format of HH:mmZ- HH:mmZ. Time setting interval is one hour. Default to "02:00Z-03:00Z". China time is 8 hours behind it.
     */
    preferredBackupTime?: pulumi.Input<string>;
}
