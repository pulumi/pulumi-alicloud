// *** WARNING: this file was generated by pulumi-language-java. ***
// *** Do not edit by hand unless you're certain you know what you are doing! ***

package com.pulumi.alicloud.alb;

import com.pulumi.alicloud.Utilities;
import com.pulumi.alicloud.alb.ListenerAclAttachmentArgs;
import com.pulumi.alicloud.alb.inputs.ListenerAclAttachmentState;
import com.pulumi.core.Output;
import com.pulumi.core.annotations.Export;
import com.pulumi.core.annotations.ResourceType;
import com.pulumi.core.internal.Codegen;
import java.lang.String;
import javax.annotation.Nullable;

/**
 * Provides a ALB Listener Acl Attachment resource. Associating ACL to listening.
 * 
 * For information about ALB Listener Acl Attachment and how to use it, see [What is Listener Acl Attachment](https://www.alibabacloud.com/help/en/slb/application-load-balancer/developer-reference/api-alb-2020-06-16-associateaclswithlistener).
 * 
 * &gt; **NOTE:** Available since v1.163.0.
 * 
 * &gt; **NOTE:** You can associate at most three ACLs with a listener.
 * 
 * &gt; **NOTE:** You can only configure either a whitelist or a blacklist for listener, not at the same time.
 * 
 * ## Example Usage
 * 
 * Basic Usage
 * 
 * <pre>
 * {@code
 * package generated_program;
 * 
 * import com.pulumi.Context;
 * import com.pulumi.Pulumi;
 * import com.pulumi.core.Output;
 * import com.pulumi.alicloud.alb.AlbFunctions;
 * import com.pulumi.alicloud.alb.inputs.GetZonesArgs;
 * import com.pulumi.alicloud.resourcemanager.ResourcemanagerFunctions;
 * import com.pulumi.alicloud.resourcemanager.inputs.GetResourceGroupsArgs;
 * import com.pulumi.alicloud.vpc.Network;
 * import com.pulumi.alicloud.vpc.NetworkArgs;
 * import com.pulumi.alicloud.vpc.Switch;
 * import com.pulumi.alicloud.vpc.SwitchArgs;
 * import com.pulumi.std.StdFunctions;
 * import com.pulumi.std.inputs.FormatArgs;
 * import com.pulumi.alicloud.alb.LoadBalancer;
 * import com.pulumi.alicloud.alb.LoadBalancerArgs;
 * import com.pulumi.alicloud.alb.inputs.LoadBalancerLoadBalancerBillingConfigArgs;
 * import com.pulumi.alicloud.alb.inputs.LoadBalancerZoneMappingArgs;
 * import com.pulumi.alicloud.alb.ServerGroup;
 * import com.pulumi.alicloud.alb.ServerGroupArgs;
 * import com.pulumi.alicloud.alb.inputs.ServerGroupHealthCheckConfigArgs;
 * import com.pulumi.alicloud.alb.inputs.ServerGroupStickySessionConfigArgs;
 * import com.pulumi.alicloud.alb.Listener;
 * import com.pulumi.alicloud.alb.ListenerArgs;
 * import com.pulumi.alicloud.alb.inputs.ListenerDefaultActionArgs;
 * import com.pulumi.alicloud.alb.inputs.ListenerDefaultActionForwardGroupConfigArgs;
 * import com.pulumi.alicloud.alb.Acl;
 * import com.pulumi.alicloud.alb.AclArgs;
 * import com.pulumi.alicloud.alb.AclEntryAttachment;
 * import com.pulumi.alicloud.alb.AclEntryAttachmentArgs;
 * import com.pulumi.alicloud.alb.ListenerAclAttachment;
 * import com.pulumi.alicloud.alb.ListenerAclAttachmentArgs;
 * import com.pulumi.codegen.internal.KeyedValue;
 * import java.util.List;
 * import java.util.ArrayList;
 * import java.util.Map;
 * import java.io.File;
 * import java.nio.file.Files;
 * import java.nio.file.Paths;
 * 
 * public class App {
 *     public static void main(String[] args) {
 *         Pulumi.run(App::stack);
 *     }
 * 
 *     public static void stack(Context ctx) {
 *         final var config = ctx.config();
 *         final var name = config.get("name").orElse("tf_example");
 *         final var default = AlbFunctions.getZones(GetZonesArgs.builder()
 *             .build());
 * 
 *         final var defaultGetResourceGroups = ResourcemanagerFunctions.getResourceGroups(GetResourceGroupsArgs.builder()
 *             .build());
 * 
 *         var defaultNetwork = new Network("defaultNetwork", NetworkArgs.builder()
 *             .vpcName(name)
 *             .cidrBlock("10.4.0.0/16")
 *             .build());
 * 
 *         for (var i = 0; i < 2; i++) {
 *             new Switch("defaultSwitch-" + i, SwitchArgs.builder()
 *                 .vpcId(defaultNetwork.id())
 *                 .cidrBlock(StdFunctions.format(FormatArgs.builder()
 *                     .input("10.4.%d.0/24")
 *                     .args(range.value() + 1)
 *                     .build()).result())
 *                 .zoneId(default_.zones()[range.value() + 3].id())
 *                 .vswitchName(StdFunctions.format(FormatArgs.builder()
 *                     .input(String.format("%s_%d", name))
 *                     .args(range.value() + 1)
 *                     .build()).result())
 *                 .build());
 * 
 *         
 * }
 *         var defaultLoadBalancer = new LoadBalancer("defaultLoadBalancer", LoadBalancerArgs.builder()
 *             .vpcId(defaultNetwork.id())
 *             .addressType("Internet")
 *             .addressAllocatedMode("Fixed")
 *             .loadBalancerName(name)
 *             .loadBalancerEdition("Standard")
 *             .resourceGroupId(defaultGetResourceGroups.groups()[0].id())
 *             .loadBalancerBillingConfig(LoadBalancerLoadBalancerBillingConfigArgs.builder()
 *                 .payType("PayAsYouGo")
 *                 .build())
 *             .tags(Map.of("Created", "TF"))
 *             .zoneMappings(            
 *                 LoadBalancerZoneMappingArgs.builder()
 *                     .vswitchId(defaultSwitch[0].id())
 *                     .zoneId(defaultSwitch[0].zoneId())
 *                     .build(),
 *                 LoadBalancerZoneMappingArgs.builder()
 *                     .vswitchId(defaultSwitch[1].id())
 *                     .zoneId(defaultSwitch[1].zoneId())
 *                     .build())
 *             .build());
 * 
 *         var defaultServerGroup = new ServerGroup("defaultServerGroup", ServerGroupArgs.builder()
 *             .protocol("HTTP")
 *             .vpcId(defaultNetwork.id())
 *             .serverGroupName(name)
 *             .resourceGroupId(defaultGetResourceGroups.groups()[0].id())
 *             .healthCheckConfig(ServerGroupHealthCheckConfigArgs.builder()
 *                 .healthCheckEnabled(false)
 *                 .build())
 *             .stickySessionConfig(ServerGroupStickySessionConfigArgs.builder()
 *                 .stickySessionEnabled(false)
 *                 .build())
 *             .tags(Map.of("Created", "TF"))
 *             .build());
 * 
 *         var defaultListener = new Listener("defaultListener", ListenerArgs.builder()
 *             .loadBalancerId(defaultLoadBalancer.id())
 *             .listenerProtocol("HTTP")
 *             .listenerPort(80)
 *             .listenerDescription(name)
 *             .defaultActions(ListenerDefaultActionArgs.builder()
 *                 .type("ForwardGroup")
 *                 .forwardGroupConfig(ListenerDefaultActionForwardGroupConfigArgs.builder()
 *                     .serverGroupTuples(ListenerDefaultActionForwardGroupConfigServerGroupTupleArgs.builder()
 *                         .serverGroupId(defaultServerGroup.id())
 *                         .build())
 *                     .build())
 *                 .build())
 *             .build());
 * 
 *         var defaultAcl = new Acl("defaultAcl", AclArgs.builder()
 *             .aclName(name)
 *             .resourceGroupId(defaultGetResourceGroups.groups()[0].id())
 *             .build());
 * 
 *         var defaultAclEntryAttachment = new AclEntryAttachment("defaultAclEntryAttachment", AclEntryAttachmentArgs.builder()
 *             .aclId(defaultAcl.id())
 *             .entry("10.0.0.0/24")
 *             .description(name)
 *             .build());
 * 
 *         var defaultListenerAclAttachment = new ListenerAclAttachment("defaultListenerAclAttachment", ListenerAclAttachmentArgs.builder()
 *             .aclId(defaultAcl.id())
 *             .listenerId(defaultListener.id())
 *             .aclType("White")
 *             .build());
 * 
 *     }
 * }
 * }
 * </pre>
 * 
 * ## Import
 * 
 * ALB Listener Acl Attachment can be imported using the id, e.g.
 * 
 * ```sh
 * $ pulumi import alicloud:alb/listenerAclAttachment:ListenerAclAttachment example &lt;listener_id&gt;:&lt;acl_id&gt;
 * ```
 * 
 */
@ResourceType(type="alicloud:alb/listenerAclAttachment:ListenerAclAttachment")
public class ListenerAclAttachment extends com.pulumi.resources.CustomResource {
    /**
     * The ID list of the access policy group bound by the listener.
     * 
     */
    @Export(name="aclId", refs={String.class}, tree="[0]")
    private Output<String> aclId;

    /**
     * @return The ID list of the access policy group bound by the listener.
     * 
     */
    public Output<String> aclId() {
        return this.aclId;
    }
    /**
     * Access control type:
     * - **White**: only requests from IP addresses or address segments in the selected access control list are forwarded. The whitelist applies to scenarios where only specific IP addresses are allowed to access. There are certain business risks in setting up a whitelist. Once the whitelist is set, only the IP addresses in the whitelist can access the load balancer listener. If whitelist access is enabled but no IP addresses are added to the access policy group, the server load balancer listener forwards all requests.
     * - **Black**: All requests from IP addresses or address segments in the selected access control list are not forwarded. Blacklists are applicable to scenarios where only certain IP addresses are restricted. If blacklist access is enabled and no IP is added to the access policy group, the server load balancer listener forwards all requests.
     * 
     */
    @Export(name="aclType", refs={String.class}, tree="[0]")
    private Output<String> aclType;

    /**
     * @return Access control type:
     * - **White**: only requests from IP addresses or address segments in the selected access control list are forwarded. The whitelist applies to scenarios where only specific IP addresses are allowed to access. There are certain business risks in setting up a whitelist. Once the whitelist is set, only the IP addresses in the whitelist can access the load balancer listener. If whitelist access is enabled but no IP addresses are added to the access policy group, the server load balancer listener forwards all requests.
     * - **Black**: All requests from IP addresses or address segments in the selected access control list are not forwarded. Blacklists are applicable to scenarios where only certain IP addresses are restricted. If blacklist access is enabled and no IP is added to the access policy group, the server load balancer listener forwards all requests.
     * 
     */
    public Output<String> aclType() {
        return this.aclType;
    }
    /**
     * Listener instance ID.
     * 
     */
    @Export(name="listenerId", refs={String.class}, tree="[0]")
    private Output<String> listenerId;

    /**
     * @return Listener instance ID.
     * 
     */
    public Output<String> listenerId() {
        return this.listenerId;
    }
    /**
     * Listener Status.
     * 
     */
    @Export(name="status", refs={String.class}, tree="[0]")
    private Output<String> status;

    /**
     * @return Listener Status.
     * 
     */
    public Output<String> status() {
        return this.status;
    }

    /**
     *
     * @param name The _unique_ name of the resulting resource.
     */
    public ListenerAclAttachment(java.lang.String name) {
        this(name, ListenerAclAttachmentArgs.Empty);
    }
    /**
     *
     * @param name The _unique_ name of the resulting resource.
     * @param args The arguments to use to populate this resource's properties.
     */
    public ListenerAclAttachment(java.lang.String name, ListenerAclAttachmentArgs args) {
        this(name, args, null);
    }
    /**
     *
     * @param name The _unique_ name of the resulting resource.
     * @param args The arguments to use to populate this resource's properties.
     * @param options A bag of options that control this resource's behavior.
     */
    public ListenerAclAttachment(java.lang.String name, ListenerAclAttachmentArgs args, @Nullable com.pulumi.resources.CustomResourceOptions options) {
        super("alicloud:alb/listenerAclAttachment:ListenerAclAttachment", name, makeArgs(args, options), makeResourceOptions(options, Codegen.empty()), false);
    }

    private ListenerAclAttachment(java.lang.String name, Output<java.lang.String> id, @Nullable ListenerAclAttachmentState state, @Nullable com.pulumi.resources.CustomResourceOptions options) {
        super("alicloud:alb/listenerAclAttachment:ListenerAclAttachment", name, state, makeResourceOptions(options, id), false);
    }

    private static ListenerAclAttachmentArgs makeArgs(ListenerAclAttachmentArgs args, @Nullable com.pulumi.resources.CustomResourceOptions options) {
        if (options != null && options.getUrn().isPresent()) {
            return null;
        }
        return args == null ? ListenerAclAttachmentArgs.Empty : args;
    }

    private static com.pulumi.resources.CustomResourceOptions makeResourceOptions(@Nullable com.pulumi.resources.CustomResourceOptions options, @Nullable Output<java.lang.String> id) {
        var defaultOptions = com.pulumi.resources.CustomResourceOptions.builder()
            .version(Utilities.getVersion())
            .build();
        return com.pulumi.resources.CustomResourceOptions.merge(defaultOptions, options, id);
    }

    /**
     * Get an existing Host resource's state with the given name, ID, and optional extra
     * properties used to qualify the lookup.
     *
     * @param name The _unique_ name of the resulting resource.
     * @param id The _unique_ provider ID of the resource to lookup.
     * @param state
     * @param options Optional settings to control the behavior of the CustomResource.
     */
    public static ListenerAclAttachment get(java.lang.String name, Output<java.lang.String> id, @Nullable ListenerAclAttachmentState state, @Nullable com.pulumi.resources.CustomResourceOptions options) {
        return new ListenerAclAttachment(name, id, state, options);
    }
}
