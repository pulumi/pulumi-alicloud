// Code generated by the Pulumi Terraform Bridge (tfgen) Tool DO NOT EDIT.
// *** WARNING: Do not edit by hand unless you're certain you know what you are doing! ***

package cen

import (
	"context"
	"reflect"

	"errors"
	"github.com/pulumi/pulumi-alicloud/sdk/v3/go/alicloud/internal"
	"github.com/pulumi/pulumi/sdk/v3/go/pulumi"
)

// This topic describes how to configure the health check feature for a Cloud Enterprise Network (CEN) instance.
// After you attach a Virtual Border Router (VBR) to the CEN instance and configure the health check feature, you can monitor the network conditions of the on-premises data center connected to the VBR.
//
// For information about CEN VBR HealthCheck and how to use it, see [Manage CEN VBR HealthCheck](https://www.alibabacloud.com/help/en/cen/developer-reference/api-cbn-2017-09-12-enablecenvbrhealthcheck).
//
// > **NOTE:** Available since v1.88.0.
//
// ## Example Usage
//
// # Basic Usage
//
// <!--Start PulumiCodeChooser -->
// ```go
// package main
//
// import (
//
//	"github.com/pulumi/pulumi-alicloud/sdk/v3/go/alicloud"
//	"github.com/pulumi/pulumi-alicloud/sdk/v3/go/alicloud/cen"
//	"github.com/pulumi/pulumi-alicloud/sdk/v3/go/alicloud/expressconnect"
//	"github.com/pulumi/pulumi-random/sdk/v4/go/random"
//	"github.com/pulumi/pulumi/sdk/v3/go/pulumi"
//	"github.com/pulumi/pulumi/sdk/v3/go/pulumi/config"
//
// )
//
//	func main() {
//		pulumi.Run(func(ctx *pulumi.Context) error {
//			cfg := config.New(ctx, "")
//			name := "terraform-example"
//			if param := cfg.Get("name"); param != "" {
//				name = param
//			}
//			defaultRegions, err := alicloud.GetRegions(ctx, &alicloud.GetRegionsArgs{
//				Current: pulumi.BoolRef(true),
//			}, nil)
//			if err != nil {
//				return err
//			}
//			defaultPhysicalConnections, err := expressconnect.GetPhysicalConnections(ctx, &expressconnect.GetPhysicalConnectionsArgs{
//				NameRegex: pulumi.StringRef("^preserved-NODELETING"),
//			}, nil)
//			if err != nil {
//				return err
//			}
//			vlanId, err := random.NewRandomInteger(ctx, "vlanId", &random.RandomIntegerArgs{
//				Max: pulumi.Int(2999),
//				Min: pulumi.Int(1),
//			})
//			if err != nil {
//				return err
//			}
//			exampleVirtualBorderRouter, err := expressconnect.NewVirtualBorderRouter(ctx, "exampleVirtualBorderRouter", &expressconnect.VirtualBorderRouterArgs{
//				LocalGatewayIp:          pulumi.String("10.0.0.1"),
//				PeerGatewayIp:           pulumi.String("10.0.0.2"),
//				PeeringSubnetMask:       pulumi.String("255.255.255.252"),
//				PhysicalConnectionId:    pulumi.String(defaultPhysicalConnections.Connections[0].Id),
//				VirtualBorderRouterName: pulumi.String(name),
//				VlanId:                  vlanId.ID(),
//				MinRxInterval:           pulumi.Int(1000),
//				MinTxInterval:           pulumi.Int(1000),
//				DetectMultiplier:        pulumi.Int(10),
//			})
//			if err != nil {
//				return err
//			}
//			exampleInstance, err := cen.NewInstance(ctx, "exampleInstance", &cen.InstanceArgs{
//				CenInstanceName: pulumi.String(name),
//				ProtectionLevel: pulumi.String("REDUCED"),
//			})
//			if err != nil {
//				return err
//			}
//			exampleInstanceAttachment, err := cen.NewInstanceAttachment(ctx, "exampleInstanceAttachment", &cen.InstanceAttachmentArgs{
//				InstanceId:            exampleInstance.ID(),
//				ChildInstanceId:       exampleVirtualBorderRouter.ID(),
//				ChildInstanceType:     pulumi.String("VBR"),
//				ChildInstanceRegionId: pulumi.String(defaultRegions.Regions[0].Id),
//			})
//			if err != nil {
//				return err
//			}
//			_, err = cen.NewVbrHealthCheck(ctx, "exampleVbrHealthCheck", &cen.VbrHealthCheckArgs{
//				CenId:               exampleInstance.ID(),
//				HealthCheckSourceIp: pulumi.String("192.168.1.2"),
//				HealthCheckTargetIp: pulumi.String("10.0.0.2"),
//				VbrInstanceId:       exampleVirtualBorderRouter.ID(),
//				VbrInstanceRegionId: exampleInstanceAttachment.ChildInstanceRegionId,
//				HealthCheckInterval: pulumi.Int(2),
//				HealthyThreshold:    pulumi.Int(8),
//			})
//			if err != nil {
//				return err
//			}
//			return nil
//		})
//	}
//
// ```
// <!--End PulumiCodeChooser -->
//
// ## Import
//
// CEN VBR HealthCheck can be imported using the id, e.g.
//
// ```sh
// $ pulumi import alicloud:cen/vbrHealthCheck:VbrHealthCheck example vbr-xxxxx:cn-hangzhou
// ```
type VbrHealthCheck struct {
	pulumi.CustomResourceState

	// The ID of the CEN instance.
	CenId pulumi.StringOutput `pulumi:"cenId"`
	// Specifies the interval at which the health check sends continuous detection packets. Default value: 2. Value range: 2 to 3.
	HealthCheckInterval pulumi.IntPtrOutput `pulumi:"healthCheckInterval"`
	// The source IP address of health checks.
	HealthCheckSourceIp pulumi.StringPtrOutput `pulumi:"healthCheckSourceIp"`
	// The destination IP address of health checks.
	HealthCheckTargetIp pulumi.StringOutput `pulumi:"healthCheckTargetIp"`
	// Specifies the number of probe messages sent by the health check. Default value: 8. Value range: 3 to 8.
	HealthyThreshold pulumi.IntPtrOutput `pulumi:"healthyThreshold"`
	// The ID of the VBR.
	VbrInstanceId pulumi.StringOutput `pulumi:"vbrInstanceId"`
	// The ID of the account to which the VBR belongs.
	VbrInstanceOwnerId pulumi.IntPtrOutput `pulumi:"vbrInstanceOwnerId"`
	// The ID of the region to which the VBR belongs.
	//
	// ->**NOTE:** The `cen.VbrHealthCheck` resource depends on the related `cen.InstanceAttachment` resource.
	VbrInstanceRegionId pulumi.StringOutput `pulumi:"vbrInstanceRegionId"`
}

// NewVbrHealthCheck registers a new resource with the given unique name, arguments, and options.
func NewVbrHealthCheck(ctx *pulumi.Context,
	name string, args *VbrHealthCheckArgs, opts ...pulumi.ResourceOption) (*VbrHealthCheck, error) {
	if args == nil {
		return nil, errors.New("missing one or more required arguments")
	}

	if args.CenId == nil {
		return nil, errors.New("invalid value for required argument 'CenId'")
	}
	if args.HealthCheckTargetIp == nil {
		return nil, errors.New("invalid value for required argument 'HealthCheckTargetIp'")
	}
	if args.VbrInstanceId == nil {
		return nil, errors.New("invalid value for required argument 'VbrInstanceId'")
	}
	if args.VbrInstanceRegionId == nil {
		return nil, errors.New("invalid value for required argument 'VbrInstanceRegionId'")
	}
	opts = internal.PkgResourceDefaultOpts(opts)
	var resource VbrHealthCheck
	err := ctx.RegisterResource("alicloud:cen/vbrHealthCheck:VbrHealthCheck", name, args, &resource, opts...)
	if err != nil {
		return nil, err
	}
	return &resource, nil
}

// GetVbrHealthCheck gets an existing VbrHealthCheck resource's state with the given name, ID, and optional
// state properties that are used to uniquely qualify the lookup (nil if not required).
func GetVbrHealthCheck(ctx *pulumi.Context,
	name string, id pulumi.IDInput, state *VbrHealthCheckState, opts ...pulumi.ResourceOption) (*VbrHealthCheck, error) {
	var resource VbrHealthCheck
	err := ctx.ReadResource("alicloud:cen/vbrHealthCheck:VbrHealthCheck", name, id, state, &resource, opts...)
	if err != nil {
		return nil, err
	}
	return &resource, nil
}

// Input properties used for looking up and filtering VbrHealthCheck resources.
type vbrHealthCheckState struct {
	// The ID of the CEN instance.
	CenId *string `pulumi:"cenId"`
	// Specifies the interval at which the health check sends continuous detection packets. Default value: 2. Value range: 2 to 3.
	HealthCheckInterval *int `pulumi:"healthCheckInterval"`
	// The source IP address of health checks.
	HealthCheckSourceIp *string `pulumi:"healthCheckSourceIp"`
	// The destination IP address of health checks.
	HealthCheckTargetIp *string `pulumi:"healthCheckTargetIp"`
	// Specifies the number of probe messages sent by the health check. Default value: 8. Value range: 3 to 8.
	HealthyThreshold *int `pulumi:"healthyThreshold"`
	// The ID of the VBR.
	VbrInstanceId *string `pulumi:"vbrInstanceId"`
	// The ID of the account to which the VBR belongs.
	VbrInstanceOwnerId *int `pulumi:"vbrInstanceOwnerId"`
	// The ID of the region to which the VBR belongs.
	//
	// ->**NOTE:** The `cen.VbrHealthCheck` resource depends on the related `cen.InstanceAttachment` resource.
	VbrInstanceRegionId *string `pulumi:"vbrInstanceRegionId"`
}

type VbrHealthCheckState struct {
	// The ID of the CEN instance.
	CenId pulumi.StringPtrInput
	// Specifies the interval at which the health check sends continuous detection packets. Default value: 2. Value range: 2 to 3.
	HealthCheckInterval pulumi.IntPtrInput
	// The source IP address of health checks.
	HealthCheckSourceIp pulumi.StringPtrInput
	// The destination IP address of health checks.
	HealthCheckTargetIp pulumi.StringPtrInput
	// Specifies the number of probe messages sent by the health check. Default value: 8. Value range: 3 to 8.
	HealthyThreshold pulumi.IntPtrInput
	// The ID of the VBR.
	VbrInstanceId pulumi.StringPtrInput
	// The ID of the account to which the VBR belongs.
	VbrInstanceOwnerId pulumi.IntPtrInput
	// The ID of the region to which the VBR belongs.
	//
	// ->**NOTE:** The `cen.VbrHealthCheck` resource depends on the related `cen.InstanceAttachment` resource.
	VbrInstanceRegionId pulumi.StringPtrInput
}

func (VbrHealthCheckState) ElementType() reflect.Type {
	return reflect.TypeOf((*vbrHealthCheckState)(nil)).Elem()
}

type vbrHealthCheckArgs struct {
	// The ID of the CEN instance.
	CenId string `pulumi:"cenId"`
	// Specifies the interval at which the health check sends continuous detection packets. Default value: 2. Value range: 2 to 3.
	HealthCheckInterval *int `pulumi:"healthCheckInterval"`
	// The source IP address of health checks.
	HealthCheckSourceIp *string `pulumi:"healthCheckSourceIp"`
	// The destination IP address of health checks.
	HealthCheckTargetIp string `pulumi:"healthCheckTargetIp"`
	// Specifies the number of probe messages sent by the health check. Default value: 8. Value range: 3 to 8.
	HealthyThreshold *int `pulumi:"healthyThreshold"`
	// The ID of the VBR.
	VbrInstanceId string `pulumi:"vbrInstanceId"`
	// The ID of the account to which the VBR belongs.
	VbrInstanceOwnerId *int `pulumi:"vbrInstanceOwnerId"`
	// The ID of the region to which the VBR belongs.
	//
	// ->**NOTE:** The `cen.VbrHealthCheck` resource depends on the related `cen.InstanceAttachment` resource.
	VbrInstanceRegionId string `pulumi:"vbrInstanceRegionId"`
}

// The set of arguments for constructing a VbrHealthCheck resource.
type VbrHealthCheckArgs struct {
	// The ID of the CEN instance.
	CenId pulumi.StringInput
	// Specifies the interval at which the health check sends continuous detection packets. Default value: 2. Value range: 2 to 3.
	HealthCheckInterval pulumi.IntPtrInput
	// The source IP address of health checks.
	HealthCheckSourceIp pulumi.StringPtrInput
	// The destination IP address of health checks.
	HealthCheckTargetIp pulumi.StringInput
	// Specifies the number of probe messages sent by the health check. Default value: 8. Value range: 3 to 8.
	HealthyThreshold pulumi.IntPtrInput
	// The ID of the VBR.
	VbrInstanceId pulumi.StringInput
	// The ID of the account to which the VBR belongs.
	VbrInstanceOwnerId pulumi.IntPtrInput
	// The ID of the region to which the VBR belongs.
	//
	// ->**NOTE:** The `cen.VbrHealthCheck` resource depends on the related `cen.InstanceAttachment` resource.
	VbrInstanceRegionId pulumi.StringInput
}

func (VbrHealthCheckArgs) ElementType() reflect.Type {
	return reflect.TypeOf((*vbrHealthCheckArgs)(nil)).Elem()
}

type VbrHealthCheckInput interface {
	pulumi.Input

	ToVbrHealthCheckOutput() VbrHealthCheckOutput
	ToVbrHealthCheckOutputWithContext(ctx context.Context) VbrHealthCheckOutput
}

func (*VbrHealthCheck) ElementType() reflect.Type {
	return reflect.TypeOf((**VbrHealthCheck)(nil)).Elem()
}

func (i *VbrHealthCheck) ToVbrHealthCheckOutput() VbrHealthCheckOutput {
	return i.ToVbrHealthCheckOutputWithContext(context.Background())
}

func (i *VbrHealthCheck) ToVbrHealthCheckOutputWithContext(ctx context.Context) VbrHealthCheckOutput {
	return pulumi.ToOutputWithContext(ctx, i).(VbrHealthCheckOutput)
}

// VbrHealthCheckArrayInput is an input type that accepts VbrHealthCheckArray and VbrHealthCheckArrayOutput values.
// You can construct a concrete instance of `VbrHealthCheckArrayInput` via:
//
//	VbrHealthCheckArray{ VbrHealthCheckArgs{...} }
type VbrHealthCheckArrayInput interface {
	pulumi.Input

	ToVbrHealthCheckArrayOutput() VbrHealthCheckArrayOutput
	ToVbrHealthCheckArrayOutputWithContext(context.Context) VbrHealthCheckArrayOutput
}

type VbrHealthCheckArray []VbrHealthCheckInput

func (VbrHealthCheckArray) ElementType() reflect.Type {
	return reflect.TypeOf((*[]*VbrHealthCheck)(nil)).Elem()
}

func (i VbrHealthCheckArray) ToVbrHealthCheckArrayOutput() VbrHealthCheckArrayOutput {
	return i.ToVbrHealthCheckArrayOutputWithContext(context.Background())
}

func (i VbrHealthCheckArray) ToVbrHealthCheckArrayOutputWithContext(ctx context.Context) VbrHealthCheckArrayOutput {
	return pulumi.ToOutputWithContext(ctx, i).(VbrHealthCheckArrayOutput)
}

// VbrHealthCheckMapInput is an input type that accepts VbrHealthCheckMap and VbrHealthCheckMapOutput values.
// You can construct a concrete instance of `VbrHealthCheckMapInput` via:
//
//	VbrHealthCheckMap{ "key": VbrHealthCheckArgs{...} }
type VbrHealthCheckMapInput interface {
	pulumi.Input

	ToVbrHealthCheckMapOutput() VbrHealthCheckMapOutput
	ToVbrHealthCheckMapOutputWithContext(context.Context) VbrHealthCheckMapOutput
}

type VbrHealthCheckMap map[string]VbrHealthCheckInput

func (VbrHealthCheckMap) ElementType() reflect.Type {
	return reflect.TypeOf((*map[string]*VbrHealthCheck)(nil)).Elem()
}

func (i VbrHealthCheckMap) ToVbrHealthCheckMapOutput() VbrHealthCheckMapOutput {
	return i.ToVbrHealthCheckMapOutputWithContext(context.Background())
}

func (i VbrHealthCheckMap) ToVbrHealthCheckMapOutputWithContext(ctx context.Context) VbrHealthCheckMapOutput {
	return pulumi.ToOutputWithContext(ctx, i).(VbrHealthCheckMapOutput)
}

type VbrHealthCheckOutput struct{ *pulumi.OutputState }

func (VbrHealthCheckOutput) ElementType() reflect.Type {
	return reflect.TypeOf((**VbrHealthCheck)(nil)).Elem()
}

func (o VbrHealthCheckOutput) ToVbrHealthCheckOutput() VbrHealthCheckOutput {
	return o
}

func (o VbrHealthCheckOutput) ToVbrHealthCheckOutputWithContext(ctx context.Context) VbrHealthCheckOutput {
	return o
}

// The ID of the CEN instance.
func (o VbrHealthCheckOutput) CenId() pulumi.StringOutput {
	return o.ApplyT(func(v *VbrHealthCheck) pulumi.StringOutput { return v.CenId }).(pulumi.StringOutput)
}

// Specifies the interval at which the health check sends continuous detection packets. Default value: 2. Value range: 2 to 3.
func (o VbrHealthCheckOutput) HealthCheckInterval() pulumi.IntPtrOutput {
	return o.ApplyT(func(v *VbrHealthCheck) pulumi.IntPtrOutput { return v.HealthCheckInterval }).(pulumi.IntPtrOutput)
}

// The source IP address of health checks.
func (o VbrHealthCheckOutput) HealthCheckSourceIp() pulumi.StringPtrOutput {
	return o.ApplyT(func(v *VbrHealthCheck) pulumi.StringPtrOutput { return v.HealthCheckSourceIp }).(pulumi.StringPtrOutput)
}

// The destination IP address of health checks.
func (o VbrHealthCheckOutput) HealthCheckTargetIp() pulumi.StringOutput {
	return o.ApplyT(func(v *VbrHealthCheck) pulumi.StringOutput { return v.HealthCheckTargetIp }).(pulumi.StringOutput)
}

// Specifies the number of probe messages sent by the health check. Default value: 8. Value range: 3 to 8.
func (o VbrHealthCheckOutput) HealthyThreshold() pulumi.IntPtrOutput {
	return o.ApplyT(func(v *VbrHealthCheck) pulumi.IntPtrOutput { return v.HealthyThreshold }).(pulumi.IntPtrOutput)
}

// The ID of the VBR.
func (o VbrHealthCheckOutput) VbrInstanceId() pulumi.StringOutput {
	return o.ApplyT(func(v *VbrHealthCheck) pulumi.StringOutput { return v.VbrInstanceId }).(pulumi.StringOutput)
}

// The ID of the account to which the VBR belongs.
func (o VbrHealthCheckOutput) VbrInstanceOwnerId() pulumi.IntPtrOutput {
	return o.ApplyT(func(v *VbrHealthCheck) pulumi.IntPtrOutput { return v.VbrInstanceOwnerId }).(pulumi.IntPtrOutput)
}

// The ID of the region to which the VBR belongs.
//
// ->**NOTE:** The `cen.VbrHealthCheck` resource depends on the related `cen.InstanceAttachment` resource.
func (o VbrHealthCheckOutput) VbrInstanceRegionId() pulumi.StringOutput {
	return o.ApplyT(func(v *VbrHealthCheck) pulumi.StringOutput { return v.VbrInstanceRegionId }).(pulumi.StringOutput)
}

type VbrHealthCheckArrayOutput struct{ *pulumi.OutputState }

func (VbrHealthCheckArrayOutput) ElementType() reflect.Type {
	return reflect.TypeOf((*[]*VbrHealthCheck)(nil)).Elem()
}

func (o VbrHealthCheckArrayOutput) ToVbrHealthCheckArrayOutput() VbrHealthCheckArrayOutput {
	return o
}

func (o VbrHealthCheckArrayOutput) ToVbrHealthCheckArrayOutputWithContext(ctx context.Context) VbrHealthCheckArrayOutput {
	return o
}

func (o VbrHealthCheckArrayOutput) Index(i pulumi.IntInput) VbrHealthCheckOutput {
	return pulumi.All(o, i).ApplyT(func(vs []interface{}) *VbrHealthCheck {
		return vs[0].([]*VbrHealthCheck)[vs[1].(int)]
	}).(VbrHealthCheckOutput)
}

type VbrHealthCheckMapOutput struct{ *pulumi.OutputState }

func (VbrHealthCheckMapOutput) ElementType() reflect.Type {
	return reflect.TypeOf((*map[string]*VbrHealthCheck)(nil)).Elem()
}

func (o VbrHealthCheckMapOutput) ToVbrHealthCheckMapOutput() VbrHealthCheckMapOutput {
	return o
}

func (o VbrHealthCheckMapOutput) ToVbrHealthCheckMapOutputWithContext(ctx context.Context) VbrHealthCheckMapOutput {
	return o
}

func (o VbrHealthCheckMapOutput) MapIndex(k pulumi.StringInput) VbrHealthCheckOutput {
	return pulumi.All(o, k).ApplyT(func(vs []interface{}) *VbrHealthCheck {
		return vs[0].(map[string]*VbrHealthCheck)[vs[1].(string)]
	}).(VbrHealthCheckOutput)
}

func init() {
	pulumi.RegisterInputType(reflect.TypeOf((*VbrHealthCheckInput)(nil)).Elem(), &VbrHealthCheck{})
	pulumi.RegisterInputType(reflect.TypeOf((*VbrHealthCheckArrayInput)(nil)).Elem(), VbrHealthCheckArray{})
	pulumi.RegisterInputType(reflect.TypeOf((*VbrHealthCheckMapInput)(nil)).Elem(), VbrHealthCheckMap{})
	pulumi.RegisterOutputType(VbrHealthCheckOutput{})
	pulumi.RegisterOutputType(VbrHealthCheckArrayOutput{})
	pulumi.RegisterOutputType(VbrHealthCheckMapOutput{})
}
