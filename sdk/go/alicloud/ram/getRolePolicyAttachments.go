// Code generated by the Pulumi Terraform Bridge (tfgen) Tool DO NOT EDIT.
// *** WARNING: Do not edit by hand unless you're certain you know what you are doing! ***

package ram

import (
	"context"
	"reflect"

	"github.com/pulumi/pulumi-alicloud/sdk/v3/go/alicloud/internal"
	"github.com/pulumi/pulumi/sdk/v3/go/pulumi"
)

// This data source provides Ram Role Policy Attachment available to the user.[What is Role Policy Attachment](https://next.api.alibabacloud.com/document/Ram/2015-05-01/AttachPolicyToRole)
//
// > **NOTE:** Available since v1.248.0.
//
// ## Example Usage
//
// ```go
// package main
//
// import (
//
//	"fmt"
//
//	"github.com/pulumi/pulumi-alicloud/sdk/v3/go/alicloud/ram"
//	"github.com/pulumi/pulumi-random/sdk/v4/go/random"
//	"github.com/pulumi/pulumi/sdk/v3/go/pulumi"
//	"github.com/pulumi/pulumi/sdk/v3/go/pulumi/config"
//
// )
// func main() {
// pulumi.Run(func(ctx *pulumi.Context) error {
// cfg := config.New(ctx, "")
// name := "terraform-example";
// if param := cfg.Get("name"); param != ""{
// name = param
// }
// role, err := ram.NewRole(ctx, "role", &ram.RoleArgs{
// Name: pulumi.String("roleName"),
//
//	Document: pulumi.String(`    {
//	      "Statement": [
//	        {
//	          "Action": "sts:AssumeRole",
//	          "Effect": "Allow",
//	          "Principal": {
//	            "Service": [
//	              "apigateway.aliyuncs.com",
//	              "ecs.aliyuncs.com"
//	            ]
//	          }
//	        }
//	      ],
//	      "Version": "1"
//	    }
//
// `),
// Description: pulumi.String("this is a role test."),
// })
// if err != nil {
// return err
// }
// defaultInteger, err := random.NewInteger(ctx, "default", &random.IntegerArgs{
// Min: 10000,
// Max: 99999,
// })
// if err != nil {
// return err
// }
// policy, err := ram.NewPolicy(ctx, "policy", &ram.PolicyArgs{
// PolicyName: pulumi.Sprintf("tf-example-%v", defaultInteger.Result),
//
//	PolicyDocument: pulumi.String(`  {
//	    "Statement": [
//	      {
//	        "Action": [
//	          "oss:ListObjects",
//	          "oss:GetObject"
//	        ],
//	        "Effect": "Allow",
//	        "Resource": [
//	          "acs:oss:*:*:mybucket",
//	          "acs:oss:*:*:mybucket/*"
//	        ]
//	      }
//	    ],
//	      "Version": "1"
//	  }
//
// `),
// Description: pulumi.String("this is a policy test"),
// })
// if err != nil {
// return err
// }
// defaultRolePolicyAttachment, err := ram.NewRolePolicyAttachment(ctx, "default", &ram.RolePolicyAttachmentArgs{
// PolicyName: policy.PolicyName,
// PolicyType: policy.Type,
// RoleName: role.Name,
// })
// if err != nil {
// return err
// }
// _default := ram.GetRolePolicyAttachmentsOutput(ctx, ram.GetRolePolicyAttachmentsOutputArgs{
// Ids: pulumi.StringArray{
// defaultRolePolicyAttachment.ID(),
// },
// RoleName: role.ID(),
// }, nil);
// ctx.Export("alicloudRamRolePolicyAttachmentExampleId", _default.ApplyT(func(_default ram.GetRolePolicyAttachmentsResult) (*string, error) {
// return &default.Attachments[0].Id, nil
// }).(pulumi.StringPtrOutput))
// return nil
// })
// }
// ```
func GetRolePolicyAttachments(ctx *pulumi.Context, args *GetRolePolicyAttachmentsArgs, opts ...pulumi.InvokeOption) (*GetRolePolicyAttachmentsResult, error) {
	opts = internal.PkgInvokeDefaultOpts(opts)
	var rv GetRolePolicyAttachmentsResult
	err := ctx.Invoke("alicloud:ram/getRolePolicyAttachments:getRolePolicyAttachments", args, &rv, opts...)
	if err != nil {
		return nil, err
	}
	return &rv, nil
}

// A collection of arguments for invoking getRolePolicyAttachments.
type GetRolePolicyAttachmentsArgs struct {
	// A list of Role Policy Attachment IDs. The value is formulated as `role:<policy_name>:<policy_type>:<role_name>`.
	Ids []string `pulumi:"ids"`
	// File name where to save data source results (after running `pulumi preview`).
	OutputFile *string `pulumi:"outputFile"`
	// The RAM role name.
	RoleName string `pulumi:"roleName"`
}

// A collection of values returned by getRolePolicyAttachments.
type GetRolePolicyAttachmentsResult struct {
	// A list of Role Policy Attachment Entries. Each element contains the following attributes:
	Attachments []GetRolePolicyAttachmentsAttachment `pulumi:"attachments"`
	// The provider-assigned unique ID for this managed resource.
	Id string `pulumi:"id"`
	// A list of Role Policy Attachment IDs.
	Ids        []string `pulumi:"ids"`
	OutputFile *string  `pulumi:"outputFile"`
	RoleName   string   `pulumi:"roleName"`
}

func GetRolePolicyAttachmentsOutput(ctx *pulumi.Context, args GetRolePolicyAttachmentsOutputArgs, opts ...pulumi.InvokeOption) GetRolePolicyAttachmentsResultOutput {
	return pulumi.ToOutputWithContext(ctx.Context(), args).
		ApplyT(func(v interface{}) (GetRolePolicyAttachmentsResultOutput, error) {
			args := v.(GetRolePolicyAttachmentsArgs)
			options := pulumi.InvokeOutputOptions{InvokeOptions: internal.PkgInvokeDefaultOpts(opts)}
			return ctx.InvokeOutput("alicloud:ram/getRolePolicyAttachments:getRolePolicyAttachments", args, GetRolePolicyAttachmentsResultOutput{}, options).(GetRolePolicyAttachmentsResultOutput), nil
		}).(GetRolePolicyAttachmentsResultOutput)
}

// A collection of arguments for invoking getRolePolicyAttachments.
type GetRolePolicyAttachmentsOutputArgs struct {
	// A list of Role Policy Attachment IDs. The value is formulated as `role:<policy_name>:<policy_type>:<role_name>`.
	Ids pulumi.StringArrayInput `pulumi:"ids"`
	// File name where to save data source results (after running `pulumi preview`).
	OutputFile pulumi.StringPtrInput `pulumi:"outputFile"`
	// The RAM role name.
	RoleName pulumi.StringInput `pulumi:"roleName"`
}

func (GetRolePolicyAttachmentsOutputArgs) ElementType() reflect.Type {
	return reflect.TypeOf((*GetRolePolicyAttachmentsArgs)(nil)).Elem()
}

// A collection of values returned by getRolePolicyAttachments.
type GetRolePolicyAttachmentsResultOutput struct{ *pulumi.OutputState }

func (GetRolePolicyAttachmentsResultOutput) ElementType() reflect.Type {
	return reflect.TypeOf((*GetRolePolicyAttachmentsResult)(nil)).Elem()
}

func (o GetRolePolicyAttachmentsResultOutput) ToGetRolePolicyAttachmentsResultOutput() GetRolePolicyAttachmentsResultOutput {
	return o
}

func (o GetRolePolicyAttachmentsResultOutput) ToGetRolePolicyAttachmentsResultOutputWithContext(ctx context.Context) GetRolePolicyAttachmentsResultOutput {
	return o
}

// A list of Role Policy Attachment Entries. Each element contains the following attributes:
func (o GetRolePolicyAttachmentsResultOutput) Attachments() GetRolePolicyAttachmentsAttachmentArrayOutput {
	return o.ApplyT(func(v GetRolePolicyAttachmentsResult) []GetRolePolicyAttachmentsAttachment { return v.Attachments }).(GetRolePolicyAttachmentsAttachmentArrayOutput)
}

// The provider-assigned unique ID for this managed resource.
func (o GetRolePolicyAttachmentsResultOutput) Id() pulumi.StringOutput {
	return o.ApplyT(func(v GetRolePolicyAttachmentsResult) string { return v.Id }).(pulumi.StringOutput)
}

// A list of Role Policy Attachment IDs.
func (o GetRolePolicyAttachmentsResultOutput) Ids() pulumi.StringArrayOutput {
	return o.ApplyT(func(v GetRolePolicyAttachmentsResult) []string { return v.Ids }).(pulumi.StringArrayOutput)
}

func (o GetRolePolicyAttachmentsResultOutput) OutputFile() pulumi.StringPtrOutput {
	return o.ApplyT(func(v GetRolePolicyAttachmentsResult) *string { return v.OutputFile }).(pulumi.StringPtrOutput)
}

func (o GetRolePolicyAttachmentsResultOutput) RoleName() pulumi.StringOutput {
	return o.ApplyT(func(v GetRolePolicyAttachmentsResult) string { return v.RoleName }).(pulumi.StringOutput)
}

func init() {
	pulumi.RegisterOutputType(GetRolePolicyAttachmentsResultOutput{})
}
