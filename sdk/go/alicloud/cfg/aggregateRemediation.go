// Code generated by pulumi-language-go DO NOT EDIT.
// *** WARNING: Do not edit by hand unless you're certain you know what you are doing! ***

package cfg

import (
	"context"
	"reflect"

	"errors"
	"github.com/pulumi/pulumi-alicloud/sdk/v3/go/alicloud/internal"
	"github.com/pulumi/pulumi/sdk/v3/go/pulumi"
)

// Provides a Cloud Config (Config) Aggregate Remediation resource.
//
// Rule remediation in multi-account scenarios.
//
// For information about Cloud Config (Config) Aggregate Remediation and how to use it, see [What is Aggregate Remediation](https://next.api.alibabacloud.com/document/Config/2020-09-07/CreateAggregateRemediation).
//
// > **NOTE:** Available since v1.267.0.
//
// ## Example Usage
//
// # Basic Usage
//
// ```go
// package main
//
// import (
//
//	"encoding/json"
//
//	"github.com/pulumi/pulumi-alicloud/sdk/v3/go/alicloud/cfg"
//	"github.com/pulumi/pulumi/sdk/v3/go/pulumi"
//	"github.com/pulumi/pulumi/sdk/v3/go/pulumi/config"
//
// )
//
//	func main() {
//		pulumi.Run(func(ctx *pulumi.Context) error {
//			cfg := config.New(ctx, "")
//			name := "terraform-example"
//			if param := cfg.Get("name"); param != "" {
//				name = param
//			}
//			create_agg, err := cfg.NewAggregator(ctx, "create-agg", &cfg.AggregatorArgs{
//				AggregatorName: pulumi.String("rd"),
//				Description:    pulumi.String("rd"),
//				AggregatorType: pulumi.String("RD"),
//			})
//			if err != nil {
//				return err
//			}
//			create_rule, err := cfg.NewAggregateConfigRule(ctx, "create-rule", &cfg.AggregateConfigRuleArgs{
//				SourceOwner:             pulumi.String("ALIYUN"),
//				SourceIdentifier:        pulumi.String("required-tags"),
//				AggregateConfigRuleName: pulumi.String("agg-rule-name"),
//				ConfigRuleTriggerTypes:  pulumi.String("ConfigurationItemChangeNotification"),
//				RiskLevel:               pulumi.Int(1),
//				ResourceTypesScopes: pulumi.StringArray{
//					pulumi.String("ACS::OSS::Bucket"),
//				},
//				AggregatorId: create_agg.ID(),
//				InputParameters: pulumi.StringMap{
//					"tag1Key":   pulumi.String("aaa"),
//					"tag1Value": pulumi.String("bbb"),
//				},
//			})
//			if err != nil {
//				return err
//			}
//			tmpJSON0, err := json.Marshal(map[string]interface{}{
//				"properties": []map[string]interface{}{
//					map[string]interface{}{
//						"name":          "regionId",
//						"type":          "String",
//						"value":         "{regionId}",
//						"allowedValues": []interface{}{},
//						"description":   "region ID",
//					},
//					map[string]interface{}{
//						"name":          "tags",
//						"type":          "Json",
//						"value":         "{\"aaa\":\"bbb\"}",
//						"allowedValues": []interface{}{},
//						"description":   "resource tags (for example,{\"k1\":\"v1\",\"k2\":\"v2\"}).",
//					},
//					map[string]interface{}{
//						"name":          "resourceType",
//						"type":          "String",
//						"value":         "{resourceType}",
//						"allowedValues": []interface{}{},
//						"description":   "resource type",
//					},
//					map[string]interface{}{
//						"name":          "resourceIds",
//						"type":          "ARRAY",
//						"value":         "[{\"resources\":[]}]",
//						"allowedValues": []interface{}{},
//						"description":   "Resource ID List",
//					},
//				},
//			})
//			if err != nil {
//				return err
//			}
//			json0 := string(tmpJSON0)
//			_, err = cfg.NewAggregateRemediation(ctx, "default", &cfg.AggregateRemediationArgs{
//				ConfigRuleId:            create_rule.ConfigRuleId,
//				RemediationTemplateId:   pulumi.String("ACS-TAG-TagResources"),
//				RemediationSourceType:   pulumi.String("ALIYUN"),
//				InvokeType:              pulumi.String("MANUAL_EXECUTION"),
//				RemediationType:         pulumi.String("OOS"),
//				AggregatorId:            create_agg.ID(),
//				RemediationOriginParams: pulumi.String(json0),
//			})
//			if err != nil {
//				return err
//			}
//			return nil
//		})
//	}
//
// ```
//
// ðŸ“š Need more examples? VIEW MORE EXAMPLES
//
// ## Import
//
// Cloud Config (Config) Aggregate Remediation can be imported using the id, e.g.
//
// ```sh
// $ pulumi import alicloud:cfg/aggregateRemediation:AggregateRemediation example <aggregator_id>:<remediation_id>
// ```
type AggregateRemediation struct {
	pulumi.CustomResourceState

	// The account Group ID.
	// For more information about how to obtain the account group ID, see ListAggregators.
	AggregatorId pulumi.StringOutput `pulumi:"aggregatorId"`
	// The rule ID.
	// For more information about how to obtain the rule ID, see [ListAggregateConfigRules].
	ConfigRuleId pulumi.StringOutput `pulumi:"configRuleId"`
	// Correction of execution mode. Value:
	// - NON_EXECUTION: Not executed.
	// - AUTO_EXECUTION: Automatically executed.
	// - MANUAL_EXECUTION: Execute manually.
	// - NOT_CONFIG: Not set.
	InvokeType pulumi.StringOutput `pulumi:"invokeType"`
	// Multi-account remediation ID
	RemediationId pulumi.StringOutput `pulumi:"remediationId"`
	// Correct the parameters of the settings.
	// For more information about how to obtain the parameters of remediation settings, see the parameter 'Template definition' in ListRemediationTemplates '.
	RemediationOriginParams pulumi.StringOutput `pulumi:"remediationOriginParams"`
	// The source of the template to perform the correction. Value:
	// - ALIYUN (default): Official website template.
	// - CUSTOM: CUSTOM template.
	// - NONE: NONE.
	RemediationSourceType pulumi.StringPtrOutput `pulumi:"remediationSourceType"`
	// The ID of the correction template.
	RemediationTemplateId pulumi.StringOutput `pulumi:"remediationTemplateId"`
	// Remediation type. Value:
	// - OOS: Operation and maintenance orchestration (Template correction).
	// - FC: Function Compute (custom correction).
	RemediationType pulumi.StringOutput `pulumi:"remediationType"`
}

// NewAggregateRemediation registers a new resource with the given unique name, arguments, and options.
func NewAggregateRemediation(ctx *pulumi.Context,
	name string, args *AggregateRemediationArgs, opts ...pulumi.ResourceOption) (*AggregateRemediation, error) {
	if args == nil {
		return nil, errors.New("missing one or more required arguments")
	}

	if args.AggregatorId == nil {
		return nil, errors.New("invalid value for required argument 'AggregatorId'")
	}
	if args.ConfigRuleId == nil {
		return nil, errors.New("invalid value for required argument 'ConfigRuleId'")
	}
	if args.InvokeType == nil {
		return nil, errors.New("invalid value for required argument 'InvokeType'")
	}
	if args.RemediationOriginParams == nil {
		return nil, errors.New("invalid value for required argument 'RemediationOriginParams'")
	}
	if args.RemediationTemplateId == nil {
		return nil, errors.New("invalid value for required argument 'RemediationTemplateId'")
	}
	if args.RemediationType == nil {
		return nil, errors.New("invalid value for required argument 'RemediationType'")
	}
	aliases := pulumi.Aliases([]pulumi.Alias{
		{
			Type: pulumi.String("alicloud:configaggregate/remediation:Remediation"),
		},
	})
	opts = append(opts, aliases)
	opts = internal.PkgResourceDefaultOpts(opts)
	var resource AggregateRemediation
	err := ctx.RegisterResource("alicloud:cfg/aggregateRemediation:AggregateRemediation", name, args, &resource, opts...)
	if err != nil {
		return nil, err
	}
	return &resource, nil
}

// GetAggregateRemediation gets an existing AggregateRemediation resource's state with the given name, ID, and optional
// state properties that are used to uniquely qualify the lookup (nil if not required).
func GetAggregateRemediation(ctx *pulumi.Context,
	name string, id pulumi.IDInput, state *AggregateRemediationState, opts ...pulumi.ResourceOption) (*AggregateRemediation, error) {
	var resource AggregateRemediation
	err := ctx.ReadResource("alicloud:cfg/aggregateRemediation:AggregateRemediation", name, id, state, &resource, opts...)
	if err != nil {
		return nil, err
	}
	return &resource, nil
}

// Input properties used for looking up and filtering AggregateRemediation resources.
type aggregateRemediationState struct {
	// The account Group ID.
	// For more information about how to obtain the account group ID, see ListAggregators.
	AggregatorId *string `pulumi:"aggregatorId"`
	// The rule ID.
	// For more information about how to obtain the rule ID, see [ListAggregateConfigRules].
	ConfigRuleId *string `pulumi:"configRuleId"`
	// Correction of execution mode. Value:
	// - NON_EXECUTION: Not executed.
	// - AUTO_EXECUTION: Automatically executed.
	// - MANUAL_EXECUTION: Execute manually.
	// - NOT_CONFIG: Not set.
	InvokeType *string `pulumi:"invokeType"`
	// Multi-account remediation ID
	RemediationId *string `pulumi:"remediationId"`
	// Correct the parameters of the settings.
	// For more information about how to obtain the parameters of remediation settings, see the parameter 'Template definition' in ListRemediationTemplates '.
	RemediationOriginParams *string `pulumi:"remediationOriginParams"`
	// The source of the template to perform the correction. Value:
	// - ALIYUN (default): Official website template.
	// - CUSTOM: CUSTOM template.
	// - NONE: NONE.
	RemediationSourceType *string `pulumi:"remediationSourceType"`
	// The ID of the correction template.
	RemediationTemplateId *string `pulumi:"remediationTemplateId"`
	// Remediation type. Value:
	// - OOS: Operation and maintenance orchestration (Template correction).
	// - FC: Function Compute (custom correction).
	RemediationType *string `pulumi:"remediationType"`
}

type AggregateRemediationState struct {
	// The account Group ID.
	// For more information about how to obtain the account group ID, see ListAggregators.
	AggregatorId pulumi.StringPtrInput
	// The rule ID.
	// For more information about how to obtain the rule ID, see [ListAggregateConfigRules].
	ConfigRuleId pulumi.StringPtrInput
	// Correction of execution mode. Value:
	// - NON_EXECUTION: Not executed.
	// - AUTO_EXECUTION: Automatically executed.
	// - MANUAL_EXECUTION: Execute manually.
	// - NOT_CONFIG: Not set.
	InvokeType pulumi.StringPtrInput
	// Multi-account remediation ID
	RemediationId pulumi.StringPtrInput
	// Correct the parameters of the settings.
	// For more information about how to obtain the parameters of remediation settings, see the parameter 'Template definition' in ListRemediationTemplates '.
	RemediationOriginParams pulumi.StringPtrInput
	// The source of the template to perform the correction. Value:
	// - ALIYUN (default): Official website template.
	// - CUSTOM: CUSTOM template.
	// - NONE: NONE.
	RemediationSourceType pulumi.StringPtrInput
	// The ID of the correction template.
	RemediationTemplateId pulumi.StringPtrInput
	// Remediation type. Value:
	// - OOS: Operation and maintenance orchestration (Template correction).
	// - FC: Function Compute (custom correction).
	RemediationType pulumi.StringPtrInput
}

func (AggregateRemediationState) ElementType() reflect.Type {
	return reflect.TypeOf((*aggregateRemediationState)(nil)).Elem()
}

type aggregateRemediationArgs struct {
	// The account Group ID.
	// For more information about how to obtain the account group ID, see ListAggregators.
	AggregatorId string `pulumi:"aggregatorId"`
	// The rule ID.
	// For more information about how to obtain the rule ID, see [ListAggregateConfigRules].
	ConfigRuleId string `pulumi:"configRuleId"`
	// Correction of execution mode. Value:
	// - NON_EXECUTION: Not executed.
	// - AUTO_EXECUTION: Automatically executed.
	// - MANUAL_EXECUTION: Execute manually.
	// - NOT_CONFIG: Not set.
	InvokeType string `pulumi:"invokeType"`
	// Correct the parameters of the settings.
	// For more information about how to obtain the parameters of remediation settings, see the parameter 'Template definition' in ListRemediationTemplates '.
	RemediationOriginParams string `pulumi:"remediationOriginParams"`
	// The source of the template to perform the correction. Value:
	// - ALIYUN (default): Official website template.
	// - CUSTOM: CUSTOM template.
	// - NONE: NONE.
	RemediationSourceType *string `pulumi:"remediationSourceType"`
	// The ID of the correction template.
	RemediationTemplateId string `pulumi:"remediationTemplateId"`
	// Remediation type. Value:
	// - OOS: Operation and maintenance orchestration (Template correction).
	// - FC: Function Compute (custom correction).
	RemediationType string `pulumi:"remediationType"`
}

// The set of arguments for constructing a AggregateRemediation resource.
type AggregateRemediationArgs struct {
	// The account Group ID.
	// For more information about how to obtain the account group ID, see ListAggregators.
	AggregatorId pulumi.StringInput
	// The rule ID.
	// For more information about how to obtain the rule ID, see [ListAggregateConfigRules].
	ConfigRuleId pulumi.StringInput
	// Correction of execution mode. Value:
	// - NON_EXECUTION: Not executed.
	// - AUTO_EXECUTION: Automatically executed.
	// - MANUAL_EXECUTION: Execute manually.
	// - NOT_CONFIG: Not set.
	InvokeType pulumi.StringInput
	// Correct the parameters of the settings.
	// For more information about how to obtain the parameters of remediation settings, see the parameter 'Template definition' in ListRemediationTemplates '.
	RemediationOriginParams pulumi.StringInput
	// The source of the template to perform the correction. Value:
	// - ALIYUN (default): Official website template.
	// - CUSTOM: CUSTOM template.
	// - NONE: NONE.
	RemediationSourceType pulumi.StringPtrInput
	// The ID of the correction template.
	RemediationTemplateId pulumi.StringInput
	// Remediation type. Value:
	// - OOS: Operation and maintenance orchestration (Template correction).
	// - FC: Function Compute (custom correction).
	RemediationType pulumi.StringInput
}

func (AggregateRemediationArgs) ElementType() reflect.Type {
	return reflect.TypeOf((*aggregateRemediationArgs)(nil)).Elem()
}

type AggregateRemediationInput interface {
	pulumi.Input

	ToAggregateRemediationOutput() AggregateRemediationOutput
	ToAggregateRemediationOutputWithContext(ctx context.Context) AggregateRemediationOutput
}

func (*AggregateRemediation) ElementType() reflect.Type {
	return reflect.TypeOf((**AggregateRemediation)(nil)).Elem()
}

func (i *AggregateRemediation) ToAggregateRemediationOutput() AggregateRemediationOutput {
	return i.ToAggregateRemediationOutputWithContext(context.Background())
}

func (i *AggregateRemediation) ToAggregateRemediationOutputWithContext(ctx context.Context) AggregateRemediationOutput {
	return pulumi.ToOutputWithContext(ctx, i).(AggregateRemediationOutput)
}

// AggregateRemediationArrayInput is an input type that accepts AggregateRemediationArray and AggregateRemediationArrayOutput values.
// You can construct a concrete instance of `AggregateRemediationArrayInput` via:
//
//	AggregateRemediationArray{ AggregateRemediationArgs{...} }
type AggregateRemediationArrayInput interface {
	pulumi.Input

	ToAggregateRemediationArrayOutput() AggregateRemediationArrayOutput
	ToAggregateRemediationArrayOutputWithContext(context.Context) AggregateRemediationArrayOutput
}

type AggregateRemediationArray []AggregateRemediationInput

func (AggregateRemediationArray) ElementType() reflect.Type {
	return reflect.TypeOf((*[]*AggregateRemediation)(nil)).Elem()
}

func (i AggregateRemediationArray) ToAggregateRemediationArrayOutput() AggregateRemediationArrayOutput {
	return i.ToAggregateRemediationArrayOutputWithContext(context.Background())
}

func (i AggregateRemediationArray) ToAggregateRemediationArrayOutputWithContext(ctx context.Context) AggregateRemediationArrayOutput {
	return pulumi.ToOutputWithContext(ctx, i).(AggregateRemediationArrayOutput)
}

// AggregateRemediationMapInput is an input type that accepts AggregateRemediationMap and AggregateRemediationMapOutput values.
// You can construct a concrete instance of `AggregateRemediationMapInput` via:
//
//	AggregateRemediationMap{ "key": AggregateRemediationArgs{...} }
type AggregateRemediationMapInput interface {
	pulumi.Input

	ToAggregateRemediationMapOutput() AggregateRemediationMapOutput
	ToAggregateRemediationMapOutputWithContext(context.Context) AggregateRemediationMapOutput
}

type AggregateRemediationMap map[string]AggregateRemediationInput

func (AggregateRemediationMap) ElementType() reflect.Type {
	return reflect.TypeOf((*map[string]*AggregateRemediation)(nil)).Elem()
}

func (i AggregateRemediationMap) ToAggregateRemediationMapOutput() AggregateRemediationMapOutput {
	return i.ToAggregateRemediationMapOutputWithContext(context.Background())
}

func (i AggregateRemediationMap) ToAggregateRemediationMapOutputWithContext(ctx context.Context) AggregateRemediationMapOutput {
	return pulumi.ToOutputWithContext(ctx, i).(AggregateRemediationMapOutput)
}

type AggregateRemediationOutput struct{ *pulumi.OutputState }

func (AggregateRemediationOutput) ElementType() reflect.Type {
	return reflect.TypeOf((**AggregateRemediation)(nil)).Elem()
}

func (o AggregateRemediationOutput) ToAggregateRemediationOutput() AggregateRemediationOutput {
	return o
}

func (o AggregateRemediationOutput) ToAggregateRemediationOutputWithContext(ctx context.Context) AggregateRemediationOutput {
	return o
}

// The account Group ID.
// For more information about how to obtain the account group ID, see ListAggregators.
func (o AggregateRemediationOutput) AggregatorId() pulumi.StringOutput {
	return o.ApplyT(func(v *AggregateRemediation) pulumi.StringOutput { return v.AggregatorId }).(pulumi.StringOutput)
}

// The rule ID.
// For more information about how to obtain the rule ID, see [ListAggregateConfigRules].
func (o AggregateRemediationOutput) ConfigRuleId() pulumi.StringOutput {
	return o.ApplyT(func(v *AggregateRemediation) pulumi.StringOutput { return v.ConfigRuleId }).(pulumi.StringOutput)
}

// Correction of execution mode. Value:
// - NON_EXECUTION: Not executed.
// - AUTO_EXECUTION: Automatically executed.
// - MANUAL_EXECUTION: Execute manually.
// - NOT_CONFIG: Not set.
func (o AggregateRemediationOutput) InvokeType() pulumi.StringOutput {
	return o.ApplyT(func(v *AggregateRemediation) pulumi.StringOutput { return v.InvokeType }).(pulumi.StringOutput)
}

// Multi-account remediation ID
func (o AggregateRemediationOutput) RemediationId() pulumi.StringOutput {
	return o.ApplyT(func(v *AggregateRemediation) pulumi.StringOutput { return v.RemediationId }).(pulumi.StringOutput)
}

// Correct the parameters of the settings.
// For more information about how to obtain the parameters of remediation settings, see the parameter 'Template definition' in ListRemediationTemplates '.
func (o AggregateRemediationOutput) RemediationOriginParams() pulumi.StringOutput {
	return o.ApplyT(func(v *AggregateRemediation) pulumi.StringOutput { return v.RemediationOriginParams }).(pulumi.StringOutput)
}

// The source of the template to perform the correction. Value:
// - ALIYUN (default): Official website template.
// - CUSTOM: CUSTOM template.
// - NONE: NONE.
func (o AggregateRemediationOutput) RemediationSourceType() pulumi.StringPtrOutput {
	return o.ApplyT(func(v *AggregateRemediation) pulumi.StringPtrOutput { return v.RemediationSourceType }).(pulumi.StringPtrOutput)
}

// The ID of the correction template.
func (o AggregateRemediationOutput) RemediationTemplateId() pulumi.StringOutput {
	return o.ApplyT(func(v *AggregateRemediation) pulumi.StringOutput { return v.RemediationTemplateId }).(pulumi.StringOutput)
}

// Remediation type. Value:
// - OOS: Operation and maintenance orchestration (Template correction).
// - FC: Function Compute (custom correction).
func (o AggregateRemediationOutput) RemediationType() pulumi.StringOutput {
	return o.ApplyT(func(v *AggregateRemediation) pulumi.StringOutput { return v.RemediationType }).(pulumi.StringOutput)
}

type AggregateRemediationArrayOutput struct{ *pulumi.OutputState }

func (AggregateRemediationArrayOutput) ElementType() reflect.Type {
	return reflect.TypeOf((*[]*AggregateRemediation)(nil)).Elem()
}

func (o AggregateRemediationArrayOutput) ToAggregateRemediationArrayOutput() AggregateRemediationArrayOutput {
	return o
}

func (o AggregateRemediationArrayOutput) ToAggregateRemediationArrayOutputWithContext(ctx context.Context) AggregateRemediationArrayOutput {
	return o
}

func (o AggregateRemediationArrayOutput) Index(i pulumi.IntInput) AggregateRemediationOutput {
	return pulumi.All(o, i).ApplyT(func(vs []interface{}) *AggregateRemediation {
		return vs[0].([]*AggregateRemediation)[vs[1].(int)]
	}).(AggregateRemediationOutput)
}

type AggregateRemediationMapOutput struct{ *pulumi.OutputState }

func (AggregateRemediationMapOutput) ElementType() reflect.Type {
	return reflect.TypeOf((*map[string]*AggregateRemediation)(nil)).Elem()
}

func (o AggregateRemediationMapOutput) ToAggregateRemediationMapOutput() AggregateRemediationMapOutput {
	return o
}

func (o AggregateRemediationMapOutput) ToAggregateRemediationMapOutputWithContext(ctx context.Context) AggregateRemediationMapOutput {
	return o
}

func (o AggregateRemediationMapOutput) MapIndex(k pulumi.StringInput) AggregateRemediationOutput {
	return pulumi.All(o, k).ApplyT(func(vs []interface{}) *AggregateRemediation {
		return vs[0].(map[string]*AggregateRemediation)[vs[1].(string)]
	}).(AggregateRemediationOutput)
}

func init() {
	pulumi.RegisterInputType(reflect.TypeOf((*AggregateRemediationInput)(nil)).Elem(), &AggregateRemediation{})
	pulumi.RegisterInputType(reflect.TypeOf((*AggregateRemediationArrayInput)(nil)).Elem(), AggregateRemediationArray{})
	pulumi.RegisterInputType(reflect.TypeOf((*AggregateRemediationMapInput)(nil)).Elem(), AggregateRemediationMap{})
	pulumi.RegisterOutputType(AggregateRemediationOutput{})
	pulumi.RegisterOutputType(AggregateRemediationArrayOutput{})
	pulumi.RegisterOutputType(AggregateRemediationMapOutput{})
}
