// Code generated by pulumi-language-go DO NOT EDIT.
// *** WARNING: Do not edit by hand unless you're certain you know what you are doing! ***

package configaggregate

import (
	"context"
	"reflect"

	"errors"
	"github.com/pulumi/pulumi-alicloud/sdk/v3/go/alicloud/internal"
	"github.com/pulumi/pulumi/sdk/v3/go/pulumi"
)

// Provides a Cloud Config (Config) Aggregate Remediation resource.
//
// Rule remediation in multi-account scenarios.
//
// For information about Cloud Config (Config) Aggregate Remediation and how to use it, see [What is Aggregate Remediation](https://next.api.alibabacloud.com/document/Config/2020-09-07/CreateAggregateRemediation).
//
// > **NOTE:** Available since v1.267.0.
//
// ## Example Usage
//
// # Basic Usage
//
// ```go
// package main
//
// import (
//
//	"encoding/json"
//
//	"github.com/pulumi/pulumi-alicloud/sdk/v3/go/alicloud/cfg"
//	"github.com/pulumi/pulumi/sdk/v3/go/pulumi"
//	"github.com/pulumi/pulumi/sdk/v3/go/pulumi/config"
//
// )
//
//	func main() {
//		pulumi.Run(func(ctx *pulumi.Context) error {
//			cfg := config.New(ctx, "")
//			name := "terraform-example"
//			if param := cfg.Get("name"); param != "" {
//				name = param
//			}
//			create_agg, err := cfg.NewAggregator(ctx, "create-agg", &cfg.AggregatorArgs{
//				AggregatorName: pulumi.String("rd"),
//				Description:    pulumi.String("rd"),
//				AggregatorType: pulumi.String("RD"),
//			})
//			if err != nil {
//				return err
//			}
//			create_rule, err := cfg.NewAggregateConfigRule(ctx, "create-rule", &cfg.AggregateConfigRuleArgs{
//				SourceOwner:             pulumi.String("ALIYUN"),
//				SourceIdentifier:        pulumi.String("required-tags"),
//				AggregateConfigRuleName: pulumi.String("agg-rule-name"),
//				ConfigRuleTriggerTypes:  pulumi.String("ConfigurationItemChangeNotification"),
//				RiskLevel:               pulumi.Int(1),
//				ResourceTypesScopes: pulumi.StringArray{
//					pulumi.String("ACS::OSS::Bucket"),
//				},
//				AggregatorId: create_agg.ID(),
//				InputParameters: pulumi.StringMap{
//					"tag1Key":   pulumi.String("aaa"),
//					"tag1Value": pulumi.String("bbb"),
//				},
//			})
//			if err != nil {
//				return err
//			}
//			tmpJSON0, err := json.Marshal(map[string]interface{}{
//				"properties": []map[string]interface{}{
//					map[string]interface{}{
//						"name":          "regionId",
//						"type":          "String",
//						"value":         "{regionId}",
//						"allowedValues": []interface{}{},
//						"description":   "region ID",
//					},
//					map[string]interface{}{
//						"name":          "tags",
//						"type":          "Json",
//						"value":         "{\"aaa\":\"bbb\"}",
//						"allowedValues": []interface{}{},
//						"description":   "resource tags (for example,{\"k1\":\"v1\",\"k2\":\"v2\"}).",
//					},
//					map[string]interface{}{
//						"name":          "resourceType",
//						"type":          "String",
//						"value":         "{resourceType}",
//						"allowedValues": []interface{}{},
//						"description":   "resource type",
//					},
//					map[string]interface{}{
//						"name":          "resourceIds",
//						"type":          "ARRAY",
//						"value":         "[{\"resources\":[]}]",
//						"allowedValues": []interface{}{},
//						"description":   "Resource ID List",
//					},
//				},
//			})
//			if err != nil {
//				return err
//			}
//			json0 := string(tmpJSON0)
//			_, err = cfg.NewAggregateRemediation(ctx, "default", &cfg.AggregateRemediationArgs{
//				ConfigRuleId:            create_rule.ConfigRuleId,
//				RemediationTemplateId:   pulumi.String("ACS-TAG-TagResources"),
//				RemediationSourceType:   pulumi.String("ALIYUN"),
//				InvokeType:              pulumi.String("MANUAL_EXECUTION"),
//				RemediationType:         pulumi.String("OOS"),
//				AggregatorId:            create_agg.ID(),
//				RemediationOriginParams: pulumi.String(json0),
//			})
//			if err != nil {
//				return err
//			}
//			return nil
//		})
//	}
//
// ```
//
// ðŸ“š Need more examples? VIEW MORE EXAMPLES
//
// ## Import
//
// Cloud Config (Config) Aggregate Remediation can be imported using the id, e.g.
//
// ```sh
// $ pulumi import alicloud:configaggregate/remediation:Remediation example <aggregator_id>:<remediation_id>
// ```
//
// Deprecated: alicloud.configaggregate/remediation.Remediation has been deprecated in favor of alicloud.cfg/aggregateremediation.AggregateRemediation
type Remediation struct {
	pulumi.CustomResourceState

	// The account Group ID.
	// For more information about how to obtain the account group ID, see ListAggregators.
	AggregatorId pulumi.StringOutput `pulumi:"aggregatorId"`
	// The rule ID.
	// For more information about how to obtain the rule ID, see [ListAggregateConfigRules].
	ConfigRuleId pulumi.StringOutput `pulumi:"configRuleId"`
	// Correction of execution mode. Value:
	// - NON_EXECUTION: Not executed.
	// - AUTO_EXECUTION: Automatically executed.
	// - MANUAL_EXECUTION: Execute manually.
	// - NOT_CONFIG: Not set.
	InvokeType pulumi.StringOutput `pulumi:"invokeType"`
	// Multi-account remediation ID
	RemediationId pulumi.StringOutput `pulumi:"remediationId"`
	// Correct the parameters of the settings.
	// For more information about how to obtain the parameters of remediation settings, see the parameter 'Template definition' in ListRemediationTemplates '.
	RemediationOriginParams pulumi.StringOutput `pulumi:"remediationOriginParams"`
	// The source of the template to perform the correction. Value:
	// - ALIYUN (default): Official website template.
	// - CUSTOM: CUSTOM template.
	// - NONE: NONE.
	RemediationSourceType pulumi.StringPtrOutput `pulumi:"remediationSourceType"`
	// The ID of the correction template.
	RemediationTemplateId pulumi.StringOutput `pulumi:"remediationTemplateId"`
	// Remediation type. Value:
	// - OOS: Operation and maintenance orchestration (Template correction).
	// - FC: Function Compute (custom correction).
	RemediationType pulumi.StringOutput `pulumi:"remediationType"`
}

// NewRemediation registers a new resource with the given unique name, arguments, and options.
func NewRemediation(ctx *pulumi.Context,
	name string, args *RemediationArgs, opts ...pulumi.ResourceOption) (*Remediation, error) {
	if args == nil {
		return nil, errors.New("missing one or more required arguments")
	}

	if args.AggregatorId == nil {
		return nil, errors.New("invalid value for required argument 'AggregatorId'")
	}
	if args.ConfigRuleId == nil {
		return nil, errors.New("invalid value for required argument 'ConfigRuleId'")
	}
	if args.InvokeType == nil {
		return nil, errors.New("invalid value for required argument 'InvokeType'")
	}
	if args.RemediationOriginParams == nil {
		return nil, errors.New("invalid value for required argument 'RemediationOriginParams'")
	}
	if args.RemediationTemplateId == nil {
		return nil, errors.New("invalid value for required argument 'RemediationTemplateId'")
	}
	if args.RemediationType == nil {
		return nil, errors.New("invalid value for required argument 'RemediationType'")
	}
	opts = internal.PkgResourceDefaultOpts(opts)
	var resource Remediation
	err := ctx.RegisterResource("alicloud:configaggregate/remediation:Remediation", name, args, &resource, opts...)
	if err != nil {
		return nil, err
	}
	return &resource, nil
}

// GetRemediation gets an existing Remediation resource's state with the given name, ID, and optional
// state properties that are used to uniquely qualify the lookup (nil if not required).
func GetRemediation(ctx *pulumi.Context,
	name string, id pulumi.IDInput, state *RemediationState, opts ...pulumi.ResourceOption) (*Remediation, error) {
	var resource Remediation
	err := ctx.ReadResource("alicloud:configaggregate/remediation:Remediation", name, id, state, &resource, opts...)
	if err != nil {
		return nil, err
	}
	return &resource, nil
}

// Input properties used for looking up and filtering Remediation resources.
type remediationState struct {
	// The account Group ID.
	// For more information about how to obtain the account group ID, see ListAggregators.
	AggregatorId *string `pulumi:"aggregatorId"`
	// The rule ID.
	// For more information about how to obtain the rule ID, see [ListAggregateConfigRules].
	ConfigRuleId *string `pulumi:"configRuleId"`
	// Correction of execution mode. Value:
	// - NON_EXECUTION: Not executed.
	// - AUTO_EXECUTION: Automatically executed.
	// - MANUAL_EXECUTION: Execute manually.
	// - NOT_CONFIG: Not set.
	InvokeType *string `pulumi:"invokeType"`
	// Multi-account remediation ID
	RemediationId *string `pulumi:"remediationId"`
	// Correct the parameters of the settings.
	// For more information about how to obtain the parameters of remediation settings, see the parameter 'Template definition' in ListRemediationTemplates '.
	RemediationOriginParams *string `pulumi:"remediationOriginParams"`
	// The source of the template to perform the correction. Value:
	// - ALIYUN (default): Official website template.
	// - CUSTOM: CUSTOM template.
	// - NONE: NONE.
	RemediationSourceType *string `pulumi:"remediationSourceType"`
	// The ID of the correction template.
	RemediationTemplateId *string `pulumi:"remediationTemplateId"`
	// Remediation type. Value:
	// - OOS: Operation and maintenance orchestration (Template correction).
	// - FC: Function Compute (custom correction).
	RemediationType *string `pulumi:"remediationType"`
}

type RemediationState struct {
	// The account Group ID.
	// For more information about how to obtain the account group ID, see ListAggregators.
	AggregatorId pulumi.StringPtrInput
	// The rule ID.
	// For more information about how to obtain the rule ID, see [ListAggregateConfigRules].
	ConfigRuleId pulumi.StringPtrInput
	// Correction of execution mode. Value:
	// - NON_EXECUTION: Not executed.
	// - AUTO_EXECUTION: Automatically executed.
	// - MANUAL_EXECUTION: Execute manually.
	// - NOT_CONFIG: Not set.
	InvokeType pulumi.StringPtrInput
	// Multi-account remediation ID
	RemediationId pulumi.StringPtrInput
	// Correct the parameters of the settings.
	// For more information about how to obtain the parameters of remediation settings, see the parameter 'Template definition' in ListRemediationTemplates '.
	RemediationOriginParams pulumi.StringPtrInput
	// The source of the template to perform the correction. Value:
	// - ALIYUN (default): Official website template.
	// - CUSTOM: CUSTOM template.
	// - NONE: NONE.
	RemediationSourceType pulumi.StringPtrInput
	// The ID of the correction template.
	RemediationTemplateId pulumi.StringPtrInput
	// Remediation type. Value:
	// - OOS: Operation and maintenance orchestration (Template correction).
	// - FC: Function Compute (custom correction).
	RemediationType pulumi.StringPtrInput
}

func (RemediationState) ElementType() reflect.Type {
	return reflect.TypeOf((*remediationState)(nil)).Elem()
}

type remediationArgs struct {
	// The account Group ID.
	// For more information about how to obtain the account group ID, see ListAggregators.
	AggregatorId string `pulumi:"aggregatorId"`
	// The rule ID.
	// For more information about how to obtain the rule ID, see [ListAggregateConfigRules].
	ConfigRuleId string `pulumi:"configRuleId"`
	// Correction of execution mode. Value:
	// - NON_EXECUTION: Not executed.
	// - AUTO_EXECUTION: Automatically executed.
	// - MANUAL_EXECUTION: Execute manually.
	// - NOT_CONFIG: Not set.
	InvokeType string `pulumi:"invokeType"`
	// Correct the parameters of the settings.
	// For more information about how to obtain the parameters of remediation settings, see the parameter 'Template definition' in ListRemediationTemplates '.
	RemediationOriginParams string `pulumi:"remediationOriginParams"`
	// The source of the template to perform the correction. Value:
	// - ALIYUN (default): Official website template.
	// - CUSTOM: CUSTOM template.
	// - NONE: NONE.
	RemediationSourceType *string `pulumi:"remediationSourceType"`
	// The ID of the correction template.
	RemediationTemplateId string `pulumi:"remediationTemplateId"`
	// Remediation type. Value:
	// - OOS: Operation and maintenance orchestration (Template correction).
	// - FC: Function Compute (custom correction).
	RemediationType string `pulumi:"remediationType"`
}

// The set of arguments for constructing a Remediation resource.
type RemediationArgs struct {
	// The account Group ID.
	// For more information about how to obtain the account group ID, see ListAggregators.
	AggregatorId pulumi.StringInput
	// The rule ID.
	// For more information about how to obtain the rule ID, see [ListAggregateConfigRules].
	ConfigRuleId pulumi.StringInput
	// Correction of execution mode. Value:
	// - NON_EXECUTION: Not executed.
	// - AUTO_EXECUTION: Automatically executed.
	// - MANUAL_EXECUTION: Execute manually.
	// - NOT_CONFIG: Not set.
	InvokeType pulumi.StringInput
	// Correct the parameters of the settings.
	// For more information about how to obtain the parameters of remediation settings, see the parameter 'Template definition' in ListRemediationTemplates '.
	RemediationOriginParams pulumi.StringInput
	// The source of the template to perform the correction. Value:
	// - ALIYUN (default): Official website template.
	// - CUSTOM: CUSTOM template.
	// - NONE: NONE.
	RemediationSourceType pulumi.StringPtrInput
	// The ID of the correction template.
	RemediationTemplateId pulumi.StringInput
	// Remediation type. Value:
	// - OOS: Operation and maintenance orchestration (Template correction).
	// - FC: Function Compute (custom correction).
	RemediationType pulumi.StringInput
}

func (RemediationArgs) ElementType() reflect.Type {
	return reflect.TypeOf((*remediationArgs)(nil)).Elem()
}

type RemediationInput interface {
	pulumi.Input

	ToRemediationOutput() RemediationOutput
	ToRemediationOutputWithContext(ctx context.Context) RemediationOutput
}

func (*Remediation) ElementType() reflect.Type {
	return reflect.TypeOf((**Remediation)(nil)).Elem()
}

func (i *Remediation) ToRemediationOutput() RemediationOutput {
	return i.ToRemediationOutputWithContext(context.Background())
}

func (i *Remediation) ToRemediationOutputWithContext(ctx context.Context) RemediationOutput {
	return pulumi.ToOutputWithContext(ctx, i).(RemediationOutput)
}

// RemediationArrayInput is an input type that accepts RemediationArray and RemediationArrayOutput values.
// You can construct a concrete instance of `RemediationArrayInput` via:
//
//	RemediationArray{ RemediationArgs{...} }
type RemediationArrayInput interface {
	pulumi.Input

	ToRemediationArrayOutput() RemediationArrayOutput
	ToRemediationArrayOutputWithContext(context.Context) RemediationArrayOutput
}

type RemediationArray []RemediationInput

func (RemediationArray) ElementType() reflect.Type {
	return reflect.TypeOf((*[]*Remediation)(nil)).Elem()
}

func (i RemediationArray) ToRemediationArrayOutput() RemediationArrayOutput {
	return i.ToRemediationArrayOutputWithContext(context.Background())
}

func (i RemediationArray) ToRemediationArrayOutputWithContext(ctx context.Context) RemediationArrayOutput {
	return pulumi.ToOutputWithContext(ctx, i).(RemediationArrayOutput)
}

// RemediationMapInput is an input type that accepts RemediationMap and RemediationMapOutput values.
// You can construct a concrete instance of `RemediationMapInput` via:
//
//	RemediationMap{ "key": RemediationArgs{...} }
type RemediationMapInput interface {
	pulumi.Input

	ToRemediationMapOutput() RemediationMapOutput
	ToRemediationMapOutputWithContext(context.Context) RemediationMapOutput
}

type RemediationMap map[string]RemediationInput

func (RemediationMap) ElementType() reflect.Type {
	return reflect.TypeOf((*map[string]*Remediation)(nil)).Elem()
}

func (i RemediationMap) ToRemediationMapOutput() RemediationMapOutput {
	return i.ToRemediationMapOutputWithContext(context.Background())
}

func (i RemediationMap) ToRemediationMapOutputWithContext(ctx context.Context) RemediationMapOutput {
	return pulumi.ToOutputWithContext(ctx, i).(RemediationMapOutput)
}

type RemediationOutput struct{ *pulumi.OutputState }

func (RemediationOutput) ElementType() reflect.Type {
	return reflect.TypeOf((**Remediation)(nil)).Elem()
}

func (o RemediationOutput) ToRemediationOutput() RemediationOutput {
	return o
}

func (o RemediationOutput) ToRemediationOutputWithContext(ctx context.Context) RemediationOutput {
	return o
}

// The account Group ID.
// For more information about how to obtain the account group ID, see ListAggregators.
func (o RemediationOutput) AggregatorId() pulumi.StringOutput {
	return o.ApplyT(func(v *Remediation) pulumi.StringOutput { return v.AggregatorId }).(pulumi.StringOutput)
}

// The rule ID.
// For more information about how to obtain the rule ID, see [ListAggregateConfigRules].
func (o RemediationOutput) ConfigRuleId() pulumi.StringOutput {
	return o.ApplyT(func(v *Remediation) pulumi.StringOutput { return v.ConfigRuleId }).(pulumi.StringOutput)
}

// Correction of execution mode. Value:
// - NON_EXECUTION: Not executed.
// - AUTO_EXECUTION: Automatically executed.
// - MANUAL_EXECUTION: Execute manually.
// - NOT_CONFIG: Not set.
func (o RemediationOutput) InvokeType() pulumi.StringOutput {
	return o.ApplyT(func(v *Remediation) pulumi.StringOutput { return v.InvokeType }).(pulumi.StringOutput)
}

// Multi-account remediation ID
func (o RemediationOutput) RemediationId() pulumi.StringOutput {
	return o.ApplyT(func(v *Remediation) pulumi.StringOutput { return v.RemediationId }).(pulumi.StringOutput)
}

// Correct the parameters of the settings.
// For more information about how to obtain the parameters of remediation settings, see the parameter 'Template definition' in ListRemediationTemplates '.
func (o RemediationOutput) RemediationOriginParams() pulumi.StringOutput {
	return o.ApplyT(func(v *Remediation) pulumi.StringOutput { return v.RemediationOriginParams }).(pulumi.StringOutput)
}

// The source of the template to perform the correction. Value:
// - ALIYUN (default): Official website template.
// - CUSTOM: CUSTOM template.
// - NONE: NONE.
func (o RemediationOutput) RemediationSourceType() pulumi.StringPtrOutput {
	return o.ApplyT(func(v *Remediation) pulumi.StringPtrOutput { return v.RemediationSourceType }).(pulumi.StringPtrOutput)
}

// The ID of the correction template.
func (o RemediationOutput) RemediationTemplateId() pulumi.StringOutput {
	return o.ApplyT(func(v *Remediation) pulumi.StringOutput { return v.RemediationTemplateId }).(pulumi.StringOutput)
}

// Remediation type. Value:
// - OOS: Operation and maintenance orchestration (Template correction).
// - FC: Function Compute (custom correction).
func (o RemediationOutput) RemediationType() pulumi.StringOutput {
	return o.ApplyT(func(v *Remediation) pulumi.StringOutput { return v.RemediationType }).(pulumi.StringOutput)
}

type RemediationArrayOutput struct{ *pulumi.OutputState }

func (RemediationArrayOutput) ElementType() reflect.Type {
	return reflect.TypeOf((*[]*Remediation)(nil)).Elem()
}

func (o RemediationArrayOutput) ToRemediationArrayOutput() RemediationArrayOutput {
	return o
}

func (o RemediationArrayOutput) ToRemediationArrayOutputWithContext(ctx context.Context) RemediationArrayOutput {
	return o
}

func (o RemediationArrayOutput) Index(i pulumi.IntInput) RemediationOutput {
	return pulumi.All(o, i).ApplyT(func(vs []interface{}) *Remediation {
		return vs[0].([]*Remediation)[vs[1].(int)]
	}).(RemediationOutput)
}

type RemediationMapOutput struct{ *pulumi.OutputState }

func (RemediationMapOutput) ElementType() reflect.Type {
	return reflect.TypeOf((*map[string]*Remediation)(nil)).Elem()
}

func (o RemediationMapOutput) ToRemediationMapOutput() RemediationMapOutput {
	return o
}

func (o RemediationMapOutput) ToRemediationMapOutputWithContext(ctx context.Context) RemediationMapOutput {
	return o
}

func (o RemediationMapOutput) MapIndex(k pulumi.StringInput) RemediationOutput {
	return pulumi.All(o, k).ApplyT(func(vs []interface{}) *Remediation {
		return vs[0].(map[string]*Remediation)[vs[1].(string)]
	}).(RemediationOutput)
}

func init() {
	pulumi.RegisterInputType(reflect.TypeOf((*RemediationInput)(nil)).Elem(), &Remediation{})
	pulumi.RegisterInputType(reflect.TypeOf((*RemediationArrayInput)(nil)).Elem(), RemediationArray{})
	pulumi.RegisterInputType(reflect.TypeOf((*RemediationMapInput)(nil)).Elem(), RemediationMap{})
	pulumi.RegisterOutputType(RemediationOutput{})
	pulumi.RegisterOutputType(RemediationArrayOutput{})
	pulumi.RegisterOutputType(RemediationMapOutput{})
}
