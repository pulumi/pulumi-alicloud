// Code generated by pulumi-language-go DO NOT EDIT.
// *** WARNING: Do not edit by hand unless you're certain you know what you are doing! ***

package alicloud

import (
	"context"
	"reflect"

	"errors"
	"github.com/pulumi/pulumi-alicloud/sdk/v3/go/alicloud/internal"
	"github.com/pulumi/pulumi/sdk/v3/go/pulumi"
)

// Provides a Polar Db Extension resource.
//
// For information about Polar Db Extension and how to use it, see [What is Extension](https://next.api.alibabacloud.com/document/polardb/2017-08-01/CreateExtensions).
//
// > **NOTE:** Available since v1.264.0.
//
// ## Example Usage
//
// # Basic Usage
//
// ```go
// package main
//
// import (
//
//	"github.com/pulumi/pulumi-alicloud/sdk/v3/go/alicloud"
//	"github.com/pulumi/pulumi-alicloud/sdk/v3/go/alicloud/polardb"
//	"github.com/pulumi/pulumi-alicloud/sdk/v3/go/alicloud/vpc"
//	"github.com/pulumi/pulumi/sdk/v3/go/pulumi"
//	"github.com/pulumi/pulumi/sdk/v3/go/pulumi/config"
//
// )
//
//	func main() {
//		pulumi.Run(func(ctx *pulumi.Context) error {
//			cfg := config.New(ctx, "")
//			name := "terraform-example"
//			if param := cfg.Get("name"); param != "" {
//				name = param
//			}
//			_default, err := polardb.GetNodeClasses(ctx, &polardb.GetNodeClassesArgs{
//				DbType:   pulumi.StringRef("PostgreSQL"),
//				PayType:  "PostPaid",
//				Category: pulumi.StringRef("Normal"),
//			}, nil)
//			if err != nil {
//				return err
//			}
//			defaultNetwork, err := vpc.NewNetwork(ctx, "default", &vpc.NetworkArgs{
//				VpcName:   pulumi.String("terraform-example"),
//				CidrBlock: pulumi.String("172.16.0.0/16"),
//			})
//			if err != nil {
//				return err
//			}
//			defaultSwitch, err := vpc.NewSwitch(ctx, "default", &vpc.SwitchArgs{
//				VpcId:       defaultNetwork.ID(),
//				CidrBlock:   pulumi.String("172.16.0.0/24"),
//				ZoneId:      pulumi.String(_default.Classes[0].ZoneId),
//				VswitchName: pulumi.String("terraform-example"),
//			})
//			if err != nil {
//				return err
//			}
//			dbcluster, err := polardb.NewCluster(ctx, "dbcluster", &polardb.ClusterArgs{
//				DefaultTimeZone:  pulumi.String("SYSTEM"),
//				CreationCategory: pulumi.String("Normal"),
//				ZoneId:           pulumi.String(_default.Classes[0].ZoneId),
//				CreationOption:   pulumi.String("Normal"),
//				DbVersion:        pulumi.String("14"),
//				PayType:          pulumi.String("PostPaid"),
//				DbType:           pulumi.String("PostgreSQL"),
//				DbNodeClass:      pulumi.String("polar.pg.x4.medium.c"),
//				VswitchId:        defaultSwitch.ID(),
//			})
//			if err != nil {
//				return err
//			}
//			account, err := polardb.NewAccount(ctx, "account", &polardb.AccountArgs{
//				AccountType:     pulumi.String("Normal"),
//				AccountName:     pulumi.String("nzh"),
//				AccountPassword: pulumi.String("Ali123456"),
//				DbClusterId:     dbcluster.ID(),
//			})
//			if err != nil {
//				return err
//			}
//			database, err := polardb.NewDatabase(ctx, "database", &polardb.DatabaseArgs{
//				CharacterSetName: pulumi.String("UTF8"),
//				DbDescription:    pulumi.String(name),
//				DbClusterId:      dbcluster.ID(),
//				DbName:           pulumi.String("nzh"),
//				AccountName:      account.DbClusterId,
//			})
//			if err != nil {
//				return err
//			}
//			_, err = alicloud.NewPolarDbExtension(ctx, "default", &alicloud.PolarDbExtensionArgs{
//				ExtensionName: pulumi.String("postgres_fdw"),
//				DbClusterId:   dbcluster.ID(),
//				AccountName:   account.AccountName,
//				DbName:        database.DbName,
//			})
//			if err != nil {
//				return err
//			}
//			return nil
//		})
//	}
//
// ```
//
// ðŸ“š Need more examples? VIEW MORE EXAMPLES
//
// ## Import
//
// Polar Db Extension can be imported using the id, e.g.
//
// ```sh
// $ pulumi import alicloud:index/polarDbExtension:PolarDbExtension example <db_cluster_id>:<account_name>:<db_name>:<extension_name>
// ```
type PolarDbExtension struct {
	pulumi.CustomResourceState

	// The database account name of the associated PolarDB cluster. Only support `Super` account.
	AccountName pulumi.StringOutput `pulumi:"accountName"`
	// The ID of the cluster.
	DbClusterId pulumi.StringOutput `pulumi:"dbClusterId"`
	// PolarDB cluster database name.
	DbName pulumi.StringOutput `pulumi:"dbName"`
	// Default version.
	DefaultVersion pulumi.StringOutput `pulumi:"defaultVersion"`
	// Information about the installed plug-ins under the specified database.
	ExtensionName pulumi.StringOutput `pulumi:"extensionName"`
	// Installed version, only supports upgrading to the default version.
	InstalledVersion pulumi.StringOutput `pulumi:"installedVersion"`
}

// NewPolarDbExtension registers a new resource with the given unique name, arguments, and options.
func NewPolarDbExtension(ctx *pulumi.Context,
	name string, args *PolarDbExtensionArgs, opts ...pulumi.ResourceOption) (*PolarDbExtension, error) {
	if args == nil {
		return nil, errors.New("missing one or more required arguments")
	}

	if args.AccountName == nil {
		return nil, errors.New("invalid value for required argument 'AccountName'")
	}
	if args.DbClusterId == nil {
		return nil, errors.New("invalid value for required argument 'DbClusterId'")
	}
	if args.DbName == nil {
		return nil, errors.New("invalid value for required argument 'DbName'")
	}
	if args.ExtensionName == nil {
		return nil, errors.New("invalid value for required argument 'ExtensionName'")
	}
	opts = internal.PkgResourceDefaultOpts(opts)
	var resource PolarDbExtension
	err := ctx.RegisterResource("alicloud:index/polarDbExtension:PolarDbExtension", name, args, &resource, opts...)
	if err != nil {
		return nil, err
	}
	return &resource, nil
}

// GetPolarDbExtension gets an existing PolarDbExtension resource's state with the given name, ID, and optional
// state properties that are used to uniquely qualify the lookup (nil if not required).
func GetPolarDbExtension(ctx *pulumi.Context,
	name string, id pulumi.IDInput, state *PolarDbExtensionState, opts ...pulumi.ResourceOption) (*PolarDbExtension, error) {
	var resource PolarDbExtension
	err := ctx.ReadResource("alicloud:index/polarDbExtension:PolarDbExtension", name, id, state, &resource, opts...)
	if err != nil {
		return nil, err
	}
	return &resource, nil
}

// Input properties used for looking up and filtering PolarDbExtension resources.
type polarDbExtensionState struct {
	// The database account name of the associated PolarDB cluster. Only support `Super` account.
	AccountName *string `pulumi:"accountName"`
	// The ID of the cluster.
	DbClusterId *string `pulumi:"dbClusterId"`
	// PolarDB cluster database name.
	DbName *string `pulumi:"dbName"`
	// Default version.
	DefaultVersion *string `pulumi:"defaultVersion"`
	// Information about the installed plug-ins under the specified database.
	ExtensionName *string `pulumi:"extensionName"`
	// Installed version, only supports upgrading to the default version.
	InstalledVersion *string `pulumi:"installedVersion"`
}

type PolarDbExtensionState struct {
	// The database account name of the associated PolarDB cluster. Only support `Super` account.
	AccountName pulumi.StringPtrInput
	// The ID of the cluster.
	DbClusterId pulumi.StringPtrInput
	// PolarDB cluster database name.
	DbName pulumi.StringPtrInput
	// Default version.
	DefaultVersion pulumi.StringPtrInput
	// Information about the installed plug-ins under the specified database.
	ExtensionName pulumi.StringPtrInput
	// Installed version, only supports upgrading to the default version.
	InstalledVersion pulumi.StringPtrInput
}

func (PolarDbExtensionState) ElementType() reflect.Type {
	return reflect.TypeOf((*polarDbExtensionState)(nil)).Elem()
}

type polarDbExtensionArgs struct {
	// The database account name of the associated PolarDB cluster. Only support `Super` account.
	AccountName string `pulumi:"accountName"`
	// The ID of the cluster.
	DbClusterId string `pulumi:"dbClusterId"`
	// PolarDB cluster database name.
	DbName string `pulumi:"dbName"`
	// Information about the installed plug-ins under the specified database.
	ExtensionName string `pulumi:"extensionName"`
	// Installed version, only supports upgrading to the default version.
	InstalledVersion *string `pulumi:"installedVersion"`
}

// The set of arguments for constructing a PolarDbExtension resource.
type PolarDbExtensionArgs struct {
	// The database account name of the associated PolarDB cluster. Only support `Super` account.
	AccountName pulumi.StringInput
	// The ID of the cluster.
	DbClusterId pulumi.StringInput
	// PolarDB cluster database name.
	DbName pulumi.StringInput
	// Information about the installed plug-ins under the specified database.
	ExtensionName pulumi.StringInput
	// Installed version, only supports upgrading to the default version.
	InstalledVersion pulumi.StringPtrInput
}

func (PolarDbExtensionArgs) ElementType() reflect.Type {
	return reflect.TypeOf((*polarDbExtensionArgs)(nil)).Elem()
}

type PolarDbExtensionInput interface {
	pulumi.Input

	ToPolarDbExtensionOutput() PolarDbExtensionOutput
	ToPolarDbExtensionOutputWithContext(ctx context.Context) PolarDbExtensionOutput
}

func (*PolarDbExtension) ElementType() reflect.Type {
	return reflect.TypeOf((**PolarDbExtension)(nil)).Elem()
}

func (i *PolarDbExtension) ToPolarDbExtensionOutput() PolarDbExtensionOutput {
	return i.ToPolarDbExtensionOutputWithContext(context.Background())
}

func (i *PolarDbExtension) ToPolarDbExtensionOutputWithContext(ctx context.Context) PolarDbExtensionOutput {
	return pulumi.ToOutputWithContext(ctx, i).(PolarDbExtensionOutput)
}

// PolarDbExtensionArrayInput is an input type that accepts PolarDbExtensionArray and PolarDbExtensionArrayOutput values.
// You can construct a concrete instance of `PolarDbExtensionArrayInput` via:
//
//	PolarDbExtensionArray{ PolarDbExtensionArgs{...} }
type PolarDbExtensionArrayInput interface {
	pulumi.Input

	ToPolarDbExtensionArrayOutput() PolarDbExtensionArrayOutput
	ToPolarDbExtensionArrayOutputWithContext(context.Context) PolarDbExtensionArrayOutput
}

type PolarDbExtensionArray []PolarDbExtensionInput

func (PolarDbExtensionArray) ElementType() reflect.Type {
	return reflect.TypeOf((*[]*PolarDbExtension)(nil)).Elem()
}

func (i PolarDbExtensionArray) ToPolarDbExtensionArrayOutput() PolarDbExtensionArrayOutput {
	return i.ToPolarDbExtensionArrayOutputWithContext(context.Background())
}

func (i PolarDbExtensionArray) ToPolarDbExtensionArrayOutputWithContext(ctx context.Context) PolarDbExtensionArrayOutput {
	return pulumi.ToOutputWithContext(ctx, i).(PolarDbExtensionArrayOutput)
}

// PolarDbExtensionMapInput is an input type that accepts PolarDbExtensionMap and PolarDbExtensionMapOutput values.
// You can construct a concrete instance of `PolarDbExtensionMapInput` via:
//
//	PolarDbExtensionMap{ "key": PolarDbExtensionArgs{...} }
type PolarDbExtensionMapInput interface {
	pulumi.Input

	ToPolarDbExtensionMapOutput() PolarDbExtensionMapOutput
	ToPolarDbExtensionMapOutputWithContext(context.Context) PolarDbExtensionMapOutput
}

type PolarDbExtensionMap map[string]PolarDbExtensionInput

func (PolarDbExtensionMap) ElementType() reflect.Type {
	return reflect.TypeOf((*map[string]*PolarDbExtension)(nil)).Elem()
}

func (i PolarDbExtensionMap) ToPolarDbExtensionMapOutput() PolarDbExtensionMapOutput {
	return i.ToPolarDbExtensionMapOutputWithContext(context.Background())
}

func (i PolarDbExtensionMap) ToPolarDbExtensionMapOutputWithContext(ctx context.Context) PolarDbExtensionMapOutput {
	return pulumi.ToOutputWithContext(ctx, i).(PolarDbExtensionMapOutput)
}

type PolarDbExtensionOutput struct{ *pulumi.OutputState }

func (PolarDbExtensionOutput) ElementType() reflect.Type {
	return reflect.TypeOf((**PolarDbExtension)(nil)).Elem()
}

func (o PolarDbExtensionOutput) ToPolarDbExtensionOutput() PolarDbExtensionOutput {
	return o
}

func (o PolarDbExtensionOutput) ToPolarDbExtensionOutputWithContext(ctx context.Context) PolarDbExtensionOutput {
	return o
}

// The database account name of the associated PolarDB cluster. Only support `Super` account.
func (o PolarDbExtensionOutput) AccountName() pulumi.StringOutput {
	return o.ApplyT(func(v *PolarDbExtension) pulumi.StringOutput { return v.AccountName }).(pulumi.StringOutput)
}

// The ID of the cluster.
func (o PolarDbExtensionOutput) DbClusterId() pulumi.StringOutput {
	return o.ApplyT(func(v *PolarDbExtension) pulumi.StringOutput { return v.DbClusterId }).(pulumi.StringOutput)
}

// PolarDB cluster database name.
func (o PolarDbExtensionOutput) DbName() pulumi.StringOutput {
	return o.ApplyT(func(v *PolarDbExtension) pulumi.StringOutput { return v.DbName }).(pulumi.StringOutput)
}

// Default version.
func (o PolarDbExtensionOutput) DefaultVersion() pulumi.StringOutput {
	return o.ApplyT(func(v *PolarDbExtension) pulumi.StringOutput { return v.DefaultVersion }).(pulumi.StringOutput)
}

// Information about the installed plug-ins under the specified database.
func (o PolarDbExtensionOutput) ExtensionName() pulumi.StringOutput {
	return o.ApplyT(func(v *PolarDbExtension) pulumi.StringOutput { return v.ExtensionName }).(pulumi.StringOutput)
}

// Installed version, only supports upgrading to the default version.
func (o PolarDbExtensionOutput) InstalledVersion() pulumi.StringOutput {
	return o.ApplyT(func(v *PolarDbExtension) pulumi.StringOutput { return v.InstalledVersion }).(pulumi.StringOutput)
}

type PolarDbExtensionArrayOutput struct{ *pulumi.OutputState }

func (PolarDbExtensionArrayOutput) ElementType() reflect.Type {
	return reflect.TypeOf((*[]*PolarDbExtension)(nil)).Elem()
}

func (o PolarDbExtensionArrayOutput) ToPolarDbExtensionArrayOutput() PolarDbExtensionArrayOutput {
	return o
}

func (o PolarDbExtensionArrayOutput) ToPolarDbExtensionArrayOutputWithContext(ctx context.Context) PolarDbExtensionArrayOutput {
	return o
}

func (o PolarDbExtensionArrayOutput) Index(i pulumi.IntInput) PolarDbExtensionOutput {
	return pulumi.All(o, i).ApplyT(func(vs []interface{}) *PolarDbExtension {
		return vs[0].([]*PolarDbExtension)[vs[1].(int)]
	}).(PolarDbExtensionOutput)
}

type PolarDbExtensionMapOutput struct{ *pulumi.OutputState }

func (PolarDbExtensionMapOutput) ElementType() reflect.Type {
	return reflect.TypeOf((*map[string]*PolarDbExtension)(nil)).Elem()
}

func (o PolarDbExtensionMapOutput) ToPolarDbExtensionMapOutput() PolarDbExtensionMapOutput {
	return o
}

func (o PolarDbExtensionMapOutput) ToPolarDbExtensionMapOutputWithContext(ctx context.Context) PolarDbExtensionMapOutput {
	return o
}

func (o PolarDbExtensionMapOutput) MapIndex(k pulumi.StringInput) PolarDbExtensionOutput {
	return pulumi.All(o, k).ApplyT(func(vs []interface{}) *PolarDbExtension {
		return vs[0].(map[string]*PolarDbExtension)[vs[1].(string)]
	}).(PolarDbExtensionOutput)
}

func init() {
	pulumi.RegisterInputType(reflect.TypeOf((*PolarDbExtensionInput)(nil)).Elem(), &PolarDbExtension{})
	pulumi.RegisterInputType(reflect.TypeOf((*PolarDbExtensionArrayInput)(nil)).Elem(), PolarDbExtensionArray{})
	pulumi.RegisterInputType(reflect.TypeOf((*PolarDbExtensionMapInput)(nil)).Elem(), PolarDbExtensionMap{})
	pulumi.RegisterOutputType(PolarDbExtensionOutput{})
	pulumi.RegisterOutputType(PolarDbExtensionArrayOutput{})
	pulumi.RegisterOutputType(PolarDbExtensionMapOutput{})
}
