// Code generated by pulumi-language-go DO NOT EDIT.
// *** WARNING: Do not edit by hand unless you're certain you know what you are doing! ***

package cloudsso

import (
	"context"
	"reflect"

	"errors"
	"github.com/pulumi/pulumi-alicloud/sdk/v3/go/alicloud/internal"
	"github.com/pulumi/pulumi/sdk/v3/go/pulumi"
)

// Provides a Cloud SSO Access Assignment resource.
//
// For information about Cloud SSO Access Assignment and how to use it, see [What is Access Assignment](https://www.alibabacloud.com/help/en/cloudsso/developer-reference/api-cloudsso-2021-05-15-createaccessassignment).
//
// > **NOTE:** When you configure access assignment for the first time, access configuration will be automatically deployed.
//
// > **NOTE:** Available since v1.145.0.
//
// > **NOTE:** Cloud SSO Only Support `cn-shanghai` And `us-west-1` Region
//
// ## Import
//
// Cloud SSO Access Assignment can be imported using the id, e.g.
//
// ```sh
// $ pulumi import alicloud:cloudsso/accessManagement:AccessManagement example <directory_id>:<access_configuration_id>:<target_type>:<target_id>:<principal_type>:<principal_id>
// ```
type AccessManagement struct {
	pulumi.CustomResourceState

	// The ID of the access configuration.
	AccessConfigurationId pulumi.StringOutput `pulumi:"accessConfigurationId"`
	// (Available since v1.254.0) The time when the access permissions were assigned.
	CreateTime pulumi.StringOutput `pulumi:"createTime"`
	// Specifies whether to de-provision the access configuration when you remove the access permissions from the CloudSSO identity. Valid values: `DeprovisionForLastAccessAssignmentOnAccount` and `None`. Default Value: `DeprovisionForLastAccessAssignmentOnAccount`. **NOTE:** When `deprovisionStrategy` is `DeprovisionForLastAccessAssignmentOnAccount`, and the access assignment to be deleted is the last access assignment for the same account and the same AC, this option is used for the undeployment operation.
	DeprovisionStrategy pulumi.StringPtrOutput `pulumi:"deprovisionStrategy"`
	// The ID of the Directory.
	DirectoryId pulumi.StringOutput `pulumi:"directoryId"`
	// The ID of the CloudSSO identity.
	PrincipalId pulumi.StringOutput `pulumi:"principalId"`
	// The type of the CloudSSO identity. Valid values: `User`, `Group`.
	PrincipalType pulumi.StringOutput `pulumi:"principalType"`
	// The ID of the task object.
	TargetId pulumi.StringOutput `pulumi:"targetId"`
	// The type of the task object. Valid values: `RD-Account`.
	TargetType pulumi.StringOutput `pulumi:"targetType"`
}

// NewAccessManagement registers a new resource with the given unique name, arguments, and options.
func NewAccessManagement(ctx *pulumi.Context,
	name string, args *AccessManagementArgs, opts ...pulumi.ResourceOption) (*AccessManagement, error) {
	if args == nil {
		return nil, errors.New("missing one or more required arguments")
	}

	if args.AccessConfigurationId == nil {
		return nil, errors.New("invalid value for required argument 'AccessConfigurationId'")
	}
	if args.DirectoryId == nil {
		return nil, errors.New("invalid value for required argument 'DirectoryId'")
	}
	if args.PrincipalId == nil {
		return nil, errors.New("invalid value for required argument 'PrincipalId'")
	}
	if args.PrincipalType == nil {
		return nil, errors.New("invalid value for required argument 'PrincipalType'")
	}
	if args.TargetId == nil {
		return nil, errors.New("invalid value for required argument 'TargetId'")
	}
	if args.TargetType == nil {
		return nil, errors.New("invalid value for required argument 'TargetType'")
	}
	opts = internal.PkgResourceDefaultOpts(opts)
	var resource AccessManagement
	err := ctx.RegisterResource("alicloud:cloudsso/accessManagement:AccessManagement", name, args, &resource, opts...)
	if err != nil {
		return nil, err
	}
	return &resource, nil
}

// GetAccessManagement gets an existing AccessManagement resource's state with the given name, ID, and optional
// state properties that are used to uniquely qualify the lookup (nil if not required).
func GetAccessManagement(ctx *pulumi.Context,
	name string, id pulumi.IDInput, state *AccessManagementState, opts ...pulumi.ResourceOption) (*AccessManagement, error) {
	var resource AccessManagement
	err := ctx.ReadResource("alicloud:cloudsso/accessManagement:AccessManagement", name, id, state, &resource, opts...)
	if err != nil {
		return nil, err
	}
	return &resource, nil
}

// Input properties used for looking up and filtering AccessManagement resources.
type accessManagementState struct {
	// The ID of the access configuration.
	AccessConfigurationId *string `pulumi:"accessConfigurationId"`
	// (Available since v1.254.0) The time when the access permissions were assigned.
	CreateTime *string `pulumi:"createTime"`
	// Specifies whether to de-provision the access configuration when you remove the access permissions from the CloudSSO identity. Valid values: `DeprovisionForLastAccessAssignmentOnAccount` and `None`. Default Value: `DeprovisionForLastAccessAssignmentOnAccount`. **NOTE:** When `deprovisionStrategy` is `DeprovisionForLastAccessAssignmentOnAccount`, and the access assignment to be deleted is the last access assignment for the same account and the same AC, this option is used for the undeployment operation.
	DeprovisionStrategy *string `pulumi:"deprovisionStrategy"`
	// The ID of the Directory.
	DirectoryId *string `pulumi:"directoryId"`
	// The ID of the CloudSSO identity.
	PrincipalId *string `pulumi:"principalId"`
	// The type of the CloudSSO identity. Valid values: `User`, `Group`.
	PrincipalType *string `pulumi:"principalType"`
	// The ID of the task object.
	TargetId *string `pulumi:"targetId"`
	// The type of the task object. Valid values: `RD-Account`.
	TargetType *string `pulumi:"targetType"`
}

type AccessManagementState struct {
	// The ID of the access configuration.
	AccessConfigurationId pulumi.StringPtrInput
	// (Available since v1.254.0) The time when the access permissions were assigned.
	CreateTime pulumi.StringPtrInput
	// Specifies whether to de-provision the access configuration when you remove the access permissions from the CloudSSO identity. Valid values: `DeprovisionForLastAccessAssignmentOnAccount` and `None`. Default Value: `DeprovisionForLastAccessAssignmentOnAccount`. **NOTE:** When `deprovisionStrategy` is `DeprovisionForLastAccessAssignmentOnAccount`, and the access assignment to be deleted is the last access assignment for the same account and the same AC, this option is used for the undeployment operation.
	DeprovisionStrategy pulumi.StringPtrInput
	// The ID of the Directory.
	DirectoryId pulumi.StringPtrInput
	// The ID of the CloudSSO identity.
	PrincipalId pulumi.StringPtrInput
	// The type of the CloudSSO identity. Valid values: `User`, `Group`.
	PrincipalType pulumi.StringPtrInput
	// The ID of the task object.
	TargetId pulumi.StringPtrInput
	// The type of the task object. Valid values: `RD-Account`.
	TargetType pulumi.StringPtrInput
}

func (AccessManagementState) ElementType() reflect.Type {
	return reflect.TypeOf((*accessManagementState)(nil)).Elem()
}

type accessManagementArgs struct {
	// The ID of the access configuration.
	AccessConfigurationId string `pulumi:"accessConfigurationId"`
	// Specifies whether to de-provision the access configuration when you remove the access permissions from the CloudSSO identity. Valid values: `DeprovisionForLastAccessAssignmentOnAccount` and `None`. Default Value: `DeprovisionForLastAccessAssignmentOnAccount`. **NOTE:** When `deprovisionStrategy` is `DeprovisionForLastAccessAssignmentOnAccount`, and the access assignment to be deleted is the last access assignment for the same account and the same AC, this option is used for the undeployment operation.
	DeprovisionStrategy *string `pulumi:"deprovisionStrategy"`
	// The ID of the Directory.
	DirectoryId string `pulumi:"directoryId"`
	// The ID of the CloudSSO identity.
	PrincipalId string `pulumi:"principalId"`
	// The type of the CloudSSO identity. Valid values: `User`, `Group`.
	PrincipalType string `pulumi:"principalType"`
	// The ID of the task object.
	TargetId string `pulumi:"targetId"`
	// The type of the task object. Valid values: `RD-Account`.
	TargetType string `pulumi:"targetType"`
}

// The set of arguments for constructing a AccessManagement resource.
type AccessManagementArgs struct {
	// The ID of the access configuration.
	AccessConfigurationId pulumi.StringInput
	// Specifies whether to de-provision the access configuration when you remove the access permissions from the CloudSSO identity. Valid values: `DeprovisionForLastAccessAssignmentOnAccount` and `None`. Default Value: `DeprovisionForLastAccessAssignmentOnAccount`. **NOTE:** When `deprovisionStrategy` is `DeprovisionForLastAccessAssignmentOnAccount`, and the access assignment to be deleted is the last access assignment for the same account and the same AC, this option is used for the undeployment operation.
	DeprovisionStrategy pulumi.StringPtrInput
	// The ID of the Directory.
	DirectoryId pulumi.StringInput
	// The ID of the CloudSSO identity.
	PrincipalId pulumi.StringInput
	// The type of the CloudSSO identity. Valid values: `User`, `Group`.
	PrincipalType pulumi.StringInput
	// The ID of the task object.
	TargetId pulumi.StringInput
	// The type of the task object. Valid values: `RD-Account`.
	TargetType pulumi.StringInput
}

func (AccessManagementArgs) ElementType() reflect.Type {
	return reflect.TypeOf((*accessManagementArgs)(nil)).Elem()
}

type AccessManagementInput interface {
	pulumi.Input

	ToAccessManagementOutput() AccessManagementOutput
	ToAccessManagementOutputWithContext(ctx context.Context) AccessManagementOutput
}

func (*AccessManagement) ElementType() reflect.Type {
	return reflect.TypeOf((**AccessManagement)(nil)).Elem()
}

func (i *AccessManagement) ToAccessManagementOutput() AccessManagementOutput {
	return i.ToAccessManagementOutputWithContext(context.Background())
}

func (i *AccessManagement) ToAccessManagementOutputWithContext(ctx context.Context) AccessManagementOutput {
	return pulumi.ToOutputWithContext(ctx, i).(AccessManagementOutput)
}

// AccessManagementArrayInput is an input type that accepts AccessManagementArray and AccessManagementArrayOutput values.
// You can construct a concrete instance of `AccessManagementArrayInput` via:
//
//	AccessManagementArray{ AccessManagementArgs{...} }
type AccessManagementArrayInput interface {
	pulumi.Input

	ToAccessManagementArrayOutput() AccessManagementArrayOutput
	ToAccessManagementArrayOutputWithContext(context.Context) AccessManagementArrayOutput
}

type AccessManagementArray []AccessManagementInput

func (AccessManagementArray) ElementType() reflect.Type {
	return reflect.TypeOf((*[]*AccessManagement)(nil)).Elem()
}

func (i AccessManagementArray) ToAccessManagementArrayOutput() AccessManagementArrayOutput {
	return i.ToAccessManagementArrayOutputWithContext(context.Background())
}

func (i AccessManagementArray) ToAccessManagementArrayOutputWithContext(ctx context.Context) AccessManagementArrayOutput {
	return pulumi.ToOutputWithContext(ctx, i).(AccessManagementArrayOutput)
}

// AccessManagementMapInput is an input type that accepts AccessManagementMap and AccessManagementMapOutput values.
// You can construct a concrete instance of `AccessManagementMapInput` via:
//
//	AccessManagementMap{ "key": AccessManagementArgs{...} }
type AccessManagementMapInput interface {
	pulumi.Input

	ToAccessManagementMapOutput() AccessManagementMapOutput
	ToAccessManagementMapOutputWithContext(context.Context) AccessManagementMapOutput
}

type AccessManagementMap map[string]AccessManagementInput

func (AccessManagementMap) ElementType() reflect.Type {
	return reflect.TypeOf((*map[string]*AccessManagement)(nil)).Elem()
}

func (i AccessManagementMap) ToAccessManagementMapOutput() AccessManagementMapOutput {
	return i.ToAccessManagementMapOutputWithContext(context.Background())
}

func (i AccessManagementMap) ToAccessManagementMapOutputWithContext(ctx context.Context) AccessManagementMapOutput {
	return pulumi.ToOutputWithContext(ctx, i).(AccessManagementMapOutput)
}

type AccessManagementOutput struct{ *pulumi.OutputState }

func (AccessManagementOutput) ElementType() reflect.Type {
	return reflect.TypeOf((**AccessManagement)(nil)).Elem()
}

func (o AccessManagementOutput) ToAccessManagementOutput() AccessManagementOutput {
	return o
}

func (o AccessManagementOutput) ToAccessManagementOutputWithContext(ctx context.Context) AccessManagementOutput {
	return o
}

// The ID of the access configuration.
func (o AccessManagementOutput) AccessConfigurationId() pulumi.StringOutput {
	return o.ApplyT(func(v *AccessManagement) pulumi.StringOutput { return v.AccessConfigurationId }).(pulumi.StringOutput)
}

// (Available since v1.254.0) The time when the access permissions were assigned.
func (o AccessManagementOutput) CreateTime() pulumi.StringOutput {
	return o.ApplyT(func(v *AccessManagement) pulumi.StringOutput { return v.CreateTime }).(pulumi.StringOutput)
}

// Specifies whether to de-provision the access configuration when you remove the access permissions from the CloudSSO identity. Valid values: `DeprovisionForLastAccessAssignmentOnAccount` and `None`. Default Value: `DeprovisionForLastAccessAssignmentOnAccount`. **NOTE:** When `deprovisionStrategy` is `DeprovisionForLastAccessAssignmentOnAccount`, and the access assignment to be deleted is the last access assignment for the same account and the same AC, this option is used for the undeployment operation.
func (o AccessManagementOutput) DeprovisionStrategy() pulumi.StringPtrOutput {
	return o.ApplyT(func(v *AccessManagement) pulumi.StringPtrOutput { return v.DeprovisionStrategy }).(pulumi.StringPtrOutput)
}

// The ID of the Directory.
func (o AccessManagementOutput) DirectoryId() pulumi.StringOutput {
	return o.ApplyT(func(v *AccessManagement) pulumi.StringOutput { return v.DirectoryId }).(pulumi.StringOutput)
}

// The ID of the CloudSSO identity.
func (o AccessManagementOutput) PrincipalId() pulumi.StringOutput {
	return o.ApplyT(func(v *AccessManagement) pulumi.StringOutput { return v.PrincipalId }).(pulumi.StringOutput)
}

// The type of the CloudSSO identity. Valid values: `User`, `Group`.
func (o AccessManagementOutput) PrincipalType() pulumi.StringOutput {
	return o.ApplyT(func(v *AccessManagement) pulumi.StringOutput { return v.PrincipalType }).(pulumi.StringOutput)
}

// The ID of the task object.
func (o AccessManagementOutput) TargetId() pulumi.StringOutput {
	return o.ApplyT(func(v *AccessManagement) pulumi.StringOutput { return v.TargetId }).(pulumi.StringOutput)
}

// The type of the task object. Valid values: `RD-Account`.
func (o AccessManagementOutput) TargetType() pulumi.StringOutput {
	return o.ApplyT(func(v *AccessManagement) pulumi.StringOutput { return v.TargetType }).(pulumi.StringOutput)
}

type AccessManagementArrayOutput struct{ *pulumi.OutputState }

func (AccessManagementArrayOutput) ElementType() reflect.Type {
	return reflect.TypeOf((*[]*AccessManagement)(nil)).Elem()
}

func (o AccessManagementArrayOutput) ToAccessManagementArrayOutput() AccessManagementArrayOutput {
	return o
}

func (o AccessManagementArrayOutput) ToAccessManagementArrayOutputWithContext(ctx context.Context) AccessManagementArrayOutput {
	return o
}

func (o AccessManagementArrayOutput) Index(i pulumi.IntInput) AccessManagementOutput {
	return pulumi.All(o, i).ApplyT(func(vs []interface{}) *AccessManagement {
		return vs[0].([]*AccessManagement)[vs[1].(int)]
	}).(AccessManagementOutput)
}

type AccessManagementMapOutput struct{ *pulumi.OutputState }

func (AccessManagementMapOutput) ElementType() reflect.Type {
	return reflect.TypeOf((*map[string]*AccessManagement)(nil)).Elem()
}

func (o AccessManagementMapOutput) ToAccessManagementMapOutput() AccessManagementMapOutput {
	return o
}

func (o AccessManagementMapOutput) ToAccessManagementMapOutputWithContext(ctx context.Context) AccessManagementMapOutput {
	return o
}

func (o AccessManagementMapOutput) MapIndex(k pulumi.StringInput) AccessManagementOutput {
	return pulumi.All(o, k).ApplyT(func(vs []interface{}) *AccessManagement {
		return vs[0].(map[string]*AccessManagement)[vs[1].(string)]
	}).(AccessManagementOutput)
}

func init() {
	pulumi.RegisterInputType(reflect.TypeOf((*AccessManagementInput)(nil)).Elem(), &AccessManagement{})
	pulumi.RegisterInputType(reflect.TypeOf((*AccessManagementArrayInput)(nil)).Elem(), AccessManagementArray{})
	pulumi.RegisterInputType(reflect.TypeOf((*AccessManagementMapInput)(nil)).Elem(), AccessManagementMap{})
	pulumi.RegisterOutputType(AccessManagementOutput{})
	pulumi.RegisterOutputType(AccessManagementArrayOutput{})
	pulumi.RegisterOutputType(AccessManagementMapOutput{})
}
