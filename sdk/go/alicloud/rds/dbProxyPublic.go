// Code generated by pulumi-language-go DO NOT EDIT.
// *** WARNING: Do not edit by hand unless you're certain you know what you are doing! ***

package rds

import (
	"context"
	"reflect"

	"errors"
	"github.com/pulumi/pulumi-alicloud/sdk/v3/go/alicloud/internal"
	"github.com/pulumi/pulumi/sdk/v3/go/pulumi"
)

// Provides a RDS database proxy public network address resource.
//
// For information about Resource AlicloudRdsDBProxyPublic and how to use it, see [What is proxy](https://www.alibabacloud.com/help/en/rds/developer-reference/api-rds-2014-08-15-createdbproxyendpointaddress).
//
// > **NOTE:** Available since v1.250.0.
//
// ## Example Usage
//
// ```go
// package main
//
// import (
//
//	"fmt"
//
//	"github.com/pulumi/pulumi-alicloud/sdk/v3/go/alicloud/ecs"
//	"github.com/pulumi/pulumi-alicloud/sdk/v3/go/alicloud/rds"
//	"github.com/pulumi/pulumi-alicloud/sdk/v3/go/alicloud/vpc"
//	"github.com/pulumi/pulumi/sdk/v3/go/pulumi"
//	"github.com/pulumi/pulumi/sdk/v3/go/pulumi/config"
//
// )
//
//	func main() {
//		pulumi.Run(func(ctx *pulumi.Context) error {
//			cfg := config.New(ctx, "")
//			name := "tf-example"
//			if param := cfg.Get("name"); param != "" {
//				name = param
//			}
//			_default, err := rds.GetZones(ctx, &rds.GetZonesArgs{
//				Engine:        pulumi.StringRef("MySQL"),
//				EngineVersion: pulumi.StringRef("5.6"),
//			}, nil)
//			if err != nil {
//				return err
//			}
//			defaultNetwork, err := vpc.NewNetwork(ctx, "default", &vpc.NetworkArgs{
//				VpcName:   pulumi.String(name),
//				CidrBlock: pulumi.String("172.16.0.0/16"),
//			})
//			if err != nil {
//				return err
//			}
//			defaultSwitch, err := vpc.NewSwitch(ctx, "default", &vpc.SwitchArgs{
//				VpcId:       defaultNetwork.ID(),
//				CidrBlock:   pulumi.String("172.16.0.0/24"),
//				ZoneId:      pulumi.String(_default.Zones[0].Id),
//				VswitchName: pulumi.String(name),
//			})
//			if err != nil {
//				return err
//			}
//			_, err = ecs.NewSecurityGroup(ctx, "default", &ecs.SecurityGroupArgs{
//				Name:  pulumi.String(name),
//				VpcId: defaultNetwork.ID(),
//			})
//			if err != nil {
//				return err
//			}
//			defaultInstance, err := rds.NewInstance(ctx, "default", &rds.InstanceArgs{
//				Engine:                pulumi.String("MySQL"),
//				EngineVersion:         pulumi.String("5.7"),
//				InstanceType:          pulumi.String("rds.mysql.c1.large"),
//				InstanceStorage:       pulumi.Int(20),
//				InstanceChargeType:    pulumi.String("Postpaid"),
//				InstanceName:          pulumi.String(name),
//				VswitchId:             defaultSwitch.ID(),
//				DbInstanceStorageType: pulumi.String("local_ssd"),
//			})
//			if err != nil {
//				return err
//			}
//			defaultReadOnlyInstance, err := rds.NewReadOnlyInstance(ctx, "default", &rds.ReadOnlyInstanceArgs{
//				ZoneId:             defaultInstance.ZoneId,
//				MasterDbInstanceId: defaultInstance.ID(),
//				EngineVersion:      defaultInstance.EngineVersion,
//				InstanceStorage:    defaultInstance.InstanceStorage,
//				InstanceType:       defaultInstance.InstanceType,
//				InstanceName:       pulumi.Sprintf("%vreadonly", name),
//				VswitchId:          defaultSwitch.ID(),
//			})
//			if err != nil {
//				return err
//			}
//			defaultRdsDbProxy, err := rds.NewRdsDbProxy(ctx, "default", &rds.RdsDbProxyArgs{
//				InstanceId:                       defaultInstance.ID(),
//				InstanceNetworkType:              pulumi.String("VPC"),
//				VpcId:                            defaultInstance.VpcId,
//				VswitchId:                        defaultInstance.VswitchId,
//				DbProxyInstanceNum:               pulumi.Int(2),
//				DbProxyConnectionPrefix:          pulumi.String("example"),
//				DbProxyConnectStringPort:         pulumi.Int(3306),
//				DbProxyEndpointReadWriteMode:     pulumi.String("ReadWrite"),
//				ReadOnlyInstanceMaxDelayTime:     pulumi.Int(90),
//				DbProxyFeatures:                  pulumi.String("TransactionReadSqlRouteOptimizeStatus:1;ConnectionPersist:1;ReadWriteSpliting:1"),
//				ReadOnlyInstanceDistributionType: pulumi.String("Custom"),
//				ReadOnlyInstanceWeights: rds.RdsDbProxyReadOnlyInstanceWeightArray{
//					&rds.RdsDbProxyReadOnlyInstanceWeightArgs{
//						InstanceId: defaultInstance.ID(),
//						Weight:     pulumi.String("100"),
//					},
//					&rds.RdsDbProxyReadOnlyInstanceWeightArgs{
//						InstanceId: defaultReadOnlyInstance.ID(),
//						Weight:     pulumi.String("500"),
//					},
//				},
//			})
//			if err != nil {
//				return err
//			}
//			_, err = rds.NewDbProxyPublic(ctx, "default", &rds.DbProxyPublicArgs{
//				DbInstanceId:                   defaultInstance.ID(),
//				DbProxyEndpointId:              defaultRdsDbProxy.DbProxyEndpointId,
//				ConnectionStringPrefix:         pulumi.String("exampleabc"),
//				DbProxyConnectionStringNetType: pulumi.String("Public"),
//				DbProxyNewConnectStringPort:    pulumi.String("3306"),
//			})
//			if err != nil {
//				return err
//			}
//			return nil
//		})
//	}
//
// ```
//
// > **NOTE:** Resource `rds.DbProxyPublic` should be created after `rds.RdsDbProxy`, so the `dependsOn` statement is necessary.
//
// ðŸ“š Need more examples? VIEW MORE EXAMPLES
//
// ## Import
//
// RDS Database Proxy Public Network Address can be imported using the id, e.g.
//
// ```sh
// $ pulumi import alicloud:rds/dbProxyPublic:DbProxyPublic example <id>
// ```
type DbProxyPublic struct {
	pulumi.CustomResourceState

	// The prefix for the new database proxy connection address can be customized.
	ConnectionStringPrefix pulumi.StringOutput `pulumi:"connectionStringPrefix"`
	// Instance ID.
	DbInstanceId pulumi.StringOutput `pulumi:"dbInstanceId"`
	// The network type of the new database proxy connection address,This resource defaults to Public.
	DbProxyConnectionStringNetType pulumi.StringOutput `pulumi:"dbProxyConnectionStringNetType"`
	// Database proxy connection address ID.
	DbProxyEndpointId pulumi.StringOutput `pulumi:"dbProxyEndpointId"`
	// The port for the new database proxy connection address is 3306 by default for MySQL and 5432 by default for PostgreSQL, which can be customized.
	DbProxyNewConnectStringPort pulumi.StringOutput `pulumi:"dbProxyNewConnectStringPort"`
}

// NewDbProxyPublic registers a new resource with the given unique name, arguments, and options.
func NewDbProxyPublic(ctx *pulumi.Context,
	name string, args *DbProxyPublicArgs, opts ...pulumi.ResourceOption) (*DbProxyPublic, error) {
	if args == nil {
		return nil, errors.New("missing one or more required arguments")
	}

	if args.ConnectionStringPrefix == nil {
		return nil, errors.New("invalid value for required argument 'ConnectionStringPrefix'")
	}
	if args.DbInstanceId == nil {
		return nil, errors.New("invalid value for required argument 'DbInstanceId'")
	}
	if args.DbProxyConnectionStringNetType == nil {
		return nil, errors.New("invalid value for required argument 'DbProxyConnectionStringNetType'")
	}
	if args.DbProxyEndpointId == nil {
		return nil, errors.New("invalid value for required argument 'DbProxyEndpointId'")
	}
	opts = internal.PkgResourceDefaultOpts(opts)
	var resource DbProxyPublic
	err := ctx.RegisterResource("alicloud:rds/dbProxyPublic:DbProxyPublic", name, args, &resource, opts...)
	if err != nil {
		return nil, err
	}
	return &resource, nil
}

// GetDbProxyPublic gets an existing DbProxyPublic resource's state with the given name, ID, and optional
// state properties that are used to uniquely qualify the lookup (nil if not required).
func GetDbProxyPublic(ctx *pulumi.Context,
	name string, id pulumi.IDInput, state *DbProxyPublicState, opts ...pulumi.ResourceOption) (*DbProxyPublic, error) {
	var resource DbProxyPublic
	err := ctx.ReadResource("alicloud:rds/dbProxyPublic:DbProxyPublic", name, id, state, &resource, opts...)
	if err != nil {
		return nil, err
	}
	return &resource, nil
}

// Input properties used for looking up and filtering DbProxyPublic resources.
type dbProxyPublicState struct {
	// The prefix for the new database proxy connection address can be customized.
	ConnectionStringPrefix *string `pulumi:"connectionStringPrefix"`
	// Instance ID.
	DbInstanceId *string `pulumi:"dbInstanceId"`
	// The network type of the new database proxy connection address,This resource defaults to Public.
	DbProxyConnectionStringNetType *string `pulumi:"dbProxyConnectionStringNetType"`
	// Database proxy connection address ID.
	DbProxyEndpointId *string `pulumi:"dbProxyEndpointId"`
	// The port for the new database proxy connection address is 3306 by default for MySQL and 5432 by default for PostgreSQL, which can be customized.
	DbProxyNewConnectStringPort *string `pulumi:"dbProxyNewConnectStringPort"`
}

type DbProxyPublicState struct {
	// The prefix for the new database proxy connection address can be customized.
	ConnectionStringPrefix pulumi.StringPtrInput
	// Instance ID.
	DbInstanceId pulumi.StringPtrInput
	// The network type of the new database proxy connection address,This resource defaults to Public.
	DbProxyConnectionStringNetType pulumi.StringPtrInput
	// Database proxy connection address ID.
	DbProxyEndpointId pulumi.StringPtrInput
	// The port for the new database proxy connection address is 3306 by default for MySQL and 5432 by default for PostgreSQL, which can be customized.
	DbProxyNewConnectStringPort pulumi.StringPtrInput
}

func (DbProxyPublicState) ElementType() reflect.Type {
	return reflect.TypeOf((*dbProxyPublicState)(nil)).Elem()
}

type dbProxyPublicArgs struct {
	// The prefix for the new database proxy connection address can be customized.
	ConnectionStringPrefix string `pulumi:"connectionStringPrefix"`
	// Instance ID.
	DbInstanceId string `pulumi:"dbInstanceId"`
	// The network type of the new database proxy connection address,This resource defaults to Public.
	DbProxyConnectionStringNetType string `pulumi:"dbProxyConnectionStringNetType"`
	// Database proxy connection address ID.
	DbProxyEndpointId string `pulumi:"dbProxyEndpointId"`
	// The port for the new database proxy connection address is 3306 by default for MySQL and 5432 by default for PostgreSQL, which can be customized.
	DbProxyNewConnectStringPort *string `pulumi:"dbProxyNewConnectStringPort"`
}

// The set of arguments for constructing a DbProxyPublic resource.
type DbProxyPublicArgs struct {
	// The prefix for the new database proxy connection address can be customized.
	ConnectionStringPrefix pulumi.StringInput
	// Instance ID.
	DbInstanceId pulumi.StringInput
	// The network type of the new database proxy connection address,This resource defaults to Public.
	DbProxyConnectionStringNetType pulumi.StringInput
	// Database proxy connection address ID.
	DbProxyEndpointId pulumi.StringInput
	// The port for the new database proxy connection address is 3306 by default for MySQL and 5432 by default for PostgreSQL, which can be customized.
	DbProxyNewConnectStringPort pulumi.StringPtrInput
}

func (DbProxyPublicArgs) ElementType() reflect.Type {
	return reflect.TypeOf((*dbProxyPublicArgs)(nil)).Elem()
}

type DbProxyPublicInput interface {
	pulumi.Input

	ToDbProxyPublicOutput() DbProxyPublicOutput
	ToDbProxyPublicOutputWithContext(ctx context.Context) DbProxyPublicOutput
}

func (*DbProxyPublic) ElementType() reflect.Type {
	return reflect.TypeOf((**DbProxyPublic)(nil)).Elem()
}

func (i *DbProxyPublic) ToDbProxyPublicOutput() DbProxyPublicOutput {
	return i.ToDbProxyPublicOutputWithContext(context.Background())
}

func (i *DbProxyPublic) ToDbProxyPublicOutputWithContext(ctx context.Context) DbProxyPublicOutput {
	return pulumi.ToOutputWithContext(ctx, i).(DbProxyPublicOutput)
}

// DbProxyPublicArrayInput is an input type that accepts DbProxyPublicArray and DbProxyPublicArrayOutput values.
// You can construct a concrete instance of `DbProxyPublicArrayInput` via:
//
//	DbProxyPublicArray{ DbProxyPublicArgs{...} }
type DbProxyPublicArrayInput interface {
	pulumi.Input

	ToDbProxyPublicArrayOutput() DbProxyPublicArrayOutput
	ToDbProxyPublicArrayOutputWithContext(context.Context) DbProxyPublicArrayOutput
}

type DbProxyPublicArray []DbProxyPublicInput

func (DbProxyPublicArray) ElementType() reflect.Type {
	return reflect.TypeOf((*[]*DbProxyPublic)(nil)).Elem()
}

func (i DbProxyPublicArray) ToDbProxyPublicArrayOutput() DbProxyPublicArrayOutput {
	return i.ToDbProxyPublicArrayOutputWithContext(context.Background())
}

func (i DbProxyPublicArray) ToDbProxyPublicArrayOutputWithContext(ctx context.Context) DbProxyPublicArrayOutput {
	return pulumi.ToOutputWithContext(ctx, i).(DbProxyPublicArrayOutput)
}

// DbProxyPublicMapInput is an input type that accepts DbProxyPublicMap and DbProxyPublicMapOutput values.
// You can construct a concrete instance of `DbProxyPublicMapInput` via:
//
//	DbProxyPublicMap{ "key": DbProxyPublicArgs{...} }
type DbProxyPublicMapInput interface {
	pulumi.Input

	ToDbProxyPublicMapOutput() DbProxyPublicMapOutput
	ToDbProxyPublicMapOutputWithContext(context.Context) DbProxyPublicMapOutput
}

type DbProxyPublicMap map[string]DbProxyPublicInput

func (DbProxyPublicMap) ElementType() reflect.Type {
	return reflect.TypeOf((*map[string]*DbProxyPublic)(nil)).Elem()
}

func (i DbProxyPublicMap) ToDbProxyPublicMapOutput() DbProxyPublicMapOutput {
	return i.ToDbProxyPublicMapOutputWithContext(context.Background())
}

func (i DbProxyPublicMap) ToDbProxyPublicMapOutputWithContext(ctx context.Context) DbProxyPublicMapOutput {
	return pulumi.ToOutputWithContext(ctx, i).(DbProxyPublicMapOutput)
}

type DbProxyPublicOutput struct{ *pulumi.OutputState }

func (DbProxyPublicOutput) ElementType() reflect.Type {
	return reflect.TypeOf((**DbProxyPublic)(nil)).Elem()
}

func (o DbProxyPublicOutput) ToDbProxyPublicOutput() DbProxyPublicOutput {
	return o
}

func (o DbProxyPublicOutput) ToDbProxyPublicOutputWithContext(ctx context.Context) DbProxyPublicOutput {
	return o
}

// The prefix for the new database proxy connection address can be customized.
func (o DbProxyPublicOutput) ConnectionStringPrefix() pulumi.StringOutput {
	return o.ApplyT(func(v *DbProxyPublic) pulumi.StringOutput { return v.ConnectionStringPrefix }).(pulumi.StringOutput)
}

// Instance ID.
func (o DbProxyPublicOutput) DbInstanceId() pulumi.StringOutput {
	return o.ApplyT(func(v *DbProxyPublic) pulumi.StringOutput { return v.DbInstanceId }).(pulumi.StringOutput)
}

// The network type of the new database proxy connection address,This resource defaults to Public.
func (o DbProxyPublicOutput) DbProxyConnectionStringNetType() pulumi.StringOutput {
	return o.ApplyT(func(v *DbProxyPublic) pulumi.StringOutput { return v.DbProxyConnectionStringNetType }).(pulumi.StringOutput)
}

// Database proxy connection address ID.
func (o DbProxyPublicOutput) DbProxyEndpointId() pulumi.StringOutput {
	return o.ApplyT(func(v *DbProxyPublic) pulumi.StringOutput { return v.DbProxyEndpointId }).(pulumi.StringOutput)
}

// The port for the new database proxy connection address is 3306 by default for MySQL and 5432 by default for PostgreSQL, which can be customized.
func (o DbProxyPublicOutput) DbProxyNewConnectStringPort() pulumi.StringOutput {
	return o.ApplyT(func(v *DbProxyPublic) pulumi.StringOutput { return v.DbProxyNewConnectStringPort }).(pulumi.StringOutput)
}

type DbProxyPublicArrayOutput struct{ *pulumi.OutputState }

func (DbProxyPublicArrayOutput) ElementType() reflect.Type {
	return reflect.TypeOf((*[]*DbProxyPublic)(nil)).Elem()
}

func (o DbProxyPublicArrayOutput) ToDbProxyPublicArrayOutput() DbProxyPublicArrayOutput {
	return o
}

func (o DbProxyPublicArrayOutput) ToDbProxyPublicArrayOutputWithContext(ctx context.Context) DbProxyPublicArrayOutput {
	return o
}

func (o DbProxyPublicArrayOutput) Index(i pulumi.IntInput) DbProxyPublicOutput {
	return pulumi.All(o, i).ApplyT(func(vs []interface{}) *DbProxyPublic {
		return vs[0].([]*DbProxyPublic)[vs[1].(int)]
	}).(DbProxyPublicOutput)
}

type DbProxyPublicMapOutput struct{ *pulumi.OutputState }

func (DbProxyPublicMapOutput) ElementType() reflect.Type {
	return reflect.TypeOf((*map[string]*DbProxyPublic)(nil)).Elem()
}

func (o DbProxyPublicMapOutput) ToDbProxyPublicMapOutput() DbProxyPublicMapOutput {
	return o
}

func (o DbProxyPublicMapOutput) ToDbProxyPublicMapOutputWithContext(ctx context.Context) DbProxyPublicMapOutput {
	return o
}

func (o DbProxyPublicMapOutput) MapIndex(k pulumi.StringInput) DbProxyPublicOutput {
	return pulumi.All(o, k).ApplyT(func(vs []interface{}) *DbProxyPublic {
		return vs[0].(map[string]*DbProxyPublic)[vs[1].(string)]
	}).(DbProxyPublicOutput)
}

func init() {
	pulumi.RegisterInputType(reflect.TypeOf((*DbProxyPublicInput)(nil)).Elem(), &DbProxyPublic{})
	pulumi.RegisterInputType(reflect.TypeOf((*DbProxyPublicArrayInput)(nil)).Elem(), DbProxyPublicArray{})
	pulumi.RegisterInputType(reflect.TypeOf((*DbProxyPublicMapInput)(nil)).Elem(), DbProxyPublicMap{})
	pulumi.RegisterOutputType(DbProxyPublicOutput{})
	pulumi.RegisterOutputType(DbProxyPublicArrayOutput{})
	pulumi.RegisterOutputType(DbProxyPublicMapOutput{})
}
