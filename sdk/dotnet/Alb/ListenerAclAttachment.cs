// *** WARNING: this file was generated by pulumi-language-dotnet. ***
// *** Do not edit by hand unless you're certain you know what you are doing! ***

using System;
using System.Collections.Generic;
using System.Collections.Immutable;
using System.Threading.Tasks;
using Pulumi.Serialization;

namespace Pulumi.AliCloud.Alb
{
    /// <summary>
    /// Provides a ALB Listener Acl Attachment resource. Associating ACL to listening.
    /// 
    /// For information about ALB Listener Acl Attachment and how to use it, see [What is Listener Acl Attachment](https://www.alibabacloud.com/help/en/slb/application-load-balancer/developer-reference/api-alb-2020-06-16-associateaclswithlistener).
    /// 
    /// &gt; **NOTE:** Available since v1.163.0.
    /// 
    /// &gt; **NOTE:** You can associate at most three ACLs with a listener.
    /// 
    /// &gt; **NOTE:** You can only configure either a whitelist or a blacklist for listener, not at the same time.
    /// 
    /// ## Example Usage
    /// 
    /// Basic Usage
    /// 
    /// ```csharp
    /// using System.Collections.Generic;
    /// using System.Linq;
    /// using Pulumi;
    /// using AliCloud = Pulumi.AliCloud;
    /// using Std = Pulumi.Std;
    /// 
    /// return await Deployment.RunAsync(() =&gt; 
    /// {
    ///     var config = new Config();
    ///     var name = config.Get("name") ?? "tf_example";
    ///     var @default = AliCloud.Alb.GetZones.Invoke();
    /// 
    ///     var defaultGetResourceGroups = AliCloud.ResourceManager.GetResourceGroups.Invoke();
    /// 
    ///     var defaultNetwork = new AliCloud.Vpc.Network("default", new()
    ///     {
    ///         VpcName = name,
    ///         CidrBlock = "10.4.0.0/16",
    ///     });
    /// 
    ///     var defaultSwitch = new List&lt;AliCloud.Vpc.Switch&gt;();
    ///     for (var rangeIndex = 0; rangeIndex &lt; 2; rangeIndex++)
    ///     {
    ///         var range = new { Value = rangeIndex };
    ///         defaultSwitch.Add(new AliCloud.Vpc.Switch($"default-{range.Value}", new()
    ///         {
    ///             VpcId = defaultNetwork.Id,
    ///             CidrBlock = Std.Format.Invoke(new()
    ///             {
    ///                 Input = "10.4.%d.0/24",
    ///                 Args = new[]
    ///                 {
    ///                     range.Value + 1,
    ///                 },
    ///             }).Apply(invoke =&gt; invoke.Result),
    ///             ZoneId = @default.Apply(@default =&gt; @default.Apply(getZonesResult =&gt; getZonesResult.Zones)[range.Value + 3].Id),
    ///             VswitchName = Std.Format.Invoke(new()
    ///             {
    ///                 Input = $"{name}_%d",
    ///                 Args = new[]
    ///                 {
    ///                     range.Value + 1,
    ///                 },
    ///             }).Apply(invoke =&gt; invoke.Result),
    ///         }));
    ///     }
    ///     var defaultLoadBalancer = new AliCloud.Alb.LoadBalancer("default", new()
    ///     {
    ///         VpcId = defaultNetwork.Id,
    ///         AddressType = "Internet",
    ///         AddressAllocatedMode = "Fixed",
    ///         LoadBalancerName = name,
    ///         LoadBalancerEdition = "Standard",
    ///         ResourceGroupId = defaultGetResourceGroups.Apply(getResourceGroupsResult =&gt; getResourceGroupsResult.Groups[0]?.Id),
    ///         LoadBalancerBillingConfig = new AliCloud.Alb.Inputs.LoadBalancerLoadBalancerBillingConfigArgs
    ///         {
    ///             PayType = "PayAsYouGo",
    ///         },
    ///         Tags = 
    ///         {
    ///             { "Created", "TF" },
    ///         },
    ///         ZoneMappings = new[]
    ///         {
    ///             new AliCloud.Alb.Inputs.LoadBalancerZoneMappingArgs
    ///             {
    ///                 VswitchId = defaultSwitch[0].Id,
    ///                 ZoneId = defaultSwitch[0].ZoneId,
    ///             },
    ///             new AliCloud.Alb.Inputs.LoadBalancerZoneMappingArgs
    ///             {
    ///                 VswitchId = defaultSwitch[1].Id,
    ///                 ZoneId = defaultSwitch[1].ZoneId,
    ///             },
    ///         },
    ///     });
    /// 
    ///     var defaultServerGroup = new AliCloud.Alb.ServerGroup("default", new()
    ///     {
    ///         Protocol = "HTTP",
    ///         VpcId = defaultNetwork.Id,
    ///         ServerGroupName = name,
    ///         ResourceGroupId = defaultGetResourceGroups.Apply(getResourceGroupsResult =&gt; getResourceGroupsResult.Groups[0]?.Id),
    ///         HealthCheckConfig = new AliCloud.Alb.Inputs.ServerGroupHealthCheckConfigArgs
    ///         {
    ///             HealthCheckEnabled = false,
    ///         },
    ///         StickySessionConfig = new AliCloud.Alb.Inputs.ServerGroupStickySessionConfigArgs
    ///         {
    ///             StickySessionEnabled = false,
    ///         },
    ///         Tags = 
    ///         {
    ///             { "Created", "TF" },
    ///         },
    ///     });
    /// 
    ///     var defaultListener = new AliCloud.Alb.Listener("default", new()
    ///     {
    ///         LoadBalancerId = defaultLoadBalancer.Id,
    ///         ListenerProtocol = "HTTP",
    ///         ListenerPort = 80,
    ///         ListenerDescription = name,
    ///         DefaultActions = new[]
    ///         {
    ///             new AliCloud.Alb.Inputs.ListenerDefaultActionArgs
    ///             {
    ///                 Type = "ForwardGroup",
    ///                 ForwardGroupConfig = new AliCloud.Alb.Inputs.ListenerDefaultActionForwardGroupConfigArgs
    ///                 {
    ///                     ServerGroupTuples = new[]
    ///                     {
    ///                         new AliCloud.Alb.Inputs.ListenerDefaultActionForwardGroupConfigServerGroupTupleArgs
    ///                         {
    ///                             ServerGroupId = defaultServerGroup.Id,
    ///                         },
    ///                     },
    ///                 },
    ///             },
    ///         },
    ///     });
    /// 
    ///     var defaultAcl = new AliCloud.Alb.Acl("default", new()
    ///     {
    ///         AclName = name,
    ///         ResourceGroupId = defaultGetResourceGroups.Apply(getResourceGroupsResult =&gt; getResourceGroupsResult.Groups[0]?.Id),
    ///     });
    /// 
    ///     var defaultAclEntryAttachment = new AliCloud.Alb.AclEntryAttachment("default", new()
    ///     {
    ///         AclId = defaultAcl.Id,
    ///         Entry = "10.0.0.0/24",
    ///         Description = name,
    ///     });
    /// 
    ///     var defaultListenerAclAttachment = new AliCloud.Alb.ListenerAclAttachment("default", new()
    ///     {
    ///         AclId = defaultAcl.Id,
    ///         ListenerId = defaultListener.Id,
    ///         AclType = "White",
    ///     });
    /// 
    /// });
    /// ```
    /// 
    /// ## Import
    /// 
    /// ALB Listener Acl Attachment can be imported using the id, e.g.
    /// 
    /// ```sh
    /// $ pulumi import alicloud:alb/listenerAclAttachment:ListenerAclAttachment example &lt;listener_id&gt;:&lt;acl_id&gt;
    /// ```
    /// </summary>
    [AliCloudResourceType("alicloud:alb/listenerAclAttachment:ListenerAclAttachment")]
    public partial class ListenerAclAttachment : global::Pulumi.CustomResource
    {
        /// <summary>
        /// The ID list of the access policy group bound by the listener.
        /// </summary>
        [Output("aclId")]
        public Output<string> AclId { get; private set; } = null!;

        /// <summary>
        /// Access control type:
        /// - **White**: only requests from IP addresses or address segments in the selected access control list are forwarded. The whitelist applies to scenarios where only specific IP addresses are allowed to access. There are certain business risks in setting up a whitelist. Once the whitelist is set, only the IP addresses in the whitelist can access the load balancer listener. If whitelist access is enabled but no IP addresses are added to the access policy group, the server load balancer listener forwards all requests.
        /// - **Black**: All requests from IP addresses or address segments in the selected access control list are not forwarded. Blacklists are applicable to scenarios where only certain IP addresses are restricted. If blacklist access is enabled and no IP is added to the access policy group, the server load balancer listener forwards all requests.
        /// </summary>
        [Output("aclType")]
        public Output<string> AclType { get; private set; } = null!;

        /// <summary>
        /// Listener instance ID.
        /// </summary>
        [Output("listenerId")]
        public Output<string> ListenerId { get; private set; } = null!;

        /// <summary>
        /// Listener Status.
        /// </summary>
        [Output("status")]
        public Output<string> Status { get; private set; } = null!;


        /// <summary>
        /// Create a ListenerAclAttachment resource with the given unique name, arguments, and options.
        /// </summary>
        ///
        /// <param name="name">The unique name of the resource</param>
        /// <param name="args">The arguments used to populate this resource's properties</param>
        /// <param name="options">A bag of options that control this resource's behavior</param>
        public ListenerAclAttachment(string name, ListenerAclAttachmentArgs args, CustomResourceOptions? options = null)
            : base("alicloud:alb/listenerAclAttachment:ListenerAclAttachment", name, args ?? new ListenerAclAttachmentArgs(), MakeResourceOptions(options, ""))
        {
        }

        private ListenerAclAttachment(string name, Input<string> id, ListenerAclAttachmentState? state = null, CustomResourceOptions? options = null)
            : base("alicloud:alb/listenerAclAttachment:ListenerAclAttachment", name, state, MakeResourceOptions(options, id))
        {
        }

        private static CustomResourceOptions MakeResourceOptions(CustomResourceOptions? options, Input<string>? id)
        {
            var defaultOptions = new CustomResourceOptions
            {
                Version = Utilities.Version,
            };
            var merged = CustomResourceOptions.Merge(defaultOptions, options);
            // Override the ID if one was specified for consistency with other language SDKs.
            merged.Id = id ?? merged.Id;
            return merged;
        }
        /// <summary>
        /// Get an existing ListenerAclAttachment resource's state with the given name, ID, and optional extra
        /// properties used to qualify the lookup.
        /// </summary>
        ///
        /// <param name="name">The unique name of the resulting resource.</param>
        /// <param name="id">The unique provider ID of the resource to lookup.</param>
        /// <param name="state">Any extra arguments used during the lookup.</param>
        /// <param name="options">A bag of options that control this resource's behavior</param>
        public static ListenerAclAttachment Get(string name, Input<string> id, ListenerAclAttachmentState? state = null, CustomResourceOptions? options = null)
        {
            return new ListenerAclAttachment(name, id, state, options);
        }
    }

    public sealed class ListenerAclAttachmentArgs : global::Pulumi.ResourceArgs
    {
        /// <summary>
        /// The ID list of the access policy group bound by the listener.
        /// </summary>
        [Input("aclId", required: true)]
        public Input<string> AclId { get; set; } = null!;

        /// <summary>
        /// Access control type:
        /// - **White**: only requests from IP addresses or address segments in the selected access control list are forwarded. The whitelist applies to scenarios where only specific IP addresses are allowed to access. There are certain business risks in setting up a whitelist. Once the whitelist is set, only the IP addresses in the whitelist can access the load balancer listener. If whitelist access is enabled but no IP addresses are added to the access policy group, the server load balancer listener forwards all requests.
        /// - **Black**: All requests from IP addresses or address segments in the selected access control list are not forwarded. Blacklists are applicable to scenarios where only certain IP addresses are restricted. If blacklist access is enabled and no IP is added to the access policy group, the server load balancer listener forwards all requests.
        /// </summary>
        [Input("aclType", required: true)]
        public Input<string> AclType { get; set; } = null!;

        /// <summary>
        /// Listener instance ID.
        /// </summary>
        [Input("listenerId", required: true)]
        public Input<string> ListenerId { get; set; } = null!;

        public ListenerAclAttachmentArgs()
        {
        }
        public static new ListenerAclAttachmentArgs Empty => new ListenerAclAttachmentArgs();
    }

    public sealed class ListenerAclAttachmentState : global::Pulumi.ResourceArgs
    {
        /// <summary>
        /// The ID list of the access policy group bound by the listener.
        /// </summary>
        [Input("aclId")]
        public Input<string>? AclId { get; set; }

        /// <summary>
        /// Access control type:
        /// - **White**: only requests from IP addresses or address segments in the selected access control list are forwarded. The whitelist applies to scenarios where only specific IP addresses are allowed to access. There are certain business risks in setting up a whitelist. Once the whitelist is set, only the IP addresses in the whitelist can access the load balancer listener. If whitelist access is enabled but no IP addresses are added to the access policy group, the server load balancer listener forwards all requests.
        /// - **Black**: All requests from IP addresses or address segments in the selected access control list are not forwarded. Blacklists are applicable to scenarios where only certain IP addresses are restricted. If blacklist access is enabled and no IP is added to the access policy group, the server load balancer listener forwards all requests.
        /// </summary>
        [Input("aclType")]
        public Input<string>? AclType { get; set; }

        /// <summary>
        /// Listener instance ID.
        /// </summary>
        [Input("listenerId")]
        public Input<string>? ListenerId { get; set; }

        /// <summary>
        /// Listener Status.
        /// </summary>
        [Input("status")]
        public Input<string>? Status { get; set; }

        public ListenerAclAttachmentState()
        {
        }
        public static new ListenerAclAttachmentState Empty => new ListenerAclAttachmentState();
    }
}
