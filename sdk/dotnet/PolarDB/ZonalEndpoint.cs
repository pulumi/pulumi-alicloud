// *** WARNING: this file was generated by pulumi-language-dotnet. ***
// *** Do not edit by hand unless you're certain you know what you are doing! ***

using System;
using System.Collections.Generic;
using System.Collections.Immutable;
using System.Threading.Tasks;
using Pulumi.Serialization;

namespace Pulumi.AliCloud.PolarDB
{
    /// <summary>
    /// Provides a PolarDB Zonal endpoint resource to manage custom endpoint of PolarDB cluster.
    /// 
    /// &gt; **NOTE:** Available since v1.262.0.
    /// **NOTE:** The primary endpoint and the default cluster endpoint can not be created or deleted manually.
    /// 
    /// ## Example Usage
    /// 
    /// ```csharp
    /// using System.Collections.Generic;
    /// using System.Linq;
    /// using System.Text.Json;
    /// using Pulumi;
    /// using AliCloud = Pulumi.AliCloud;
    /// 
    /// return await Deployment.RunAsync(() =&gt; 
    /// {
    ///     var config = new Config();
    ///     // The advanced configuration for all nodes in the cluster except for the RW node, including db_node_class, hot_replica_mode, and imci_switch properties.
    ///     var dbClusterNodesConfigs = config.GetObject&lt;Dictionary&lt;string, DbClusterNodesConfigs&gt;&gt;("dbClusterNodesConfigs") ?? 
    ///     {
    ///         { "db_node_1", 
    ///         {
    ///             { "dbNodeClass", "polar.mysql.x4.medium.c" },
    ///             { "dbNodeRole", "Writer" },
    ///             { "hotReplicaMode", null },
    ///             { "imciSwitch", null },
    ///         } },
    ///         { "db_node_2", 
    ///         {
    ///             { "dbNodeClass", "polar.mysql.x4.medium.c" },
    ///             { "dbNodeRole", "Reader" },
    ///             { "hotReplicaMode", null },
    ///             { "imciSwitch", null },
    ///         } },
    ///     };
    ///     var @default = new AliCloud.Ens.Network("default", new()
    ///     {
    ///         NetworkName = "terraform-example",
    ///         Description = "LoadBalancerNetworkDescription_test",
    ///         CidrBlock = "192.168.2.0/24",
    ///         EnsRegionId = "tr-Istanbul-1",
    ///     });
    /// 
    ///     var defaultVswitch = new AliCloud.Ens.Vswitch("default", new()
    ///     {
    ///         Description = "LoadBalancerVSwitchDescription_test",
    ///         CidrBlock = "192.168.2.0/24",
    ///         VswitchName = "terraform-example",
    ///         EnsRegionId = "tr-Istanbul-1",
    ///         NetworkId = @default.Id,
    ///     });
    /// 
    ///     var defaultZonalDbCluster = new AliCloud.PolarDB.ZonalDbCluster("default", new()
    ///     {
    ///         DbNodeClass = "polar.mysql.x4.medium.c",
    ///         Description = "terraform-example",
    ///         EnsRegionId = "tr-Istanbul-1",
    ///         VpcId = @default.Id,
    ///         VswitchId = defaultVswitch.Id,
    ///         DbClusterNodesConfigs = dbClusterNodesConfigs.Select(pair =&gt; new { pair.Key, pair.Value }).ToDictionary(item =&gt; {
    ///             var node = item.Key;
    ///             return node;
    ///         }, item =&gt; {
    ///             var config = item.Value;
    ///             return JsonSerializer.Serialize(.ToDictionary(item =&gt; {
    ///                 var k = item.Key;
    ///                 return k;
    ///             }, item =&gt; {
    ///                 var v = item.Value;
    ///                 return v;
    ///             }));
    ///         }),
    ///     });
    /// 
    ///     var defaultZonalEndpoint = new AliCloud.PolarDB.ZonalEndpoint("default", new()
    ///     {
    ///         DbClusterId = defaultZonalDbCluster.Id,
    ///         DbClusterNodesIds = defaultZonalDbCluster.DbClusterNodesIds,
    ///         EndpointConfig = null,
    ///         NodesKeys = new[]
    ///         {
    ///             "db_node_1",
    ///             "db_node_2",
    ///         },
    ///         ReadWriteMode = "ReadWrite",
    ///     });
    /// 
    /// });
    /// 
    /// public class DbClusterNodesConfigs
    /// {
    ///     public string dbNodeClass { get; set; }
    ///     public string dbNodeRole { get; set; }
    ///     public string hotReplicaMode { get; set; }
    ///     public string imciSwitch { get; set; }
    /// }
    /// ```
    /// 
    /// ## Import
    /// 
    /// PolarDB Zonal endpoint can be imported using the id, e.g.
    /// 
    /// ```sh
    /// $ pulumi import alicloud:polardb/zonalEndpoint:ZonalEndpoint example pc-abc123456:pe-abc123456
    /// ```
    /// </summary>
    [AliCloudResourceType("alicloud:polardb/zonalEndpoint:ZonalEndpoint")]
    public partial class ZonalEndpoint : global::Pulumi.CustomResource
    {
        /// <summary>
        /// Whether the new node automatically joins the default cluster address. Valid values are `Enable`, `Disable`. When creating a new custom endpoint, default to `Enable`.
        /// </summary>
        [Output("autoAddNewNodes")]
        public Output<string> AutoAddNewNodes { get; private set; } = null!;

        /// <summary>
        /// Prefix of the specified endpoint. The prefix must be 6 to 30 characters in length, and can contain lowercase letters, digits, and hyphens (-), must start with a letter and end with a digit or letter.
        /// </summary>
        [Output("connectionPrefix")]
        public Output<string> ConnectionPrefix { get; private set; } = null!;

        /// <summary>
        /// The Id of cluster that can run database.
        /// </summary>
        [Output("dbClusterId")]
        public Output<string> DbClusterId { get; private set; } = null!;

        /// <summary>
        /// referenced from the DbClusterNodesIds attribute of alicloud_polardb_zonal_db_cluster..
        /// </summary>
        [Output("dbClusterNodesIds")]
        public Output<ImmutableDictionary<string, string>> DbClusterNodesIds { get; private set; } = null!;

        /// <summary>
        /// The name of the endpoint.
        /// </summary>
        [Output("dbEndpointDescription")]
        public Output<string?> DbEndpointDescription { get; private set; } = null!;

        /// <summary>
        /// The ID of the cluster endpoint.
        /// </summary>
        [Output("dbEndpointId")]
        public Output<string> DbEndpointId { get; private set; } = null!;

        /// <summary>
        /// The advanced settings of the endpoint of Apsara PolarDB clusters are in JSON format. Including the settings of consistency level, transaction splitting, connection pool, and offload reads from primary node. For more details, see the [description of EndpointConfig in the Request parameters table for details](https://www.alibabacloud.com/help/doc-detail/116593.htm).
        /// </summary>
        [Output("endpointConfig")]
        public Output<ImmutableDictionary<string, string>?> EndpointConfig { get; private set; } = null!;

        /// <summary>
        /// Type of the endpoint. Valid values are `Custom`, `Cluster`, `Primary`, default to `Custom`. However when creating a new endpoint, it also only can be `Custom`.
        /// </summary>
        [Output("endpointType")]
        public Output<string> EndpointType { get; private set; } = null!;

        /// <summary>
        /// The network type of the endpoint address.
        /// </summary>
        [Output("netType")]
        public Output<string> NetType { get; private set; } = null!;

        /// <summary>
        /// Node id list for endpoint configuration.
        /// </summary>
        [Output("nodes")]
        public Output<ImmutableArray<string>> Nodes { get; private set; } = null!;

        /// <summary>
        /// The list of backend nodes for the endpoint, with the attribute values derived from the map key of db_cluster_nodes_ids.
        /// </summary>
        [Output("nodesKeys")]
        public Output<ImmutableArray<string>> NodesKeys { get; private set; } = null!;

        /// <summary>
        /// Port of the specified endpoint. Valid values: 3000 to 5999.
        /// </summary>
        [Output("port")]
        public Output<string> Port { get; private set; } = null!;

        /// <summary>
        /// Read or write mode. Valid values are `ReadWrite`, `ReadOnly`. When creating a new custom endpoint, default to `ReadOnly`.
        /// </summary>
        [Output("readWriteMode")]
        public Output<string?> ReadWriteMode { get; private set; } = null!;

        /// <summary>
        /// The ID of ENS VPC where to use the DB.
        /// </summary>
        [Output("vpcId")]
        public Output<string> VpcId { get; private set; } = null!;

        /// <summary>
        /// The ID of ENS virtual switch where to use the DB.
        /// </summary>
        [Output("vswitchId")]
        public Output<string> VswitchId { get; private set; } = null!;


        /// <summary>
        /// Create a ZonalEndpoint resource with the given unique name, arguments, and options.
        /// </summary>
        ///
        /// <param name="name">The unique name of the resource</param>
        /// <param name="args">The arguments used to populate this resource's properties</param>
        /// <param name="options">A bag of options that control this resource's behavior</param>
        public ZonalEndpoint(string name, ZonalEndpointArgs args, CustomResourceOptions? options = null)
            : base("alicloud:polardb/zonalEndpoint:ZonalEndpoint", name, args ?? new ZonalEndpointArgs(), MakeResourceOptions(options, ""))
        {
        }

        private ZonalEndpoint(string name, Input<string> id, ZonalEndpointState? state = null, CustomResourceOptions? options = null)
            : base("alicloud:polardb/zonalEndpoint:ZonalEndpoint", name, state, MakeResourceOptions(options, id))
        {
        }

        private static CustomResourceOptions MakeResourceOptions(CustomResourceOptions? options, Input<string>? id)
        {
            var defaultOptions = new CustomResourceOptions
            {
                Version = Utilities.Version,
            };
            var merged = CustomResourceOptions.Merge(defaultOptions, options);
            // Override the ID if one was specified for consistency with other language SDKs.
            merged.Id = id ?? merged.Id;
            return merged;
        }
        /// <summary>
        /// Get an existing ZonalEndpoint resource's state with the given name, ID, and optional extra
        /// properties used to qualify the lookup.
        /// </summary>
        ///
        /// <param name="name">The unique name of the resulting resource.</param>
        /// <param name="id">The unique provider ID of the resource to lookup.</param>
        /// <param name="state">Any extra arguments used during the lookup.</param>
        /// <param name="options">A bag of options that control this resource's behavior</param>
        public static ZonalEndpoint Get(string name, Input<string> id, ZonalEndpointState? state = null, CustomResourceOptions? options = null)
        {
            return new ZonalEndpoint(name, id, state, options);
        }
    }

    public sealed class ZonalEndpointArgs : global::Pulumi.ResourceArgs
    {
        /// <summary>
        /// Whether the new node automatically joins the default cluster address. Valid values are `Enable`, `Disable`. When creating a new custom endpoint, default to `Enable`.
        /// </summary>
        [Input("autoAddNewNodes")]
        public Input<string>? AutoAddNewNodes { get; set; }

        /// <summary>
        /// The Id of cluster that can run database.
        /// </summary>
        [Input("dbClusterId", required: true)]
        public Input<string> DbClusterId { get; set; } = null!;

        [Input("dbClusterNodesIds", required: true)]
        private InputMap<string>? _dbClusterNodesIds;

        /// <summary>
        /// referenced from the DbClusterNodesIds attribute of alicloud_polardb_zonal_db_cluster..
        /// </summary>
        public InputMap<string> DbClusterNodesIds
        {
            get => _dbClusterNodesIds ?? (_dbClusterNodesIds = new InputMap<string>());
            set => _dbClusterNodesIds = value;
        }

        /// <summary>
        /// The name of the endpoint.
        /// </summary>
        [Input("dbEndpointDescription")]
        public Input<string>? DbEndpointDescription { get; set; }

        [Input("endpointConfig")]
        private InputMap<string>? _endpointConfig;

        /// <summary>
        /// The advanced settings of the endpoint of Apsara PolarDB clusters are in JSON format. Including the settings of consistency level, transaction splitting, connection pool, and offload reads from primary node. For more details, see the [description of EndpointConfig in the Request parameters table for details](https://www.alibabacloud.com/help/doc-detail/116593.htm).
        /// </summary>
        public InputMap<string> EndpointConfig
        {
            get => _endpointConfig ?? (_endpointConfig = new InputMap<string>());
            set => _endpointConfig = value;
        }

        /// <summary>
        /// Type of the endpoint. Valid values are `Custom`, `Cluster`, `Primary`, default to `Custom`. However when creating a new endpoint, it also only can be `Custom`.
        /// </summary>
        [Input("endpointType")]
        public Input<string>? EndpointType { get; set; }

        /// <summary>
        /// The network type of the endpoint address.
        /// </summary>
        [Input("netType")]
        public Input<string>? NetType { get; set; }

        [Input("nodesKeys")]
        private InputList<string>? _nodesKeys;

        /// <summary>
        /// The list of backend nodes for the endpoint, with the attribute values derived from the map key of db_cluster_nodes_ids.
        /// </summary>
        public InputList<string> NodesKeys
        {
            get => _nodesKeys ?? (_nodesKeys = new InputList<string>());
            set => _nodesKeys = value;
        }

        /// <summary>
        /// Read or write mode. Valid values are `ReadWrite`, `ReadOnly`. When creating a new custom endpoint, default to `ReadOnly`.
        /// </summary>
        [Input("readWriteMode")]
        public Input<string>? ReadWriteMode { get; set; }

        /// <summary>
        /// The ID of ENS VPC where to use the DB.
        /// </summary>
        [Input("vpcId")]
        public Input<string>? VpcId { get; set; }

        /// <summary>
        /// The ID of ENS virtual switch where to use the DB.
        /// </summary>
        [Input("vswitchId")]
        public Input<string>? VswitchId { get; set; }

        public ZonalEndpointArgs()
        {
        }
        public static new ZonalEndpointArgs Empty => new ZonalEndpointArgs();
    }

    public sealed class ZonalEndpointState : global::Pulumi.ResourceArgs
    {
        /// <summary>
        /// Whether the new node automatically joins the default cluster address. Valid values are `Enable`, `Disable`. When creating a new custom endpoint, default to `Enable`.
        /// </summary>
        [Input("autoAddNewNodes")]
        public Input<string>? AutoAddNewNodes { get; set; }

        /// <summary>
        /// Prefix of the specified endpoint. The prefix must be 6 to 30 characters in length, and can contain lowercase letters, digits, and hyphens (-), must start with a letter and end with a digit or letter.
        /// </summary>
        [Input("connectionPrefix")]
        public Input<string>? ConnectionPrefix { get; set; }

        /// <summary>
        /// The Id of cluster that can run database.
        /// </summary>
        [Input("dbClusterId")]
        public Input<string>? DbClusterId { get; set; }

        [Input("dbClusterNodesIds")]
        private InputMap<string>? _dbClusterNodesIds;

        /// <summary>
        /// referenced from the DbClusterNodesIds attribute of alicloud_polardb_zonal_db_cluster..
        /// </summary>
        public InputMap<string> DbClusterNodesIds
        {
            get => _dbClusterNodesIds ?? (_dbClusterNodesIds = new InputMap<string>());
            set => _dbClusterNodesIds = value;
        }

        /// <summary>
        /// The name of the endpoint.
        /// </summary>
        [Input("dbEndpointDescription")]
        public Input<string>? DbEndpointDescription { get; set; }

        /// <summary>
        /// The ID of the cluster endpoint.
        /// </summary>
        [Input("dbEndpointId")]
        public Input<string>? DbEndpointId { get; set; }

        [Input("endpointConfig")]
        private InputMap<string>? _endpointConfig;

        /// <summary>
        /// The advanced settings of the endpoint of Apsara PolarDB clusters are in JSON format. Including the settings of consistency level, transaction splitting, connection pool, and offload reads from primary node. For more details, see the [description of EndpointConfig in the Request parameters table for details](https://www.alibabacloud.com/help/doc-detail/116593.htm).
        /// </summary>
        public InputMap<string> EndpointConfig
        {
            get => _endpointConfig ?? (_endpointConfig = new InputMap<string>());
            set => _endpointConfig = value;
        }

        /// <summary>
        /// Type of the endpoint. Valid values are `Custom`, `Cluster`, `Primary`, default to `Custom`. However when creating a new endpoint, it also only can be `Custom`.
        /// </summary>
        [Input("endpointType")]
        public Input<string>? EndpointType { get; set; }

        /// <summary>
        /// The network type of the endpoint address.
        /// </summary>
        [Input("netType")]
        public Input<string>? NetType { get; set; }

        [Input("nodes")]
        private InputList<string>? _nodes;

        /// <summary>
        /// Node id list for endpoint configuration.
        /// </summary>
        public InputList<string> Nodes
        {
            get => _nodes ?? (_nodes = new InputList<string>());
            set => _nodes = value;
        }

        [Input("nodesKeys")]
        private InputList<string>? _nodesKeys;

        /// <summary>
        /// The list of backend nodes for the endpoint, with the attribute values derived from the map key of db_cluster_nodes_ids.
        /// </summary>
        public InputList<string> NodesKeys
        {
            get => _nodesKeys ?? (_nodesKeys = new InputList<string>());
            set => _nodesKeys = value;
        }

        /// <summary>
        /// Port of the specified endpoint. Valid values: 3000 to 5999.
        /// </summary>
        [Input("port")]
        public Input<string>? Port { get; set; }

        /// <summary>
        /// Read or write mode. Valid values are `ReadWrite`, `ReadOnly`. When creating a new custom endpoint, default to `ReadOnly`.
        /// </summary>
        [Input("readWriteMode")]
        public Input<string>? ReadWriteMode { get; set; }

        /// <summary>
        /// The ID of ENS VPC where to use the DB.
        /// </summary>
        [Input("vpcId")]
        public Input<string>? VpcId { get; set; }

        /// <summary>
        /// The ID of ENS virtual switch where to use the DB.
        /// </summary>
        [Input("vswitchId")]
        public Input<string>? VswitchId { get; set; }

        public ZonalEndpointState()
        {
        }
        public static new ZonalEndpointState Empty => new ZonalEndpointState();
    }
}
